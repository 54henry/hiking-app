define(["dojo/on","esri/WebScene","dojo/dom","dojo/dom-construct","esri/geometry/Polyline","esri/geometry/geometryEngine","esri/config","esri/request","esri/layers/GraphicsLayer","esri/geometry/Point","esri/Graphic","esri/symbols/PointSymbol3D","esri/symbols/IconSymbol3DLayer","esri/views/SceneView","esri/layers/FeatureLayer","esri/tasks/support/Query","dojo/promise/all","esri/core/watchUtils","esri/renderers/UniqueValueRenderer","esri/symbols/LineSymbol3D","esri/symbols/LineSymbol3DLayer","esri/symbols/LabelSymbol3D","esri/layers/support/LabelClass","esri/symbols/TextSymbol3DLayer","esri/core/Accessor","esri/core/accessorSupport/decorators"], function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_34__, __WEBPACK_EXTERNAL_MODULE_35__, __WEBPACK_EXTERNAL_MODULE_36__, __WEBPACK_EXTERNAL_MODULE_37__, __WEBPACK_EXTERNAL_MODULE_38__, __WEBPACK_EXTERNAL_MODULE_39__, __WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_19__, __WEBPACK_EXTERNAL_MODULE_20__, __WEBPACK_EXTERNAL_MODULE_21__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_12__) { return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 6);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = {\r\n    scene: {\r\n        portalUrl: 'http://zrh.mapsdevext.arcgis.com',\r\n        websceneItemId: '7abaad52a4254f30ab1897079cad504a'\r\n    },\r\n    data: {\r\n        trailsServiceUrl: 'https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/SwissNationalParkTrails/FeatureServer',\r\n        trailAttributes: {\r\n            name: 'Name',\r\n            id: 'RouteId',\r\n            difficulty: 'Difficulty',\r\n            category: 'Category',\r\n            walktime: 'Hiketime',\r\n            status: 'Status',\r\n            ascent: 'Ascent',\r\n            description: 'Description'\r\n        },\r\n        filterOptions: {\r\n            singleChoice: ['difficulty', 'category'],\r\n            range: ['walktime', 'ascent']\r\n        }\r\n    },\r\n    colors: {\r\n        defaultTrail: '#db5353',\r\n        selectedTrail: '#f9a352'\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvY29uZmlnLnRzP2RkOGQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrQkFBZTtJQUNiLEtBQUssRUFBRTtRQUNMLFNBQVMsRUFBRSxrQ0FBa0M7UUFDN0MsY0FBYyxFQUFFLGtDQUFrQztLQUNuRDtJQUNELElBQUksRUFBRTtRQUNKLGdCQUFnQixFQUFFLHlHQUF5RztRQUMzSCxlQUFlLEVBQUU7WUFDZixJQUFJLEVBQUUsTUFBTTtZQUNaLEVBQUUsRUFBRSxTQUFTO1lBQ2IsVUFBVSxFQUFFLFlBQVk7WUFDeEIsUUFBUSxFQUFFLFVBQVU7WUFDcEIsUUFBUSxFQUFFLFVBQVU7WUFDcEIsTUFBTSxFQUFFLFFBQVE7WUFDaEIsTUFBTSxFQUFFLFFBQVE7WUFDaEIsV0FBVyxFQUFFLGFBQWE7U0FDM0I7UUFDRCxhQUFhLEVBQUU7WUFDYixZQUFZLEVBQUUsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDO1lBQ3hDLEtBQUssRUFBRSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUM7U0FDOUI7S0FDRjtJQUNELE1BQU0sRUFBRTtRQUNOLFlBQVksRUFBRSxTQUFTO1FBQ3ZCLGFBQWEsRUFBRSxTQUFTO0tBQ3pCO0NBQ0YiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHtcclxuICBzY2VuZToge1xyXG4gICAgcG9ydGFsVXJsOiAnaHR0cDovL3pyaC5tYXBzZGV2ZXh0LmFyY2dpcy5jb20nLFxyXG4gICAgd2Vic2NlbmVJdGVtSWQ6ICc3YWJhYWQ1MmE0MjU0ZjMwYWIxODk3MDc5Y2FkNTA0YSdcclxuICB9LFxyXG4gIGRhdGE6IHtcclxuICAgIHRyYWlsc1NlcnZpY2VVcmw6ICdodHRwczovL3NlcnZpY2VzLmFyY2dpcy5jb20vVjZaSEZyNnpkZ05adVZHMC9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9Td2lzc05hdGlvbmFsUGFya1RyYWlscy9GZWF0dXJlU2VydmVyJyxcclxuICAgIHRyYWlsQXR0cmlidXRlczoge1xyXG4gICAgICBuYW1lOiAnTmFtZScsXHJcbiAgICAgIGlkOiAnUm91dGVJZCcsXHJcbiAgICAgIGRpZmZpY3VsdHk6ICdEaWZmaWN1bHR5JyxcclxuICAgICAgY2F0ZWdvcnk6ICdDYXRlZ29yeScsXHJcbiAgICAgIHdhbGt0aW1lOiAnSGlrZXRpbWUnLFxyXG4gICAgICBzdGF0dXM6ICdTdGF0dXMnLFxyXG4gICAgICBhc2NlbnQ6ICdBc2NlbnQnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0Rlc2NyaXB0aW9uJ1xyXG4gICAgfSxcclxuICAgIGZpbHRlck9wdGlvbnM6IHtcclxuICAgICAgc2luZ2xlQ2hvaWNlOiBbJ2RpZmZpY3VsdHknLCAnY2F0ZWdvcnknXSxcclxuICAgICAgcmFuZ2U6IFsnd2Fsa3RpbWUnLCAnYXNjZW50J11cclxuICAgIH1cclxuICB9LFxyXG4gIGNvbG9yczoge1xyXG4gICAgZGVmYXVsdFRyYWlsOiAnI2RiNTM1MycsXHJcbiAgICBzZWxlY3RlZFRyYWlsOiAnI2Y5YTM1MidcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RzL2NvbmZpZy50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_1__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJkb2pvL2RvbVwiP2IwYWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJkb2pvL2RvbVwiXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_2__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJkb2pvL2RvbS1jb25zdHJ1Y3RcIj8wNzVkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZG9qby9kb20tY29uc3RydWN0XCJcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_3__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJkb2pvL29uXCI/M2UyYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImRvam8vb25cIlxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_4__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL1dlYlNjZW5lXCI/ZTQ1YyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImVzcmkvV2ViU2NlbmVcIlxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_5__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2NvbmZpZ1wiPzg1NGMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL2NvbmZpZ1wiXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(7);


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n/* main application */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__webpack_require__(8);\r\n__webpack_require__(9);\r\nvar State_1 = __webpack_require__(10);\r\nvar deviceUtils_1 = __webpack_require__(13);\r\nvar SceneElement_1 = __webpack_require__(14);\r\nvar LoadingPage_1 = __webpack_require__(28);\r\nvar Trail_1 = __webpack_require__(30);\r\nvar MenuPanel_1 = __webpack_require__(40);\r\nvar state = new State_1.default();\r\ndeviceUtils_1.default.init(state);\r\nvar loadingPage = new LoadingPage_1.default(state);\r\nvar sceneElement = new SceneElement_1.default(state);\r\nsceneElement.getZEnrichedTrails()\r\n    .then(function (features) {\r\n    state.trails = features.map(function (feature) {\r\n        return new Trail_1.default(feature);\r\n    });\r\n    var menuPanel = new MenuPanel_1.default(state.trails, state);\r\n});\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvbWFpbi50cz8wMGE4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxzQkFBc0I7O0FBRXRCLHVCQUE2QjtBQUM3Qix1QkFBNkI7QUFFN0Isc0NBQTRCO0FBQzVCLDRDQUEyQztBQUMzQyw2Q0FBZ0Q7QUFDaEQsNENBQTJDO0FBQzNDLHNDQUFpQztBQUNqQywwQ0FBdUM7QUFFdkMsSUFBSSxLQUFLLEdBQUcsSUFBSSxlQUFLLEVBQUUsQ0FBQztBQUN4QixxQkFBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN4QixJQUFJLFdBQVcsR0FBRyxJQUFJLHFCQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekMsSUFBSSxZQUFZLEdBQUcsSUFBSSxzQkFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzNDLFlBQVksQ0FBQyxrQkFBa0IsRUFBRTtLQUM5QixJQUFJLENBQUMsVUFBQyxRQUFRO0lBQ2IsS0FBSyxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFVBQUMsT0FBTztRQUNsQyxNQUFNLENBQUMsSUFBSSxlQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDNUIsQ0FBQyxDQUFDLENBQUM7SUFDSCxJQUFJLFNBQVMsR0FBRyxJQUFJLG1CQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNyRCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogbWFpbiBhcHBsaWNhdGlvbiAqL1xyXG5cclxuaW1wb3J0ICcuLi9zdHlsZS9yZXNldC5zY3NzJztcclxuaW1wb3J0ICcuLi9zdHlsZS9zdHlsZS5zY3NzJztcclxuXHJcbmltcG9ydCBTdGF0ZSBmcm9tICcuL1N0YXRlJztcclxuaW1wb3J0IGRldmljZVV0aWxzIGZyb20gJy4vdWkvZGV2aWNlVXRpbHMnO1xyXG5pbXBvcnQgU2NlbmVFbGVtZW50IGZyb20gJy4vc2NlbmUvU2NlbmVFbGVtZW50JztcclxuaW1wb3J0IExvYWRpbmdQYWdlIGZyb20gJy4vdWkvTG9hZGluZ1BhZ2UnO1xyXG5pbXBvcnQgVHJhaWwgZnJvbSAnLi9kYXRhL1RyYWlsJztcclxuaW1wb3J0IE1lbnVQYW5lbCBmcm9tICcuL3VpL01lbnVQYW5lbCc7XHJcblxyXG5sZXQgc3RhdGUgPSBuZXcgU3RhdGUoKTtcclxuZGV2aWNlVXRpbHMuaW5pdChzdGF0ZSk7XHJcbmxldCBsb2FkaW5nUGFnZSA9IG5ldyBMb2FkaW5nUGFnZShzdGF0ZSk7XHJcbmxldCBzY2VuZUVsZW1lbnQgPSBuZXcgU2NlbmVFbGVtZW50KHN0YXRlKTtcclxuc2NlbmVFbGVtZW50LmdldFpFbnJpY2hlZFRyYWlscygpXHJcbiAgLnRoZW4oKGZlYXR1cmVzKSA9PiB7XHJcbiAgICBzdGF0ZS50cmFpbHMgPSBmZWF0dXJlcy5tYXAoKGZlYXR1cmUpID0+IHtcclxuICAgICAgcmV0dXJuIG5ldyBUcmFpbChmZWF0dXJlKTtcclxuICAgIH0pO1xyXG4gICAgbGV0IG1lbnVQYW5lbCA9IG5ldyBNZW51UGFuZWwoc3RhdGUudHJhaWxzLCBzdGF0ZSk7XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHMvbWFpbi50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvcmVzZXQuc2Nzcz9jYjUzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3N0eWxlL3Jlc2V0LnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvc3R5bGUuc2Nzcz9mM2U1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3N0eWxlL3N0eWxlLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Accessor = __webpack_require__(11);\r\nvar decorators_1 = __webpack_require__(12);\r\nvar State = /** @class */ (function (_super) {\r\n    __extends(State, _super);\r\n    function State() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.displayLoading = true;\r\n        _this.selectedTrailId = null;\r\n        _this.filteredTrailIds = [];\r\n        _this.filters = {\r\n            walktime: null,\r\n            ascent: null,\r\n            category: null,\r\n            difficulty: null\r\n        };\r\n        _this.device = null;\r\n        _this.currentBasemapId = null;\r\n        _this.view = null;\r\n        _this.trails = null;\r\n        return _this;\r\n    }\r\n    State.prototype.setSelectedTrailId = function (id) {\r\n        this.selectedTrailId = id;\r\n        if (this.selectedTrailId && this.visiblePanel !== 'detailPanel') {\r\n            this.visiblePanel = 'detailPanel';\r\n        }\r\n    };\r\n    State.prototype.setFilteredTrailIds = function (ids) {\r\n        this.filteredTrailIds = ids;\r\n        // check if the selected trail is in the filtered trails\r\n        if (this.filteredTrailIds.indexOf(this.selectedTrailId) === -1) {\r\n            this.selectedTrailId = null;\r\n        }\r\n    };\r\n    State.prototype.setFilter = function (property, value) {\r\n        //create a new filters object so that the watch notifies on every property change\r\n        this.filters = __assign({}, this.filters);\r\n        this.filters[property] = value;\r\n    };\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"displayLoading\", void 0);\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"selectedTrailId\", void 0);\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"filteredTrailIds\", void 0);\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"filters\", void 0);\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"visiblePanel\", void 0);\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"device\", void 0);\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"currentBasemapId\", void 0);\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"view\", void 0);\r\n    __decorate([\r\n        decorators_1.property()\r\n    ], State.prototype, \"trails\", void 0);\r\n    State = __decorate([\r\n        decorators_1.subclass()\r\n    ], State);\r\n    return State;\r\n}(decorators_1.declared(Accessor)));\r\nexports.default = State;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvU3RhdGUudHM/ZjdmZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHVDQUFnRDtBQUdoRCwyQ0FBb0Y7QUFHcEY7SUFBbUMseUJBQWtCO0lBRHJEO1FBQUEscUVBNERDO1FBeERDLG9CQUFjLEdBQVksSUFBSSxDQUFDO1FBRy9CLHFCQUFlLEdBQVcsSUFBSSxDQUFDO1FBVS9CLHNCQUFnQixHQUFrQixFQUFFLENBQUM7UUFZckMsYUFBTyxHQUFZO1lBQ2pCLFFBQVEsRUFBRSxJQUFJO1lBQ2QsTUFBTSxFQUFFLElBQUk7WUFDWixRQUFRLEVBQUUsSUFBSTtZQUNkLFVBQVUsRUFBRSxJQUFJO1NBQ2pCO1FBZUQsWUFBTSxHQUFXLElBQUksQ0FBQztRQUd0QixzQkFBZ0IsR0FBVyxJQUFJLENBQUM7UUFHaEMsVUFBSSxHQUFjLElBQUksQ0FBQztRQUd2QixZQUFNLEdBQWlCLElBQUksQ0FBQzs7SUFFOUIsQ0FBQztJQW5EQyxrQ0FBa0IsR0FBbEIsVUFBbUIsRUFBVTtRQUMzQixJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQztRQUMxQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxZQUFZLEtBQUssYUFBYSxDQUFDLENBQUMsQ0FBQztZQUNoRSxJQUFJLENBQUMsWUFBWSxHQUFHLGFBQWEsQ0FBQztRQUNwQyxDQUFDO0lBQ0gsQ0FBQztJQUtELG1DQUFtQixHQUFuQixVQUFvQixHQUFrQjtRQUNwQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsR0FBRyxDQUFDO1FBRTVCLHdEQUF3RDtRQUN4RCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0QsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7UUFDOUIsQ0FBQztJQUNILENBQUM7SUFVRCx5QkFBUyxHQUFULFVBQVUsUUFBZ0IsRUFBRSxLQUE2QjtRQUV2RCxpRkFBaUY7UUFDakYsSUFBSSxDQUFDLE9BQU8sZ0JBQ1AsSUFBSSxDQUFDLE9BQU8sQ0FDaEIsQ0FBQztRQUNGLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ2pDLENBQUM7SUF2Q0Q7UUFEQyxxQkFBUSxFQUFFO2lEQUNvQjtJQUcvQjtRQURDLHFCQUFRLEVBQUU7a0RBQ29CO0lBVS9CO1FBREMscUJBQVEsRUFBRTttREFDMEI7SUFZckM7UUFEQyxxQkFBUSxFQUFFOzBDQU1WO0lBWUQ7UUFEQyxxQkFBUSxFQUFFOytDQUNxRDtJQUdoRTtRQURDLHFCQUFRLEVBQUU7eUNBQ1c7SUFHdEI7UUFEQyxxQkFBUSxFQUFFO21EQUNxQjtJQUdoQztRQURDLHFCQUFRLEVBQUU7dUNBQ1k7SUFHdkI7UUFEQyxxQkFBUSxFQUFFO3lDQUNpQjtJQXpEVCxLQUFLO1FBRHpCLHFCQUFRLEVBQUU7T0FDVSxLQUFLLENBMkR6QjtJQUFELFlBQUM7Q0FBQSxDQTNEa0MscUJBQVEsQ0FBQyxRQUFRLENBQUMsR0EyRHBEO2tCQTNEb0IsS0FBSyIsImZpbGUiOiIxMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBY2Nlc3NvciA9IHJlcXVpcmUoXCJlc3JpL2NvcmUvQWNjZXNzb3JcIik7XHJcbmltcG9ydCBTY2VuZVZpZXcgPSByZXF1aXJlKCdlc3JpL3ZpZXdzL1NjZW5lVmlldycpO1xyXG5pbXBvcnQgeyBGaWx0ZXJzLCBEZXZpY2UsIFRyYWlsIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IHN1YmNsYXNzLCBkZWNsYXJlZCwgcHJvcGVydHkgfSBmcm9tIFwiZXNyaS9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzXCI7XHJcblxyXG5Ac3ViY2xhc3MoKVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0ZSBleHRlbmRzIGRlY2xhcmVkKEFjY2Vzc29yKSB7XHJcblxyXG4gIEBwcm9wZXJ0eSgpXHJcbiAgZGlzcGxheUxvYWRpbmc6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICBAcHJvcGVydHkoKVxyXG4gIHNlbGVjdGVkVHJhaWxJZDogbnVtYmVyID0gbnVsbDtcclxuXHJcbiAgc2V0U2VsZWN0ZWRUcmFpbElkKGlkOiBudW1iZXIpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRUcmFpbElkID0gaWQ7XHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZFRyYWlsSWQgJiYgdGhpcy52aXNpYmxlUGFuZWwgIT09ICdkZXRhaWxQYW5lbCcpIHtcclxuICAgICAgdGhpcy52aXNpYmxlUGFuZWwgPSAnZGV0YWlsUGFuZWwnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQHByb3BlcnR5KClcclxuICBmaWx0ZXJlZFRyYWlsSWRzOiBBcnJheTxudW1iZXI+ID0gW107XHJcblxyXG4gIHNldEZpbHRlcmVkVHJhaWxJZHMoaWRzOiBBcnJheTxudW1iZXI+KSB7XHJcbiAgICB0aGlzLmZpbHRlcmVkVHJhaWxJZHMgPSBpZHM7XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgdGhlIHNlbGVjdGVkIHRyYWlsIGlzIGluIHRoZSBmaWx0ZXJlZCB0cmFpbHNcclxuICAgIGlmICh0aGlzLmZpbHRlcmVkVHJhaWxJZHMuaW5kZXhPZih0aGlzLnNlbGVjdGVkVHJhaWxJZCkgPT09IC0xKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRUcmFpbElkID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBwcm9wZXJ0eSgpXHJcbiAgZmlsdGVyczogRmlsdGVycyA9IHtcclxuICAgIHdhbGt0aW1lOiBudWxsLFxyXG4gICAgYXNjZW50OiBudWxsLFxyXG4gICAgY2F0ZWdvcnk6IG51bGwsXHJcbiAgICBkaWZmaWN1bHR5OiBudWxsXHJcbiAgfVxyXG5cclxuICBzZXRGaWx0ZXIocHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IEFycmF5PG51bWJlcj4pOiB2b2lkIHtcclxuXHJcbiAgICAvL2NyZWF0ZSBhIG5ldyBmaWx0ZXJzIG9iamVjdCBzbyB0aGF0IHRoZSB3YXRjaCBub3RpZmllcyBvbiBldmVyeSBwcm9wZXJ0eSBjaGFuZ2VcclxuICAgIHRoaXMuZmlsdGVycyA9IHtcclxuICAgICAgLi4udGhpcy5maWx0ZXJzXHJcbiAgICB9O1xyXG4gICAgdGhpcy5maWx0ZXJzW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgQHByb3BlcnR5KClcclxuICB2aXNpYmxlUGFuZWw6ICdzZWxlY3Rpb25QYW5lbCcgfCAnZGV0YWlsUGFuZWwnIHwgJ2Jhc2VtYXBQYW5lbCc7XHJcblxyXG4gIEBwcm9wZXJ0eSgpXHJcbiAgZGV2aWNlOiBEZXZpY2UgPSBudWxsO1xyXG5cclxuICBAcHJvcGVydHkoKVxyXG4gIGN1cnJlbnRCYXNlbWFwSWQ6IHN0cmluZyA9IG51bGw7XHJcblxyXG4gIEBwcm9wZXJ0eSgpXHJcbiAgdmlldzogU2NlbmVWaWV3ID0gbnVsbDtcclxuXHJcbiAgQHByb3BlcnR5KClcclxuICB0cmFpbHM6IEFycmF5PFRyYWlsPiA9IG51bGw7XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90cy9TdGF0ZS50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_11__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2NvcmUvQWNjZXNzb3JcIj9kZjAwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjExLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzExX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL2NvcmUvQWNjZXNzb3JcIlxuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_12__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnNcIj83YjM0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzEyX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnNcIlxuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mqDesktop = window.matchMedia('(min-width: 601px)');\r\nfunction getMedia() {\r\n    if (mqDesktop.matches) {\r\n        return 'desktop';\r\n    }\r\n    return 'mobilePortrait';\r\n}\r\nexports.default = {\r\n    init: function (state) {\r\n        function changeState(evt) {\r\n            var media = getMedia();\r\n            state.device = media;\r\n        }\r\n        mqDesktop.addListener(changeState);\r\n        changeState(mqDesktop);\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvdWkvZGV2aWNlVXRpbHMudHM/OTc0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUV4RDtJQUNFLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDbkIsQ0FBQztJQUNELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQztBQUMxQixDQUFDO0FBRUQsa0JBQWU7SUFDYixJQUFJLFlBQUMsS0FBWTtRQUNmLHFCQUFxQixHQUFHO1lBQ3RCLElBQUksS0FBSyxHQUFXLFFBQVEsRUFBRSxDQUFDO1lBQy9CLEtBQUssQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3ZCLENBQUM7UUFDRCxTQUFTLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25DLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN6QixDQUFDO0NBQ0YiLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZSwgRGV2aWNlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxubGV0IG1xRGVza3RvcCA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA2MDFweCknKTtcclxuXHJcbmZ1bmN0aW9uIGdldE1lZGlhKCk6IERldmljZSAge1xyXG4gIGlmIChtcURlc2t0b3AubWF0Y2hlcykge1xyXG4gICAgcmV0dXJuICdkZXNrdG9wJztcclxuICB9XHJcbiAgcmV0dXJuICdtb2JpbGVQb3J0cmFpdCc7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBpbml0KHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgZnVuY3Rpb24gY2hhbmdlU3RhdGUoZXZ0KSB7XHJcbiAgICAgIGxldCBtZWRpYTogRGV2aWNlID0gZ2V0TWVkaWEoKTtcclxuICAgICAgc3RhdGUuZGV2aWNlID0gbWVkaWE7XHJcbiAgICB9XHJcbiAgICBtcURlc2t0b3AuYWRkTGlzdGVuZXIoY2hhbmdlU3RhdGUpO1xyXG4gICAgY2hhbmdlU3RhdGUobXFEZXNrdG9wKTtcclxuICB9XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHMvdWkvZGV2aWNlVXRpbHMudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = __webpack_require__(0);\r\nvar utils_1 = __webpack_require__(15);\r\nvar domConstruct = __webpack_require__(2);\r\nvar dom = __webpack_require__(1);\r\nvar WebScene = __webpack_require__(4);\r\nvar SceneView = __webpack_require__(22);\r\nvar FeatureLayer = __webpack_require__(23);\r\nvar Query = __webpack_require__(24);\r\nvar all = __webpack_require__(25);\r\nvar esriConfig = __webpack_require__(5);\r\nvar watchUtils = __webpack_require__(26);\r\n__webpack_require__(27);\r\nesriConfig.request.corsEnabledServers.push('wtb.maptiles.arcgis.com');\r\nvar SceneElement = /** @class */ (function () {\r\n    function SceneElement(state) {\r\n        var _this = this;\r\n        // set state on the scene element and listen to changes on the state\r\n        this.state = state;\r\n        this.view = this.initView();\r\n        this.state.view = this.view;\r\n        this.setViewPadding();\r\n        this.trailsLayer = this.initTrailsLayer();\r\n        this.view.map.add(this.trailsLayer);\r\n        this.addEventListeners();\r\n        //adding view to the window only for debugging reasons\r\n        window.view = this.view;\r\n        state.watch('selectedTrailId', function (value, oldValue) {\r\n            if (value) {\r\n                _this.selectFeature(value);\r\n            }\r\n            else {\r\n                _this.unselectFeature(oldValue);\r\n            }\r\n        });\r\n        state.watch('filteredTrailIds', function (value) {\r\n            // filter trails on the map\r\n        });\r\n        state.watch('device', function () {\r\n            _this.setViewPadding();\r\n        });\r\n        state.watch('currentBasemapId', function (id) {\r\n            _this.setCurrentBasemap(id);\r\n        });\r\n    }\r\n    SceneElement.prototype.setCurrentBasemap = function (id) {\r\n        var basemapGroup = this.view.map.layers.filter(function (layer) {\r\n            return (layer.title === 'Basemap');\r\n        }).getItemAt(0);\r\n        var activeLayer = basemapGroup.layers.filter(function (layer) {\r\n            if (layer.id === id) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }).getItemAt(0);\r\n        activeLayer.visible = true;\r\n    };\r\n    SceneElement.prototype.addEventListeners = function () {\r\n        var _this = this;\r\n        this.view.on(\"click\", function (event) {\r\n            _this.view.hitTest(event).then(function (response) {\r\n                var result = response.results[0];\r\n                if (result.graphic) {\r\n                    if (result.graphic.layer.title === 'Flickr') {\r\n                        _this.showImage(result.graphic, event);\r\n                    }\r\n                    else {\r\n                        if (result.graphic.layer.title === 'Hiking trails') {\r\n                            _this.state.setSelectedTrailId(result.graphic.attributes.RouteId);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    _this.state.setSelectedTrailId(null);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SceneElement.prototype.showImage = function (graphic, event) {\r\n        var _this = this;\r\n        // remove previous image (if any)\r\n        this.removeImage();\r\n        // a new container is created for each image\r\n        var flickrContainer = domConstruct.create('img', {\r\n            src: graphic.symbol.symbolLayers.getItemAt(0).resource.href,\r\n            alt: 'flickr image',\r\n            style: {\r\n                left: event.screenPoint.x - 25 + \"px\",\r\n                top: event.screenPoint.y - 25 + \"px\",\r\n                maxWidth: '50px'\r\n            },\r\n            id: 'flickrImage'\r\n        }, document.body);\r\n        // transition doesn't work without a timeout\r\n        window.setTimeout(function () {\r\n            flickrContainer.style.top = '20%';\r\n            flickrContainer.style.maxWidth = '400px';\r\n        }, 0);\r\n        // once the user interacts with the view the image should disappear\r\n        watchUtils.whenTrueOnce(this.view, 'interacting', function (value) {\r\n            if (value) {\r\n                _this.removeImage();\r\n            }\r\n        });\r\n    };\r\n    SceneElement.prototype.removeImage = function () {\r\n        if (dom.byId('flickrImage')) {\r\n            domConstruct.destroy('flickrImage');\r\n        }\r\n    };\r\n    SceneElement.prototype.initView = function () {\r\n        var webscene = new WebScene({\r\n            portalItem: {\r\n                id: config_1.default.scene.websceneItemId\r\n            }\r\n        });\r\n        return new SceneView({\r\n            container: 'scenePanel',\r\n            map: webscene,\r\n            constraints: {\r\n                tilt: {\r\n                    max: 80,\r\n                    mode: \"manual\"\r\n                }\r\n            },\r\n            qualityProfile: \"high\",\r\n            environment: {\r\n                lighting: {\r\n                    directShadowsEnabled: true,\r\n                    ambientOcclusionEnabled: true\r\n                },\r\n                atmosphereEnabled: true,\r\n                atmosphere: {\r\n                    quality: \"high\"\r\n                },\r\n                starsEnabled: false\r\n            },\r\n            ui: {\r\n                components: ['attribution']\r\n            },\r\n            popup: {\r\n                dockEnabled: false,\r\n                collapsed: true\r\n            }\r\n        });\r\n    };\r\n    SceneElement.prototype.setViewPadding = function () {\r\n        if (this.state.device === 'mobilePortrait') {\r\n            this.view.padding = {\r\n                left: 0\r\n            };\r\n        }\r\n        else {\r\n            this.view.padding = {\r\n                left: 350\r\n            };\r\n        }\r\n    };\r\n    SceneElement.prototype.initTrailsLayer = function () {\r\n        return new FeatureLayer({\r\n            url: config_1.default.data.trailsServiceUrl,\r\n            title: \"Hiking trails\",\r\n            outFields: [\"*\"],\r\n            renderer: utils_1.getTrailRenderer(),\r\n            elevationInfo: {\r\n                mode: 'relative-to-ground',\r\n                offset: 5\r\n            },\r\n            labelsVisible: true,\r\n            labelingInfo: utils_1.getLabelingInfo({ selection: null })\r\n        });\r\n    };\r\n    SceneElement.prototype.selectFeature = function (featureId) {\r\n        // change line symbology for the selected feature\r\n        var renderer = this.trailsLayer.renderer.clone();\r\n        renderer.uniqueValueInfos = utils_1.getUniqueValueInfos({ selection: featureId });\r\n        this.trailsLayer.renderer = renderer;\r\n        // change labeling for the selected feature\r\n        this.trailsLayer.labelingInfo = utils_1.getLabelingInfo({ selection: featureId });\r\n        // get trail geometry to zoom to it\r\n        var selectedTrail = this.state.trails.filter(function (trail) {\r\n            return (trail.id === featureId);\r\n        })[0];\r\n        this.view.goTo({ target: selectedTrail.geometry, tilt: 60 }, { speedFactor: 0.5 });\r\n        selectedTrail.flickrLayer.loadImages();\r\n        this.view.map.add(selectedTrail.flickrLayer);\r\n    };\r\n    SceneElement.prototype.unselectFeature = function (oldId) {\r\n        var renderer = this.trailsLayer.renderer.clone();\r\n        renderer.uniqueValueInfos = [];\r\n        this.trailsLayer.renderer = renderer;\r\n        this.trailsLayer.labelingInfo = utils_1.getLabelingInfo({ selection: null });\r\n        var selectedTrail = this.state.trails.filter(function (trail) {\r\n            return (trail.id === oldId);\r\n        })[0];\r\n        this.view.map.remove(selectedTrail.flickrLayer);\r\n        this.removeImage();\r\n    };\r\n    SceneElement.prototype.queryTrails = function () {\r\n        var layer = this.trailsLayer;\r\n        var query = new Query({\r\n            outFields: [\"*\"],\r\n            where: \"1=1\",\r\n            returnGeometry: true,\r\n            outSpatialReference: {\r\n                wkid: 4326\r\n            }\r\n        });\r\n        return layer.then(function () {\r\n            return layer.queryFeatures(query);\r\n        });\r\n    };\r\n    SceneElement.prototype.getZEnrichedTrails = function () {\r\n        var _this = this;\r\n        var view = this.view;\r\n        return this.queryTrails().then(function (result) {\r\n            _this.trails = result.features;\r\n            // for each feature query the z values of the geometry\r\n            var promises = result.features.map(function (feat) {\r\n                return view.map.ground.queryElevation(feat.geometry)\r\n                    .then(function (response) {\r\n                    feat.geometry = response.geometry;\r\n                    return feat;\r\n                });\r\n            });\r\n            return all(promises);\r\n        });\r\n    };\r\n    return SceneElement;\r\n}());\r\nexports.default = SceneElement;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvc2NlbmUvU2NlbmVFbGVtZW50LnRzPzI0MDciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBK0I7QUFDL0Isc0NBQWlGO0FBRWpGLDBDQUFtRDtBQUNuRCxpQ0FBZ0M7QUFFaEMsc0NBQTBDO0FBQzFDLHdDQUFrRDtBQUNsRCwyQ0FBeUQ7QUFDekQsb0NBQWtEO0FBR2xELGtDQUF3QztBQUN4Qyx3Q0FBMEM7QUFDMUMseUNBQW1EO0FBRW5ELHdCQUFzQztBQUl0QyxVQUFVLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0FBRXRFO0lBT0Usc0JBQVksS0FBWTtRQUF4QixpQkFxQ0M7UUFuQ0Msb0VBQW9FO1FBQ3BFLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBRW5CLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDNUIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBRXRCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFcEMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFFekIsc0RBQXNEO1FBQ2hELE1BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUUvQixLQUFLLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLFVBQUMsS0FBSyxFQUFFLFFBQVE7WUFDN0MsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDVixLQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzVC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QUksQ0FBQztZQUNoQixNQUFNLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTSx5Q0FBa0IsR0FBekI7UUFBQSxpQkFtQkM7UUFqQkMsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUV2QixNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFDLE1BQU07WUFFcEMsS0FBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1lBRTlCLHNEQUFzRDtZQUN0RCxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFDLElBQUk7Z0JBQ3RDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztxQkFDakQsSUFBSSxDQUFDLFVBQUMsUUFBUTtvQkFDYixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUM7b0JBQ2xDLE1BQU0sQ0FBQyxJQUFJLENBQUM7Z0JBQ2QsQ0FBQyxDQUFDLENBQUM7WUFDUCxDQUFDLENBQUMsQ0FBQztZQUVILE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUgsbUJBQUM7QUFBRCxDQUFDIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgeyBnZXRUcmFpbFJlbmRlcmVyLCBnZXRMYWJlbGluZ0luZm8sIGdldFVuaXF1ZVZhbHVlSW5mb3MgfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmltcG9ydCAqIGFzIGRvbUNvbnN0cnVjdCBmcm9tICdkb2pvL2RvbS1jb25zdHJ1Y3QnO1xyXG5pbXBvcnQgKiBhcyBkb20gZnJvbSAnZG9qby9kb20nO1xyXG5cclxuaW1wb3J0ICogYXMgV2ViU2NlbmUgZnJvbSAnZXNyaS9XZWJTY2VuZSc7XHJcbmltcG9ydCAqIGFzIFNjZW5lVmlldyBmcm9tICdlc3JpL3ZpZXdzL1NjZW5lVmlldyc7XHJcbmltcG9ydCAqIGFzIEZlYXR1cmVMYXllciBmcm9tICdlc3JpL2xheWVycy9GZWF0dXJlTGF5ZXInO1xyXG5pbXBvcnQgKiBhcyBRdWVyeSBmcm9tICdlc3JpL3Rhc2tzL3N1cHBvcnQvUXVlcnknO1xyXG5pbXBvcnQgKiBhcyBHcm91cExheWVyIGZyb20gJ2VzcmkvbGF5ZXJzL0dyb3VwTGF5ZXInO1xyXG5pbXBvcnQgKiBhcyBVbmlxdWVWYWx1ZVJlbmRlcmVyIGZyb20gJ2VzcmkvcmVuZGVyZXJzL1VuaXF1ZVZhbHVlUmVuZGVyZXInO1xyXG5pbXBvcnQgKiBhcyBhbGwgZnJvbSAnZG9qby9wcm9taXNlL2FsbCc7XHJcbmltcG9ydCAqIGFzIGVzcmlDb25maWcgZnJvbSAnZXNyaS9jb25maWcnO1xyXG5pbXBvcnQgKiBhcyB3YXRjaFV0aWxzIGZyb20gJ2VzcmkvY29yZS93YXRjaFV0aWxzJztcclxuXHJcbmltcG9ydCAnLi4vLi4vc3R5bGUvc2NlbmUtcGFuZWwuc2Nzcyc7XHJcblxyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmVzcmlDb25maWcucmVxdWVzdC5jb3JzRW5hYmxlZFNlcnZlcnMucHVzaCgnd3RiLm1hcHRpbGVzLmFyY2dpcy5jb20nKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5lRWxlbWVudCB7XHJcblxyXG4gIHZpZXc6IFNjZW5lVmlldztcclxuICB0cmFpbHNMYXllcjogRmVhdHVyZUxheWVyO1xyXG4gIHRyYWlsczogQXJyYXk8YW55PjtcclxuICBzdGF0ZTogU3RhdGU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBTdGF0ZSkge1xyXG5cclxuICAgIC8vIHNldCBzdGF0ZSBvbiB0aGUgc2NlbmUgZWxlbWVudCBhbmQgbGlzdGVuIHRvIGNoYW5nZXMgb24gdGhlIHN0YXRlXHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcblxyXG4gICAgdGhpcy52aWV3ID0gdGhpcy5pbml0VmlldygpO1xyXG4gICAgdGhpcy5zdGF0ZS52aWV3ID0gdGhpcy52aWV3O1xyXG4gICAgdGhpcy5zZXRWaWV3UGFkZGluZygpO1xyXG5cclxuICAgIHRoaXMudHJhaWxzTGF5ZXIgPSB0aGlzLmluaXRUcmFpbHNMYXllcigpO1xyXG4gICAgdGhpcy52aWV3Lm1hcC5hZGQodGhpcy50cmFpbHNMYXllcik7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIC8vYWRkaW5nIHZpZXcgdG8gdGhlIHdpbmRvdyBvbmx5IGZvciBkZWJ1Z2dpbmcgcmVhc29uc1xyXG4gICAgKDxhbnk+d2luZG93KS52aWV3ID0gdGhpcy52aWV3O1xyXG5cclxuICAgIHN0YXRlLndhdGNoKCdzZWxlY3RlZFRyYWlsSWQnLCAodmFsdWUsIG9sZFZhbHVlKSA9PiB7XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RmVhdHVyZSh2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy51bnNlbGVjdEZlYXR1cmUob2xkVmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdGF0ZS53YXRjaCgnZmlsdGVyZWRUcmFpbElkcycsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAvLyBmaWx0ZXIgdHJhaWxzIG9uIHRoZSBtYXBcclxuICAgIH0pO1xyXG5cclxuICAgIHN0YXRlLndhdGNoKCdkZXZpY2UnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0Vmlld1BhZGRpbmcoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN0YXRlLndhdGNoKCdjdXJyZW50QmFzZW1hcElkJywgKGlkKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0Q3VycmVudEJhc2VtYXAoaWQpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0Q3VycmVudEJhc2VtYXAoaWQpIHtcclxuICAgIGxldCBiYXNlbWFwR3JvdXAgPSA8R3JvdXBMYXllcj50aGlzLnZpZXcubWFwLmxheWVycy5maWx0ZXIoKGxheWVyKSA9PiB7XHJcbiAgICAgIHJldHVybiAobGF5ZXIudGl0bGUgPT09ICdCYXNlbWFwJyk7XHJcbiAgICB9KS5nZXRJdGVtQXQoMCk7XHJcblxyXG4gICAgbGV0IGFjdGl2ZUxheWVyID0gYmFzZW1hcEdyb3VwLmxheWVycy5maWx0ZXIoKGxheWVyKSA9PiB7XHJcbiAgICAgIGlmIChsYXllci5pZCA9PT0gaWQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KS5nZXRJdGVtQXQoMCk7XHJcblxyXG4gICAgYWN0aXZlTGF5ZXIudmlzaWJsZSA9IHRydWU7XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMudmlldy5vbihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLnZpZXcuaGl0VGVzdChldmVudCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gcmVzcG9uc2UucmVzdWx0c1swXTtcclxuICAgICAgICBpZiAocmVzdWx0LmdyYXBoaWMpIHtcclxuICAgICAgICAgIGlmIChyZXN1bHQuZ3JhcGhpYy5sYXllci50aXRsZSA9PT0gJ0ZsaWNrcicpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93SW1hZ2UocmVzdWx0LmdyYXBoaWMsIGV2ZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0LmdyYXBoaWMubGF5ZXIudGl0bGUgPT09ICdIaWtpbmcgdHJhaWxzJykge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2V0U2VsZWN0ZWRUcmFpbElkKHJlc3VsdC5ncmFwaGljLmF0dHJpYnV0ZXMuUm91dGVJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnN0YXRlLnNldFNlbGVjdGVkVHJhaWxJZChudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNob3dJbWFnZShncmFwaGljLCBldmVudCkge1xyXG5cclxuICAgIC8vIHJlbW92ZSBwcmV2aW91cyBpbWFnZSAoaWYgYW55KVxyXG4gICAgdGhpcy5yZW1vdmVJbWFnZSgpO1xyXG5cclxuICAgIC8vIGEgbmV3IGNvbnRhaW5lciBpcyBjcmVhdGVkIGZvciBlYWNoIGltYWdlXHJcbiAgICBjb25zdCBmbGlja3JDb250YWluZXIgPSBkb21Db25zdHJ1Y3QuY3JlYXRlKCdpbWcnLCB7XHJcbiAgICAgIHNyYzogZ3JhcGhpYy5zeW1ib2wuc3ltYm9sTGF5ZXJzLmdldEl0ZW1BdCgwKS5yZXNvdXJjZS5ocmVmLFxyXG4gICAgICBhbHQ6ICdmbGlja3IgaW1hZ2UnLFxyXG4gICAgICBzdHlsZToge1xyXG4gICAgICAgIGxlZnQ6IGAke2V2ZW50LnNjcmVlblBvaW50LnggLSAyNX1weGAsXHJcbiAgICAgICAgdG9wOiBgJHtldmVudC5zY3JlZW5Qb2ludC55IC0gMjV9cHhgLFxyXG4gICAgICAgIG1heFdpZHRoOiAnNTBweCdcclxuICAgICAgfSxcclxuICAgICAgaWQ6ICdmbGlja3JJbWFnZSdcclxuICAgIH0sIGRvY3VtZW50LmJvZHkpO1xyXG5cclxuICAgIC8vIHRyYW5zaXRpb24gZG9lc24ndCB3b3JrIHdpdGhvdXQgYSB0aW1lb3V0XHJcbiAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGZsaWNrckNvbnRhaW5lci5zdHlsZS50b3AgPSAnMjAlJztcclxuICAgICAgZmxpY2tyQ29udGFpbmVyLnN0eWxlLm1heFdpZHRoID0gJzQwMHB4JztcclxuICAgIH0sIDApO1xyXG5cclxuICAgIC8vIG9uY2UgdGhlIHVzZXIgaW50ZXJhY3RzIHdpdGggdGhlIHZpZXcgdGhlIGltYWdlIHNob3VsZCBkaXNhcHBlYXJcclxuICAgIHdhdGNoVXRpbHMud2hlblRydWVPbmNlKHRoaXMudmlldywgJ2ludGVyYWN0aW5nJywgKHZhbHVlKSA9PiB7XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSW1hZ2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVJbWFnZSgpIHtcclxuICAgIGlmIChkb20uYnlJZCgnZmxpY2tySW1hZ2UnKSkge1xyXG4gICAgICBkb21Db25zdHJ1Y3QuZGVzdHJveSgnZmxpY2tySW1hZ2UnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdFZpZXcoKSB7XHJcblxyXG4gICAgY29uc3Qgd2Vic2NlbmUgPSBuZXcgV2ViU2NlbmUoe1xyXG4gICAgICBwb3J0YWxJdGVtOiB7XHJcbiAgICAgICAgaWQ6IGNvbmZpZy5zY2VuZS53ZWJzY2VuZUl0ZW1JZFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFNjZW5lVmlldyh7XHJcbiAgICAgIGNvbnRhaW5lcjogJ3NjZW5lUGFuZWwnLFxyXG4gICAgICBtYXA6IHdlYnNjZW5lLFxyXG4gICAgICBjb25zdHJhaW50czoge1xyXG4gICAgICAgIHRpbHQ6IHtcclxuICAgICAgICAgIG1heDogODAsXHJcbiAgICAgICAgICBtb2RlOiBcIm1hbnVhbFwiXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBxdWFsaXR5UHJvZmlsZTogXCJoaWdoXCIsXHJcbiAgICAgIGVudmlyb25tZW50OiB7XHJcbiAgICAgICAgbGlnaHRpbmc6IHtcclxuICAgICAgICAgIGRpcmVjdFNoYWRvd3NFbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgYW1iaWVudE9jY2x1c2lvbkVuYWJsZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGF0bW9zcGhlcmVFbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIGF0bW9zcGhlcmU6IHtcclxuICAgICAgICAgIHF1YWxpdHk6IFwiaGlnaFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdGFyc0VuYWJsZWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIHVpOiB7XHJcbiAgICAgICAgY29tcG9uZW50czogWydhdHRyaWJ1dGlvbiddXHJcbiAgICAgIH0sXHJcbiAgICAgIHBvcHVwOiB7XHJcbiAgICAgICAgZG9ja0VuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgIGNvbGxhcHNlZDogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFZpZXdQYWRkaW5nKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUuZGV2aWNlID09PSAnbW9iaWxlUG9ydHJhaXQnKSB7XHJcbiAgICAgIHRoaXMudmlldy5wYWRkaW5nID0ge1xyXG4gICAgICAgIGxlZnQ6IDBcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMudmlldy5wYWRkaW5nID0ge1xyXG4gICAgICAgIGxlZnQ6IDM1MFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRUcmFpbHNMYXllcigpIHtcclxuICAgIHJldHVybiBuZXcgRmVhdHVyZUxheWVyKHtcclxuICAgICAgdXJsOiBjb25maWcuZGF0YS50cmFpbHNTZXJ2aWNlVXJsLFxyXG4gICAgICB0aXRsZTogXCJIaWtpbmcgdHJhaWxzXCIsXHJcbiAgICAgIG91dEZpZWxkczogW1wiKlwiXSxcclxuICAgICAgcmVuZGVyZXI6IGdldFRyYWlsUmVuZGVyZXIoKSxcclxuICAgICAgZWxldmF0aW9uSW5mbzoge1xyXG4gICAgICAgIG1vZGU6ICdyZWxhdGl2ZS10by1ncm91bmQnLFxyXG4gICAgICAgIG9mZnNldDogNVxyXG4gICAgICB9LFxyXG4gICAgICBsYWJlbHNWaXNpYmxlOiB0cnVlLFxyXG4gICAgICBsYWJlbGluZ0luZm86IGdldExhYmVsaW5nSW5mbyh7IHNlbGVjdGlvbjogbnVsbCB9KVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNlbGVjdEZlYXR1cmUoZmVhdHVyZUlkKTp2b2lkIHtcclxuXHJcbiAgICAvLyBjaGFuZ2UgbGluZSBzeW1ib2xvZ3kgZm9yIHRoZSBzZWxlY3RlZCBmZWF0dXJlXHJcbiAgICBsZXQgcmVuZGVyZXIgPSAoPFVuaXF1ZVZhbHVlUmVuZGVyZXI+IHRoaXMudHJhaWxzTGF5ZXIucmVuZGVyZXIpLmNsb25lKCk7XHJcbiAgICByZW5kZXJlci51bmlxdWVWYWx1ZUluZm9zID0gZ2V0VW5pcXVlVmFsdWVJbmZvcyh7IHNlbGVjdGlvbjogZmVhdHVyZUlkIH0pO1xyXG4gICAgdGhpcy50cmFpbHNMYXllci5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cclxuICAgIC8vIGNoYW5nZSBsYWJlbGluZyBmb3IgdGhlIHNlbGVjdGVkIGZlYXR1cmVcclxuICAgIHRoaXMudHJhaWxzTGF5ZXIubGFiZWxpbmdJbmZvID0gZ2V0TGFiZWxpbmdJbmZvKHsgc2VsZWN0aW9uOiBmZWF0dXJlSWQgfSk7XHJcblxyXG4gICAgLy8gZ2V0IHRyYWlsIGdlb21ldHJ5IHRvIHpvb20gdG8gaXRcclxuICAgIGNvbnN0IHNlbGVjdGVkVHJhaWwgPSB0aGlzLnN0YXRlLnRyYWlscy5maWx0ZXIoKHRyYWlsKSA9PiB7XHJcbiAgICAgIHJldHVybiAodHJhaWwuaWQgPT09IGZlYXR1cmVJZCk7XHJcbiAgICB9KVswXTtcclxuXHJcbiAgICB0aGlzLnZpZXcuZ29UbyhcclxuICAgICAge3RhcmdldDogc2VsZWN0ZWRUcmFpbC5nZW9tZXRyeSwgdGlsdDogNjB9LFxyXG4gICAgICB7c3BlZWRGYWN0b3I6IDAuNX1cclxuICAgICk7XHJcblxyXG4gICAgc2VsZWN0ZWRUcmFpbC5mbGlja3JMYXllci5sb2FkSW1hZ2VzKCk7XHJcbiAgICB0aGlzLnZpZXcubWFwLmFkZChzZWxlY3RlZFRyYWlsLmZsaWNrckxheWVyKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdW5zZWxlY3RGZWF0dXJlKG9sZElkKTp2b2lkIHtcclxuICAgIGxldCByZW5kZXJlciA9ICg8VW5pcXVlVmFsdWVSZW5kZXJlcj4gdGhpcy50cmFpbHNMYXllci5yZW5kZXJlcikuY2xvbmUoKTtcclxuICAgIHJlbmRlcmVyLnVuaXF1ZVZhbHVlSW5mb3MgPSBbXTtcclxuICAgIHRoaXMudHJhaWxzTGF5ZXIucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMudHJhaWxzTGF5ZXIubGFiZWxpbmdJbmZvID0gZ2V0TGFiZWxpbmdJbmZvKHsgc2VsZWN0aW9uOiBudWxsIH0pO1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRUcmFpbCA9IHRoaXMuc3RhdGUudHJhaWxzLmZpbHRlcigodHJhaWwpID0+IHtcclxuICAgICAgcmV0dXJuICh0cmFpbC5pZCA9PT0gb2xkSWQpO1xyXG4gICAgfSlbMF07XHJcblxyXG4gICAgdGhpcy52aWV3Lm1hcC5yZW1vdmUoc2VsZWN0ZWRUcmFpbC5mbGlja3JMYXllcik7XHJcbiAgICB0aGlzLnJlbW92ZUltYWdlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcXVlcnlUcmFpbHMoKTpJUHJvbWlzZSB7XHJcbiAgICBjb25zdCBsYXllcjpGZWF0dXJlTGF5ZXIgPSB0aGlzLnRyYWlsc0xheWVyO1xyXG4gICAgY29uc3QgcXVlcnkgPSBuZXcgUXVlcnkoe1xyXG4gICAgICBvdXRGaWVsZHM6IFtcIipcIl0sXHJcbiAgICAgIHdoZXJlOiBcIjE9MVwiLFxyXG4gICAgICByZXR1cm5HZW9tZXRyeTogdHJ1ZSxcclxuICAgICAgb3V0U3BhdGlhbFJlZmVyZW5jZToge1xyXG4gICAgICAgIHdraWQ6IDQzMjZcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbGF5ZXIudGhlbigoKSA9PiB7XHJcbiAgICAgIHJldHVybiBsYXllci5xdWVyeUZlYXR1cmVzKHF1ZXJ5KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFpFbnJpY2hlZFRyYWlscygpOklQcm9taXNlIHtcclxuXHJcbiAgICBjb25zdCB2aWV3ID0gdGhpcy52aWV3O1xyXG5cclxuICAgIHJldHVybiB0aGlzLnF1ZXJ5VHJhaWxzKCkudGhlbigocmVzdWx0KSA9PiB7XHJcblxyXG4gICAgICB0aGlzLnRyYWlscyA9IHJlc3VsdC5mZWF0dXJlcztcclxuXHJcbiAgICAgIC8vIGZvciBlYWNoIGZlYXR1cmUgcXVlcnkgdGhlIHogdmFsdWVzIG9mIHRoZSBnZW9tZXRyeVxyXG4gICAgICBsZXQgcHJvbWlzZXMgPSByZXN1bHQuZmVhdHVyZXMubWFwKChmZWF0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHZpZXcubWFwLmdyb3VuZC5xdWVyeUVsZXZhdGlvbihmZWF0Lmdlb21ldHJ5KVxyXG4gICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGZlYXQuZ2VvbWV0cnkgPSByZXNwb25zZS5nZW9tZXRyeTtcclxuICAgICAgICAgICAgcmV0dXJuIGZlYXQ7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gYWxsKHByb21pc2VzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RzL3NjZW5lL1NjZW5lRWxlbWVudC50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = __webpack_require__(0);\r\nvar UniqueValueRenderer = __webpack_require__(16);\r\nvar LineSymbol3D = __webpack_require__(17);\r\nvar LineSymbol3DLayer = __webpack_require__(18);\r\nvar LabelSymbol3D = __webpack_require__(19);\r\nvar LabelClass = __webpack_require__(20);\r\nvar TextSymbol3DLayer = __webpack_require__(21);\r\nfunction getTrailRenderer() {\r\n    return new UniqueValueRenderer({\r\n        field: config_1.default.data.trailAttributes.id,\r\n        defaultSymbol: createTrailSymbol({\r\n            selection: null\r\n        }),\r\n        uniqueValueInfos: []\r\n    });\r\n}\r\nexports.getTrailRenderer = getTrailRenderer;\r\n// function for creating symbols for trails when they are selected or not\r\nfunction createTrailSymbol(options) {\r\n    var color = options.selection ? config_1.default.colors.selectedTrail : config_1.default.colors.defaultTrail;\r\n    var size = options.selection ? 4 : 2;\r\n    return new LineSymbol3D({\r\n        symbolLayers: [\r\n            new LineSymbol3DLayer({\r\n                material: {\r\n                    color: color\r\n                },\r\n                size: size\r\n            })\r\n        ]\r\n    });\r\n}\r\nfunction getUniqueValueInfos(options) {\r\n    if (options.selection) {\r\n        return [{\r\n                value: options.selection,\r\n                symbol: createTrailSymbol(options)\r\n            }];\r\n    }\r\n}\r\nexports.getUniqueValueInfos = getUniqueValueInfos;\r\nfunction getLabelingInfo(options) {\r\n    if (options.selection) {\r\n        return [\r\n            createLabelClass(options),\r\n            createLabelClass({})\r\n        ];\r\n    }\r\n    else {\r\n        return [\r\n            createLabelClass({})\r\n        ];\r\n    }\r\n}\r\nexports.getLabelingInfo = getLabelingInfo;\r\nfunction createLabelClass(options) {\r\n    var color = (options.selection) ? config_1.default.colors.selectedTrail : config_1.default.colors.defaultTrail;\r\n    var labelClass = new LabelClass({\r\n        symbol: new LabelSymbol3D({\r\n            symbolLayers: [new TextSymbol3DLayer({\r\n                    material: {\r\n                        color: \"white\"\r\n                    },\r\n                    halo: {\r\n                        color: color,\r\n                        size: 1\r\n                    },\r\n                    font: {\r\n                        family: 'Open Sans Condensed',\r\n                        weight: 'bold'\r\n                    },\r\n                    size: 13\r\n                })],\r\n            verticalOffset: {\r\n                screenLength: 80,\r\n                maxWorldLength: 3000,\r\n                minWorldLength: 200\r\n            },\r\n            callout: {\r\n                type: \"line\",\r\n                size: 2,\r\n                color: \"white\",\r\n                border: {\r\n                    color: color\r\n                }\r\n            }\r\n        }),\r\n        labelPlacement: \"above-center\",\r\n        labelExpressionInfo: {\r\n            expression: \"$feature.\" + config_1.default.data.trailAttributes.name\r\n        }\r\n    });\r\n    if (options.selection) {\r\n        labelClass.where = config_1.default.data.trailAttributes.id + \" = \" + options.selection;\r\n    }\r\n    return labelClass;\r\n}\r\nexports.createLabelClass = createLabelClass;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvc2NlbmUvdXRpbHMudHM/NzYyZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUErQjtBQUMvQixrREFBMEU7QUFDMUUsMkNBQTBEO0FBQzFELGdEQUFvRTtBQUNwRSw0Q0FBNEQ7QUFDNUQseUNBQTZEO0FBQzdELGdEQUFvRTtBQUVwRTtJQUNFLE1BQU0sQ0FBQyxJQUFJLG1CQUFtQixDQUFDO1FBQzdCLEtBQUssRUFBRSxnQkFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRTtRQUNyQyxhQUFhLEVBQUUsaUJBQWlCLENBQUM7WUFDL0IsU0FBUyxFQUFFLElBQUk7U0FDaEIsQ0FBQztRQUNGLGdCQUFnQixFQUFFLEVBQUU7S0FDckIsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQVJELDRDQVFDO0FBRUQseUVBQXlFO0FBQ3pFLDJCQUEyQixPQUFPO0lBRWhDLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLGdCQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsZ0JBQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO0lBQzNGLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRXZDLE1BQU0sQ0FBQyxJQUFJLFlBQVksQ0FBQztRQUN0QixZQUFZLEVBQUU7WUFDWixJQUFJLGlCQUFpQixDQUFDO2dCQUNwQixRQUFRLEVBQUU7b0JBQ1IsS0FBSyxFQUFFLEtBQUs7aUJBQ2I7Z0JBQ0QsSUFBSSxFQUFFLElBQUk7YUFDWCxDQUFDO1NBQ0g7S0FDRixDQUFDLENBQUM7QUFFTCxDQUFDO0FBRUQsNkJBQW9DLE9BQU87SUFDekMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsTUFBTSxDQUFDLENBQUM7Z0JBQ04sS0FBSyxFQUFFLE9BQU8sQ0FBQyxTQUFTO2dCQUN4QixNQUFNLEVBQUUsaUJBQWlCLENBQUMsT0FBTyxDQUFDO2FBQ25DLENBQUM7SUFDSixDQUFDO0FBQ0gsQ0FBQztBQVBELGtEQU9DO0FBRUQseUJBQWdDLE9BQU87SUFDckMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsTUFBTSxDQUFDO1lBQ0wsZ0JBQWdCLENBQUMsT0FBTyxDQUFDO1lBQ3pCLGdCQUFnQixDQUFDLEVBQUUsQ0FBQztTQUNyQjtJQUNILENBQUM7SUFDRCxJQUFJLENBQUMsQ0FBQztRQUNKLE1BQU0sQ0FBQztZQUNMLGdCQUFnQixDQUFDLEVBQUUsQ0FBQztTQUNyQjtJQUNILENBQUM7QUFDSCxDQUFDO0FBWkQsMENBWUM7QUFFRCwwQkFBaUMsT0FBTztJQUV0QyxJQUFNLEtBQUssR0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxnQkFBTSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFFN0YsSUFBSSxVQUFVLEdBQUcsSUFBSSxVQUFVLENBQUM7UUFDOUIsTUFBTSxFQUFFLElBQUksYUFBYSxDQUFDO1lBQ3hCLFlBQVksRUFBRSxDQUFDLElBQUksaUJBQWlCLENBQUM7b0JBQ25DLFFBQVEsRUFBRTt3QkFDUixLQUFLLEVBQUUsT0FBTztxQkFDZjtvQkFDRCxJQUFJLEVBQUU7d0JBQ0osS0FBSyxFQUFFLEtBQUs7d0JBQ1osSUFBSSxFQUFFLENBQUM7cUJBQ1I7b0JBQ0QsSUFBSSxFQUFFO3dCQUNKLE1BQU0sRUFBRSxxQkFBcUI7d0JBQzdCLE1BQU0sRUFBRSxNQUFNO3FCQUNmO29CQUNELElBQUksRUFBRSxFQUFFO2lCQUNULENBQUMsQ0FBQztZQUNILGNBQWMsRUFBRTtnQkFDZCxZQUFZLEVBQUUsRUFBRTtnQkFDaEIsY0FBYyxFQUFFLElBQUk7Z0JBQ3BCLGNBQWMsRUFBRSxHQUFHO2FBQ3BCO1lBQ0QsT0FBTyxFQUFFO2dCQUNQLElBQUksRUFBRSxNQUFNO2dCQUNaLElBQUksRUFBRSxDQUFDO2dCQUNQLEtBQUssRUFBRSxPQUFPO2dCQUNkLE1BQU0sRUFBRTtvQkFDTixLQUFLLEVBQUUsS0FBSztpQkFDYjthQUNGO1NBQ0YsQ0FBQztRQUNGLGNBQWMsRUFBRSxjQUFjO1FBQzlCLG1CQUFtQixFQUFFO1lBQ25CLFVBQVUsRUFBRSxjQUFZLGdCQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFNO1NBQzNEO0tBQ0YsQ0FBQyxDQUFDO0lBQ0gsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsVUFBVSxDQUFDLEtBQUssR0FBTSxnQkFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRSxXQUFNLE9BQU8sQ0FBQyxTQUFXO0lBQy9FLENBQUM7SUFFRCxNQUFNLENBQUMsVUFBVSxDQUFDO0FBQ3BCLENBQUM7QUE1Q0QsNENBNENDIiwiZmlsZSI6IjE1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgKiBhcyBVbmlxdWVWYWx1ZVJlbmRlcmVyIGZyb20gJ2VzcmkvcmVuZGVyZXJzL1VuaXF1ZVZhbHVlUmVuZGVyZXInO1xyXG5pbXBvcnQgKiBhcyBMaW5lU3ltYm9sM0QgZnJvbSAnZXNyaS9zeW1ib2xzL0xpbmVTeW1ib2wzRCc7XHJcbmltcG9ydCAqIGFzIExpbmVTeW1ib2wzRExheWVyIGZyb20gJ2Vzcmkvc3ltYm9scy9MaW5lU3ltYm9sM0RMYXllcic7XHJcbmltcG9ydCAqIGFzIExhYmVsU3ltYm9sM0QgZnJvbSAnZXNyaS9zeW1ib2xzL0xhYmVsU3ltYm9sM0QnO1xyXG5pbXBvcnQgKiBhcyBMYWJlbENsYXNzIGZyb20gJ2VzcmkvbGF5ZXJzL3N1cHBvcnQvTGFiZWxDbGFzcyc7XHJcbmltcG9ydCAqIGFzIFRleHRTeW1ib2wzRExheWVyIGZyb20gJ2Vzcmkvc3ltYm9scy9UZXh0U3ltYm9sM0RMYXllcic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhaWxSZW5kZXJlcigpOlVuaXF1ZVZhbHVlUmVuZGVyZXIge1xyXG4gIHJldHVybiBuZXcgVW5pcXVlVmFsdWVSZW5kZXJlcih7XHJcbiAgICBmaWVsZDogY29uZmlnLmRhdGEudHJhaWxBdHRyaWJ1dGVzLmlkLFxyXG4gICAgZGVmYXVsdFN5bWJvbDogY3JlYXRlVHJhaWxTeW1ib2woe1xyXG4gICAgICBzZWxlY3Rpb246IG51bGxcclxuICAgIH0pLFxyXG4gICAgdW5pcXVlVmFsdWVJbmZvczogW11cclxuICB9KTtcclxufVxyXG5cclxuLy8gZnVuY3Rpb24gZm9yIGNyZWF0aW5nIHN5bWJvbHMgZm9yIHRyYWlscyB3aGVuIHRoZXkgYXJlIHNlbGVjdGVkIG9yIG5vdFxyXG5mdW5jdGlvbiBjcmVhdGVUcmFpbFN5bWJvbChvcHRpb25zKSB7XHJcblxyXG4gIGNvbnN0IGNvbG9yID0gb3B0aW9ucy5zZWxlY3Rpb24gPyBjb25maWcuY29sb3JzLnNlbGVjdGVkVHJhaWwgOiBjb25maWcuY29sb3JzLmRlZmF1bHRUcmFpbDtcclxuICBjb25zdCBzaXplID0gb3B0aW9ucy5zZWxlY3Rpb24gPyA0IDogMjtcclxuXHJcbiAgcmV0dXJuIG5ldyBMaW5lU3ltYm9sM0Qoe1xyXG4gICAgc3ltYm9sTGF5ZXJzOiBbXHJcbiAgICAgIG5ldyBMaW5lU3ltYm9sM0RMYXllcih7XHJcbiAgICAgICAgbWF0ZXJpYWw6IHtcclxuICAgICAgICAgIGNvbG9yOiBjb2xvclxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2l6ZTogc2l6ZVxyXG4gICAgICB9KVxyXG4gICAgXVxyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXF1ZVZhbHVlSW5mb3Mob3B0aW9ucykge1xyXG4gIGlmIChvcHRpb25zLnNlbGVjdGlvbikge1xyXG4gICAgcmV0dXJuIFt7XHJcbiAgICAgIHZhbHVlOiBvcHRpb25zLnNlbGVjdGlvbixcclxuICAgICAgc3ltYm9sOiBjcmVhdGVUcmFpbFN5bWJvbChvcHRpb25zKVxyXG4gICAgfV1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMYWJlbGluZ0luZm8ob3B0aW9ucykge1xyXG4gIGlmIChvcHRpb25zLnNlbGVjdGlvbikge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgY3JlYXRlTGFiZWxDbGFzcyhvcHRpb25zKSxcclxuICAgICAgY3JlYXRlTGFiZWxDbGFzcyh7fSlcclxuICAgIF1cclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBjcmVhdGVMYWJlbENsYXNzKHt9KVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxhYmVsQ2xhc3Mob3B0aW9ucykge1xyXG5cclxuICBjb25zdCBjb2xvciA9IChvcHRpb25zLnNlbGVjdGlvbikgPyBjb25maWcuY29sb3JzLnNlbGVjdGVkVHJhaWwgOiBjb25maWcuY29sb3JzLmRlZmF1bHRUcmFpbDtcclxuXHJcbiAgbGV0IGxhYmVsQ2xhc3MgPSBuZXcgTGFiZWxDbGFzcyh7XHJcbiAgICBzeW1ib2w6IG5ldyBMYWJlbFN5bWJvbDNEKHtcclxuICAgICAgc3ltYm9sTGF5ZXJzOiBbbmV3IFRleHRTeW1ib2wzRExheWVyKHtcclxuICAgICAgICBtYXRlcmlhbDoge1xyXG4gICAgICAgICAgY29sb3I6IFwid2hpdGVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFsbzoge1xyXG4gICAgICAgICAgY29sb3I6IGNvbG9yLFxyXG4gICAgICAgICAgc2l6ZTogMVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZm9udDoge1xyXG4gICAgICAgICAgZmFtaWx5OiAnT3BlbiBTYW5zIENvbmRlbnNlZCcsXHJcbiAgICAgICAgICB3ZWlnaHQ6ICdib2xkJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2l6ZTogMTNcclxuICAgICAgfSldLFxyXG4gICAgICB2ZXJ0aWNhbE9mZnNldDoge1xyXG4gICAgICAgIHNjcmVlbkxlbmd0aDogODAsXHJcbiAgICAgICAgbWF4V29ybGRMZW5ndGg6IDMwMDAsXHJcbiAgICAgICAgbWluV29ybGRMZW5ndGg6IDIwMFxyXG4gICAgICB9LFxyXG4gICAgICBjYWxsb3V0OiB7XHJcbiAgICAgICAgdHlwZTogXCJsaW5lXCIsXHJcbiAgICAgICAgc2l6ZTogMixcclxuICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxyXG4gICAgICAgIGJvcmRlcjoge1xyXG4gICAgICAgICAgY29sb3I6IGNvbG9yXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KSxcclxuICAgIGxhYmVsUGxhY2VtZW50OiBcImFib3ZlLWNlbnRlclwiLFxyXG4gICAgbGFiZWxFeHByZXNzaW9uSW5mbzoge1xyXG4gICAgICBleHByZXNzaW9uOiBgJGZlYXR1cmUuJHtjb25maWcuZGF0YS50cmFpbEF0dHJpYnV0ZXMubmFtZX1gXHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgaWYgKG9wdGlvbnMuc2VsZWN0aW9uKSB7XHJcbiAgICBsYWJlbENsYXNzLndoZXJlID0gYCR7Y29uZmlnLmRhdGEudHJhaWxBdHRyaWJ1dGVzLmlkfSA9ICR7b3B0aW9ucy5zZWxlY3Rpb259YFxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGxhYmVsQ2xhc3M7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RzL3NjZW5lL3V0aWxzLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_16__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3JlbmRlcmVycy9VbmlxdWVWYWx1ZVJlbmRlcmVyXCI/YTU2NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxNi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xNl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZXNyaS9yZW5kZXJlcnMvVW5pcXVlVmFsdWVSZW5kZXJlclwiXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_17__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvTGluZVN5bWJvbDNEXCI/YWJkMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xN19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZXNyaS9zeW1ib2xzL0xpbmVTeW1ib2wzRFwiXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///17\n");

/***/ }),
/* 18 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_18__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvTGluZVN5bWJvbDNETGF5ZXJcIj85ZDFkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjE4LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE4X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvTGluZVN5bWJvbDNETGF5ZXJcIlxuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///18\n");

/***/ }),
/* 19 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_19__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvTGFiZWxTeW1ib2wzRFwiP2U4Y2YiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTlfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImVzcmkvc3ltYm9scy9MYWJlbFN5bWJvbDNEXCJcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n");

/***/ }),
/* 20 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_20__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2xheWVycy9zdXBwb3J0L0xhYmVsQ2xhc3NcIj81YTZkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzIwX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL2xheWVycy9zdXBwb3J0L0xhYmVsQ2xhc3NcIlxuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///20\n");

/***/ }),
/* 21 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_21__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvVGV4dFN5bWJvbDNETGF5ZXJcIj9iZjcwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzIxX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvVGV4dFN5bWJvbDNETGF5ZXJcIlxuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///21\n");

/***/ }),
/* 22 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_22__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3ZpZXdzL1NjZW5lVmlld1wiPzliYTAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMjJfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImVzcmkvdmlld3MvU2NlbmVWaWV3XCJcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///22\n");

/***/ }),
/* 23 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_23__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2xheWVycy9GZWF0dXJlTGF5ZXJcIj9mZGVmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzIzX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL2xheWVycy9GZWF0dXJlTGF5ZXJcIlxuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///23\n");

/***/ }),
/* 24 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_24__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3Rhc2tzL3N1cHBvcnQvUXVlcnlcIj9mNDBmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzI0X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL3Rhc2tzL3N1cHBvcnQvUXVlcnlcIlxuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///24\n");

/***/ }),
/* 25 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_25__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJkb2pvL3Byb21pc2UvYWxsXCI/ZGJhYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIyNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yNV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZG9qby9wcm9taXNlL2FsbFwiXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///25\n");

/***/ }),
/* 26 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_26__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2NvcmUvd2F0Y2hVdGlsc1wiP2I5YTEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMjZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImVzcmkvY29yZS93YXRjaFV0aWxzXCJcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///26\n");

/***/ }),
/* 27 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvc2NlbmUtcGFuZWwuc2Nzcz8wNzBkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9zdHlsZS9zY2VuZS1wYW5lbC5zY3NzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///27\n");

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dom = __webpack_require__(1);\r\nvar on = __webpack_require__(3);\r\n__webpack_require__(29);\r\nvar LoadingPage = /** @class */ (function () {\r\n    function LoadingPage(state) {\r\n        var _this = this;\r\n        this.container = dom.byId('starterPage');\r\n        this.state = state;\r\n        state.watch('displayLoading', function (value) {\r\n            if (!value) {\r\n                _this.container.style.display = 'none';\r\n            }\r\n            else {\r\n                _this.container.style.display = 'table';\r\n            }\r\n        });\r\n        on(dom.byId('showMap'), 'click', function () {\r\n            state.displayLoading = false;\r\n        });\r\n    }\r\n    return LoadingPage;\r\n}());\r\nexports.default = LoadingPage;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvdWkvTG9hZGluZ1BhZ2UudHM/NDBlYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlDQUFnQztBQUNoQyxnQ0FBOEI7QUFFOUIsd0JBQXVDO0FBR3ZDO0lBS0UscUJBQVksS0FBSztRQUFqQixpQkFpQkM7UUFoQkMsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBRW5CLEtBQUssQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsVUFBQyxLQUFLO1lBQ2xDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDWCxLQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQ3hDLENBQUM7WUFDRCxJQUFJLENBQUMsQ0FBQztnQkFDSixLQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1lBQ3pDLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUdILEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLE9BQU8sRUFBRTtZQUMvQixLQUFLLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztRQUMvQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDSCxrQkFBQztBQUFELENBQUMiLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBkb20gZnJvbSAnZG9qby9kb20nO1xyXG5pbXBvcnQgKiBhcyBvbiBmcm9tICdkb2pvL29uJztcclxuXHJcbmltcG9ydCAnLi4vLi4vc3R5bGUvbG9hZGluZy1wYWdlLnNjc3MnO1xyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvYWRpbmdQYWdlIHtcclxuXHJcbiAgY29udGFpbmVyO1xyXG4gIHN0YXRlOiBTdGF0ZTtcclxuXHJcbiAgY29uc3RydWN0b3Ioc3RhdGUpIHtcclxuICAgIHRoaXMuY29udGFpbmVyID0gZG9tLmJ5SWQoJ3N0YXJ0ZXJQYWdlJyk7XHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcblxyXG4gICAgc3RhdGUud2F0Y2goJ2Rpc3BsYXlMb2FkaW5nJywgKHZhbHVlKSA9PiB7XHJcbiAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAndGFibGUnO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgb24oZG9tLmJ5SWQoJ3Nob3dNYXAnKSwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBzdGF0ZS5kaXNwbGF5TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RzL3VpL0xvYWRpbmdQYWdlLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///28\n");

/***/ }),
/* 29 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvbG9hZGluZy1wYWdlLnNjc3M/MmRkYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIyOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc3R5bGUvbG9hZGluZy1wYWdlLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///29\n");

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = __webpack_require__(0);\r\nvar Polyline = __webpack_require__(31);\r\nvar geometryEngine = __webpack_require__(32);\r\nvar FlickrLayer_1 = __webpack_require__(33);\r\nvar Trail = /** @class */ (function () {\r\n    function Trail(feature) {\r\n        this.geometry = feature.geometry;\r\n        // add attribute data based on the mapping in the configuration file\r\n        var attributeMap = config_1.default.data.trailAttributes;\r\n        for (var prop in attributeMap) {\r\n            this[prop] = feature.attributes[attributeMap[prop]];\r\n        }\r\n        this.profileData = this.getAltitudeProfileData(feature.geometry);\r\n        this.flickrLayer = new FlickrLayer_1.default(this.geometry.extent);\r\n    }\r\n    Trail.prototype.getAltitudeProfileData = function (geometry) {\r\n        var points = [];\r\n        var totalLength = 0;\r\n        var path = geometry.paths[0];\r\n        var i = 0, j;\r\n        points.push({ point: path[0], length: totalLength, value: Math.round(path[0][2]) });\r\n        while (i < path.length) {\r\n            for (j = i + 1; j < path.length; j++) {\r\n                var tempLine = new Polyline({\r\n                    paths: [path.slice(i, j + 1)],\r\n                    hasZ: true,\r\n                    spatialReference: { wkid: 4326 }\r\n                });\r\n                var length_1 = geometryEngine.geodesicLength(tempLine, \"meters\");\r\n                if (length_1 > 10) {\r\n                    totalLength += length_1;\r\n                    points.push({ point: path[j], length: Math.round(totalLength / 100) / 10, value: Math.round(path[i][2]) });\r\n                    break;\r\n                }\r\n            }\r\n            i = j;\r\n        }\r\n        return points;\r\n    };\r\n    return Trail;\r\n}());\r\nexports.default = Trail;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvZGF0YS9UcmFpbC50cz9jMDQzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQStCO0FBQy9CLHVDQUFtRDtBQUNuRCw2Q0FBK0Q7QUFFL0QsNENBQStDO0FBRS9DO0lBTUUsZUFBWSxPQUFPO1FBRWpCLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUVqQyxvRUFBb0U7UUFDcEUsSUFBTSxZQUFZLEdBQUcsZ0JBQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDO1FBQ2pELEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDdEQsQ0FBQztRQUVELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVqRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUkscUJBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFTyxzQ0FBc0IsR0FBOUIsVUFBK0IsUUFBaUI7UUFFOUMsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFNLElBQUksR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFYixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztRQUVsRixPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDdkIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFFbkMsSUFBSSxRQUFRLEdBQUcsSUFBSSxRQUFRLENBQUM7b0JBQzFCLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFDN0IsSUFBSSxFQUFFLElBQUk7b0JBQ1YsZ0JBQWdCLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO2lCQUNqQyxDQUFDLENBQUM7Z0JBRUgsSUFBTSxRQUFNLEdBQUcsY0FBYyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBRWpFLEVBQUUsQ0FBQyxDQUFDLFFBQU0sR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUNoQixXQUFXLElBQUksUUFBTSxDQUFDO29CQUN0QixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEdBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztvQkFDdkcsS0FBSyxDQUFDO2dCQUNSLENBQUM7WUFDSCxDQUFDO1lBQ0QsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNSLENBQUM7UUFDRixNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2YsQ0FBQztJQUVILFlBQUM7QUFBRCxDQUFDIiwiZmlsZSI6IjMwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgKiBhcyBQb2x5bGluZSBmcm9tICdlc3JpL2dlb21ldHJ5L1BvbHlsaW5lJztcclxuaW1wb3J0ICogYXMgZ2VvbWV0cnlFbmdpbmUgZnJvbSAnZXNyaS9nZW9tZXRyeS9nZW9tZXRyeUVuZ2luZSc7XHJcblxyXG5pbXBvcnQgRmxpY2tyTGF5ZXIgZnJvbSAnLi4vc2NlbmUvRmxpY2tyTGF5ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJhaWwge1xyXG5cclxuICBnZW9tZXRyeTogUG9seWxpbmU7XHJcbiAgcHJvZmlsZURhdGE6IEFycmF5PGFueT47XHJcbiAgZmxpY2tyTGF5ZXI6IEZsaWNrckxheWVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihmZWF0dXJlKSB7XHJcblxyXG4gICAgdGhpcy5nZW9tZXRyeSA9IGZlYXR1cmUuZ2VvbWV0cnk7XHJcblxyXG4gICAgLy8gYWRkIGF0dHJpYnV0ZSBkYXRhIGJhc2VkIG9uIHRoZSBtYXBwaW5nIGluIHRoZSBjb25maWd1cmF0aW9uIGZpbGVcclxuICAgIGNvbnN0IGF0dHJpYnV0ZU1hcCA9IGNvbmZpZy5kYXRhLnRyYWlsQXR0cmlidXRlcztcclxuICAgIGZvciAobGV0IHByb3AgaW4gYXR0cmlidXRlTWFwKSB7XHJcbiAgICAgIHRoaXNbcHJvcF0gPSBmZWF0dXJlLmF0dHJpYnV0ZXNbYXR0cmlidXRlTWFwW3Byb3BdXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnByb2ZpbGVEYXRhID0gdGhpcy5nZXRBbHRpdHVkZVByb2ZpbGVEYXRhKGZlYXR1cmUuZ2VvbWV0cnkpO1xyXG5cclxuICAgIHRoaXMuZmxpY2tyTGF5ZXIgPSBuZXcgRmxpY2tyTGF5ZXIodGhpcy5nZW9tZXRyeS5leHRlbnQpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRBbHRpdHVkZVByb2ZpbGVEYXRhKGdlb21ldHJ5OlBvbHlsaW5lKTpBcnJheTxhbnk+IHtcclxuXHJcbiAgICBsZXQgcG9pbnRzID0gW107XHJcbiAgICBsZXQgdG90YWxMZW5ndGggPSAwO1xyXG4gICAgY29uc3QgcGF0aCA9IGdlb21ldHJ5LnBhdGhzWzBdO1xyXG4gICAgbGV0IGkgPSAwLCBqO1xyXG5cclxuICAgIHBvaW50cy5wdXNoKHtwb2ludDogcGF0aFswXSwgbGVuZ3RoOiB0b3RhbExlbmd0aCwgdmFsdWU6IE1hdGgucm91bmQocGF0aFswXVsyXSl9KTtcclxuXHJcbiAgICB3aGlsZSAoaSA8IHBhdGgubGVuZ3RoKSB7XHJcbiAgICAgIGZvciAoaiA9IGkrMTsgaiA8IHBhdGgubGVuZ3RoOyBqKyspIHtcclxuXHJcbiAgICAgICAgbGV0IHRlbXBMaW5lID0gbmV3IFBvbHlsaW5lKHtcclxuICAgICAgICAgIHBhdGhzOiBbcGF0aC5zbGljZShpLCBqICsgMSldLFxyXG4gICAgICAgICAgaGFzWjogdHJ1ZSxcclxuICAgICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IHsgd2tpZDogNDMyNiB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IGdlb21ldHJ5RW5naW5lLmdlb2Rlc2ljTGVuZ3RoKHRlbXBMaW5lLCBcIm1ldGVyc1wiKTtcclxuXHJcbiAgICAgICAgaWYgKGxlbmd0aCA+IDEwKSB7XHJcbiAgICAgICAgICB0b3RhbExlbmd0aCArPSBsZW5ndGg7XHJcbiAgICAgICAgICBwb2ludHMucHVzaCh7cG9pbnQ6IHBhdGhbal0sIGxlbmd0aDogTWF0aC5yb3VuZCh0b3RhbExlbmd0aC8xMDApIC8gMTAsIHZhbHVlOiBNYXRoLnJvdW5kKHBhdGhbaV1bMl0pfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaSA9IGo7XHJcbiAgICB9XHJcbiAgIHJldHVybiBwb2ludHM7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHMvZGF0YS9UcmFpbC50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///30\n");

/***/ }),
/* 31 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_31__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2dlb21ldHJ5L1BvbHlsaW5lXCI/YzczMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIzMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zMV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZXNyaS9nZW9tZXRyeS9Qb2x5bGluZVwiXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///31\n");

/***/ }),
/* 32 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_32__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2dlb21ldHJ5L2dlb21ldHJ5RW5naW5lXCI/ODM4OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIzMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zMl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZXNyaS9nZW9tZXRyeS9nZW9tZXRyeUVuZ2luZVwiXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///32\n");

/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar esriConfig = __webpack_require__(5);\r\nvar esriRequest = __webpack_require__(34);\r\nvar GraphicsLayer = __webpack_require__(35);\r\nvar Point = __webpack_require__(36);\r\nvar Graphic = __webpack_require__(37);\r\nvar PointSymbol3D = __webpack_require__(38);\r\nvar IconSymbol3DLayer = __webpack_require__(39);\r\nfunction setImage(index, photos, layer) {\r\n    var photo = photos[index];\r\n    esriRequest(\"https://api.flickr.com/services/rest/?\\n    method=flickr.photos.geo.getLocation&\\n    api_key=d2eeadac35a3dfc3fb64a92e7c792de0&\\n    photo_id=\" + photo.getAttribute('id'), { responseType: 'xml' })\r\n        .then(function (response) {\r\n        var location = response.data.getElementsByTagName('location')[0];\r\n        var imgUrl = \"https://farm\" + photo.getAttribute('farm') + \".staticflickr.com/\" + photo.getAttribute('server') + \"/\" + photo.getAttribute('id') + \"_\" + photo.getAttribute('secret') + \".jpg\";\r\n        var billboard = new PointSymbol3D({\r\n            symbolLayers: [new IconSymbol3DLayer({\r\n                    size: 50,\r\n                    resource: { href: imgUrl },\r\n                    outline: {\r\n                        color: 'white',\r\n                        size: '5px'\r\n                    }\r\n                })],\r\n            verticalOffset: {\r\n                screenLength: 50,\r\n                maxWorldLength: 3000,\r\n                minWorldLength: 20\r\n            },\r\n            callout: {\r\n                type: \"line\",\r\n                size: 2,\r\n                color: \"white\"\r\n            }\r\n        });\r\n        var point = new Point({\r\n            latitude: location.getAttribute(\"latitude\"),\r\n            longitude: location.getAttribute(\"longitude\")\r\n        });\r\n        var graphic = new Graphic({\r\n            geometry: point,\r\n            symbol: billboard\r\n        });\r\n        layer.add(graphic);\r\n        if (index < photos.length) {\r\n            index++;\r\n            setImage(index, photos, layer);\r\n        }\r\n    });\r\n}\r\nvar FlickrLayer = /** @class */ (function (_super) {\r\n    __extends(FlickrLayer, _super);\r\n    function FlickrLayer(extent) {\r\n        var _this = _super.call(this, {\r\n            minScale: 70000,\r\n            maxScale: 1000,\r\n            elevationInfo: {\r\n                mode: 'relative-to-scene'\r\n            },\r\n            title: 'Flickr'\r\n        }) || this;\r\n        _this.imagesLoaded = false;\r\n        esriConfig.request.corsEnabledServers.push('https://api.flickr.com/');\r\n        for (var i = 1; i <= 9; i++) {\r\n            esriConfig.request.corsEnabledServers.push(\"https://farm\" + i + \".staticflickr.com/\");\r\n        }\r\n        var url = \"https://api.flickr.com/services/rest/?\\n      method=flickr.photos.search&api_key=d2eeadac35a3dfc3fb64a92e7c792de0&privacy_filter=1&accuracy=16\\n      &has_geo=true\\n      &bbox=\" + extent.xmin + \",\" + extent.ymin + \",\" + extent.xmax + \",\" + extent.ymax + \"\\n      &per_page=250\\n      &license=1,2,3,4,5,6,7,8,9\";\r\n        esriRequest(url, { responseType: 'xml' })\r\n            .then(function (response) {\r\n            _this.photoList = response.data.getElementsByTagName('photo');\r\n        });\r\n        return _this;\r\n    }\r\n    FlickrLayer.prototype.loadImages = function () {\r\n        if (this.imagesLoaded) {\r\n            return;\r\n        }\r\n        else {\r\n            setImage(0, this.photoList, this);\r\n        }\r\n        this.imagesLoaded = true;\r\n    };\r\n    return FlickrLayer;\r\n}(GraphicsLayer));\r\nexports.default = FlickrLayer;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvc2NlbmUvRmxpY2tyTGF5ZXIudHM/MWFjMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSx3Q0FBMEM7QUFDMUMsMENBQTRDO0FBRTVDLDRDQUEyRDtBQUMzRCxvQ0FBNkM7QUFDN0Msc0NBQXdDO0FBRXhDLDRDQUE0RDtBQUM1RCxnREFBb0U7QUFJcEUsa0JBQWtCLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSztJQUNwQyxJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDMUIsV0FBVyxDQUFDLG9KQUdDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFHLEVBQ3JDLEVBQUMsWUFBWSxFQUFFLEtBQUssRUFBQyxDQUFDO1NBQ25CLElBQUksQ0FBQyxVQUFDLFFBQVE7UUFFYixJQUFJLFFBQVEsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWpFLElBQUksTUFBTSxHQUFHLGlCQUFlLEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLDBCQUFxQixLQUFLLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxTQUFJLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFNBQUksS0FBSyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsU0FBTSxDQUFDO1FBRTFLLElBQUksU0FBUyxHQUFHLElBQUksYUFBYSxDQUFDO1lBQ2hDLFlBQVksRUFBRSxDQUFDLElBQUksaUJBQWlCLENBQUM7b0JBQ25DLElBQUksRUFBRSxFQUFFO29CQUNSLFFBQVEsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7b0JBQzFCLE9BQU8sRUFBRTt3QkFDUCxLQUFLLEVBQUUsT0FBTzt3QkFDZCxJQUFJLEVBQUUsS0FBSztxQkFDWjtpQkFDRixDQUFDLENBQUM7WUFDSCxjQUFjLEVBQUU7Z0JBQ2QsWUFBWSxFQUFFLEVBQUU7Z0JBQ2hCLGNBQWMsRUFBRSxJQUFJO2dCQUNwQixjQUFjLEVBQUUsRUFBRTthQUNuQjtZQUNELE9BQU8sRUFBRTtnQkFDUCxJQUFJLEVBQUUsTUFBTTtnQkFDWixJQUFJLEVBQUUsQ0FBQztnQkFDUCxLQUFLLEVBQUUsT0FBTzthQUNmO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUM7WUFDcEIsUUFBUSxFQUFFLFFBQVEsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1lBQzNDLFNBQVMsRUFBRSxRQUFRLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQztTQUM5QyxDQUFDLENBQUM7UUFFSCxJQUFJLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQztZQUN4QixRQUFRLEVBQUUsS0FBSztZQUNmLE1BQU0sRUFBRSxTQUFTO1NBQ2xCLENBQUMsQ0FBQztRQUVILEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFbkIsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzFCLEtBQUssRUFBRSxDQUFDO1lBQ1IsUUFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDakMsQ0FBQztJQUNILENBQUMsQ0FBQyxDQUFDO0FBQ1QsQ0FBQztBQUVEO0lBQXlDLCtCQUFhO0lBS3BELHFCQUFZLE1BQU07UUFBbEIsWUFDRSxrQkFBTTtZQUNKLFFBQVEsRUFBRSxLQUFLO1lBQ2YsUUFBUSxFQUFFLElBQUk7WUFDZCxhQUFhLEVBQUU7Z0JBQ2IsSUFBSSxFQUFFLG1CQUFtQjthQUMxQjtZQUNELEtBQUssRUFBRSxRQUFRO1NBQ2hCLENBQUMsU0FvQkQ7UUE5Qkgsa0JBQVksR0FBWSxLQUFLLENBQUM7UUFhNUIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FBQztRQUV0RSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQzVCLFVBQVUsQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLGlCQUFlLENBQUMsdUJBQW9CLENBQUMsQ0FBQztRQUNuRixDQUFDO1FBRUQsSUFBSSxHQUFHLEdBQUcsdUxBR0EsTUFBTSxDQUFDLElBQUksU0FBSSxNQUFNLENBQUMsSUFBSSxTQUFJLE1BQU0sQ0FBQyxJQUFJLFNBQUksTUFBTSxDQUFDLElBQUksNERBRXJDLENBQUM7UUFFOUIsV0FBVyxDQUFDLEdBQUcsRUFBRSxFQUFDLFlBQVksRUFBRSxLQUFLLEVBQUMsQ0FBQzthQUNwQyxJQUFJLENBQUMsVUFBQyxRQUFRO1lBQ2IsS0FBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9ELENBQUMsQ0FBQyxDQUFDOztJQUNMLENBQUM7SUFFTSxnQ0FBVSxHQUFqQjtRQUNFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLE1BQU0sQ0FBQztRQUNULENBQUM7UUFDRCxJQUFJLENBQUMsQ0FBQztZQUNKLFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNwQyxDQUFDO1FBQ0QsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7SUFDM0IsQ0FBQztJQUNMLGtCQUFDO0FBQUQsQ0FBQyxDQTVDd0MsYUFBYSxHQTRDckQiLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBlc3JpQ29uZmlnIGZyb20gJ2VzcmkvY29uZmlnJztcclxuaW1wb3J0ICogYXMgZXNyaVJlcXVlc3QgZnJvbSAnZXNyaS9yZXF1ZXN0JztcclxuXHJcbmltcG9ydCAqIGFzIEdyYXBoaWNzTGF5ZXIgZnJvbSAnZXNyaS9sYXllcnMvR3JhcGhpY3NMYXllcic7XHJcbmltcG9ydCAqIGFzIFBvaW50IGZyb20gJ2VzcmkvZ2VvbWV0cnkvUG9pbnQnO1xyXG5pbXBvcnQgKiBhcyBHcmFwaGljIGZyb20gJ2VzcmkvR3JhcGhpYyc7XHJcblxyXG5pbXBvcnQgKiBhcyBQb2ludFN5bWJvbDNEIGZyb20gJ2Vzcmkvc3ltYm9scy9Qb2ludFN5bWJvbDNEJztcclxuaW1wb3J0ICogYXMgSWNvblN5bWJvbDNETGF5ZXIgZnJvbSAnZXNyaS9zeW1ib2xzL0ljb25TeW1ib2wzRExheWVyJztcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gc2V0SW1hZ2UoaW5kZXgsIHBob3RvcywgbGF5ZXIpIHtcclxuICB2YXIgcGhvdG8gPSBwaG90b3NbaW5kZXhdO1xyXG4gIGVzcmlSZXF1ZXN0KGBodHRwczovL2FwaS5mbGlja3IuY29tL3NlcnZpY2VzL3Jlc3QvP1xyXG4gICAgbWV0aG9kPWZsaWNrci5waG90b3MuZ2VvLmdldExvY2F0aW9uJlxyXG4gICAgYXBpX2tleT1kMmVlYWRhYzM1YTNkZmMzZmI2NGE5MmU3Yzc5MmRlMCZcclxuICAgIHBob3RvX2lkPSR7cGhvdG8uZ2V0QXR0cmlidXRlKCdpZCcpfWAsXHJcbiAgICB7cmVzcG9uc2VUeXBlOiAneG1sJ30pXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG5cclxuICAgICAgICBsZXQgbG9jYXRpb24gPSByZXNwb25zZS5kYXRhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsb2NhdGlvbicpWzBdO1xyXG5cclxuICAgICAgICBsZXQgaW1nVXJsID0gYGh0dHBzOi8vZmFybSR7cGhvdG8uZ2V0QXR0cmlidXRlKCdmYXJtJyl9LnN0YXRpY2ZsaWNrci5jb20vJHtwaG90by5nZXRBdHRyaWJ1dGUoJ3NlcnZlcicpfS8ke3Bob3RvLmdldEF0dHJpYnV0ZSgnaWQnKX1fJHtwaG90by5nZXRBdHRyaWJ1dGUoJ3NlY3JldCcpfS5qcGdgO1xyXG5cclxuICAgICAgICBsZXQgYmlsbGJvYXJkID0gbmV3IFBvaW50U3ltYm9sM0Qoe1xyXG4gICAgICAgICAgc3ltYm9sTGF5ZXJzOiBbbmV3IEljb25TeW1ib2wzRExheWVyKHtcclxuICAgICAgICAgICAgc2l6ZTogNTAsXHJcbiAgICAgICAgICAgIHJlc291cmNlOiB7IGhyZWY6IGltZ1VybCB9LFxyXG4gICAgICAgICAgICBvdXRsaW5lOiB7XHJcbiAgICAgICAgICAgICAgY29sb3I6ICd3aGl0ZScsXHJcbiAgICAgICAgICAgICAgc2l6ZTogJzVweCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSldLFxyXG4gICAgICAgICAgdmVydGljYWxPZmZzZXQ6IHtcclxuICAgICAgICAgICAgc2NyZWVuTGVuZ3RoOiA1MCxcclxuICAgICAgICAgICAgbWF4V29ybGRMZW5ndGg6IDMwMDAsXHJcbiAgICAgICAgICAgIG1pbldvcmxkTGVuZ3RoOiAyMFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNhbGxvdXQ6IHtcclxuICAgICAgICAgICAgdHlwZTogXCJsaW5lXCIsXHJcbiAgICAgICAgICAgIHNpemU6IDIsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcIndoaXRlXCJcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHBvaW50ID0gbmV3IFBvaW50KHtcclxuICAgICAgICAgIGxhdGl0dWRlOiBsb2NhdGlvbi5nZXRBdHRyaWJ1dGUoXCJsYXRpdHVkZVwiKSxcclxuICAgICAgICAgIGxvbmdpdHVkZTogbG9jYXRpb24uZ2V0QXR0cmlidXRlKFwibG9uZ2l0dWRlXCIpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBncmFwaGljID0gbmV3IEdyYXBoaWMoe1xyXG4gICAgICAgICAgZ2VvbWV0cnk6IHBvaW50LFxyXG4gICAgICAgICAgc3ltYm9sOiBiaWxsYm9hcmRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGF5ZXIuYWRkKGdyYXBoaWMpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPCBwaG90b3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgc2V0SW1hZ2UoaW5kZXgsIHBob3RvcywgbGF5ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsaWNrckxheWVyIGV4dGVuZHMgR3JhcGhpY3NMYXllciB7XHJcblxyXG4gIHBob3RvTGlzdDogYW55O1xyXG4gIGltYWdlc0xvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihleHRlbnQpIHtcclxuICAgIHN1cGVyKHtcclxuICAgICAgbWluU2NhbGU6IDcwMDAwLFxyXG4gICAgICBtYXhTY2FsZTogMTAwMCxcclxuICAgICAgZWxldmF0aW9uSW5mbzoge1xyXG4gICAgICAgIG1vZGU6ICdyZWxhdGl2ZS10by1zY2VuZSdcclxuICAgICAgfSxcclxuICAgICAgdGl0bGU6ICdGbGlja3InXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZXNyaUNvbmZpZy5yZXF1ZXN0LmNvcnNFbmFibGVkU2VydmVycy5wdXNoKCdodHRwczovL2FwaS5mbGlja3IuY29tLycpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDk7IGkrKykge1xyXG4gICAgICBlc3JpQ29uZmlnLnJlcXVlc3QuY29yc0VuYWJsZWRTZXJ2ZXJzLnB1c2goYGh0dHBzOi8vZmFybSR7aX0uc3RhdGljZmxpY2tyLmNvbS9gKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdXJsID0gYGh0dHBzOi8vYXBpLmZsaWNrci5jb20vc2VydmljZXMvcmVzdC8/XHJcbiAgICAgIG1ldGhvZD1mbGlja3IucGhvdG9zLnNlYXJjaCZhcGlfa2V5PWQyZWVhZGFjMzVhM2RmYzNmYjY0YTkyZTdjNzkyZGUwJnByaXZhY3lfZmlsdGVyPTEmYWNjdXJhY3k9MTZcclxuICAgICAgJmhhc19nZW89dHJ1ZVxyXG4gICAgICAmYmJveD0ke2V4dGVudC54bWlufSwke2V4dGVudC55bWlufSwke2V4dGVudC54bWF4fSwke2V4dGVudC55bWF4fVxyXG4gICAgICAmcGVyX3BhZ2U9MjUwXHJcbiAgICAgICZsaWNlbnNlPTEsMiwzLDQsNSw2LDcsOCw5YDtcclxuXHJcbiAgICBlc3JpUmVxdWVzdCh1cmwsIHtyZXNwb25zZVR5cGU6ICd4bWwnfSlcclxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5waG90b0xpc3QgPSByZXNwb25zZS5kYXRhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwaG90bycpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9hZEltYWdlcygpIHtcclxuICAgICAgaWYgKHRoaXMuaW1hZ2VzTG9hZGVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNldEltYWdlKDAsIHRoaXMucGhvdG9MaXN0LCB0aGlzKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmltYWdlc0xvYWRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RzL3NjZW5lL0ZsaWNrckxheWVyLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///33\n");

/***/ }),
/* 34 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_34__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3JlcXVlc3RcIj8xODFlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjM0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzM0X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL3JlcXVlc3RcIlxuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///34\n");

/***/ }),
/* 35 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_35__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2xheWVycy9HcmFwaGljc0xheWVyXCI/M2M0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIzNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zNV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZXNyaS9sYXllcnMvR3JhcGhpY3NMYXllclwiXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///35\n");

/***/ }),
/* 36 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_36__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL2dlb21ldHJ5L1BvaW50XCI/NWQ0YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIzNi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zNl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZXNyaS9nZW9tZXRyeS9Qb2ludFwiXG4vLyBtb2R1bGUgaWQgPSAzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///36\n");

/***/ }),
/* 37 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_37__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL0dyYXBoaWNcIj81NDFhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjM3LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzM3X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL0dyYXBoaWNcIlxuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///37\n");

/***/ }),
/* 38 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_38__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvUG9pbnRTeW1ib2wzRFwiPzJlYjgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMzguanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMzhfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImVzcmkvc3ltYm9scy9Qb2ludFN5bWJvbDNEXCJcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///38\n");

/***/ }),
/* 39 */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_39__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvSWNvblN5bWJvbDNETGF5ZXJcIj8wNmY5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjM5LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzM5X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJlc3JpL3N5bWJvbHMvSWNvblN5bWJvbDNETGF5ZXJcIlxuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///39\n");

/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar on = __webpack_require__(3);\r\nvar DetailPanel_1 = __webpack_require__(41);\r\nvar SelectionPanel_1 = __webpack_require__(44);\r\nvar BasemapPanel_1 = __webpack_require__(48);\r\nvar WebScene = __webpack_require__(4);\r\n__webpack_require__(50);\r\nvar MenuPanel = /** @class */ (function () {\r\n    function MenuPanel(trails, state) {\r\n        var _this = this;\r\n        this.state = state;\r\n        this.container = document.querySelector('.menuPanel');\r\n        var selectionPanel = new SelectionPanel_1.default(trails, state);\r\n        var detailPanel = new DetailPanel_1.default(trails, state);\r\n        var basemapPanel = new BasemapPanel_1.default(state);\r\n        var panels = {\r\n            selectionPanel: selectionPanel,\r\n            detailPanel: detailPanel,\r\n            basemapPanel: basemapPanel\r\n        };\r\n        this.initVisiblePanel(panels);\r\n        state.watch('visiblePanel', function (newPanel, oldPanel) {\r\n            // activate the selected panel (newPanel)\r\n            document.querySelector(\"[data-tab='\" + newPanel + \"']\").classList.add('active');\r\n            panels[newPanel].container.style.display = 'block';\r\n            // deactivate the old active panel (oldPanel)\r\n            document.querySelector(\"[data-tab='\" + oldPanel + \"']\").classList.remove('active');\r\n            panels[oldPanel].container.style.display = 'none';\r\n        });\r\n        on(document.querySelector('.menuTabs'), 'click', function (evt) {\r\n            _this.state.visiblePanel = evt.target.dataset.tab;\r\n        });\r\n        // this class also takes care of the mobile menu\r\n        on(document.querySelector('#home'), 'click', function (evt) {\r\n            console.log(_this.state.view);\r\n            var view = _this.state.view;\r\n            if (view.map instanceof WebScene) {\r\n                view.goTo(view.map.initialViewProperties.viewpoint);\r\n                _this.state.selectedTrailId = null;\r\n            }\r\n        });\r\n        state.watch('device', function () {\r\n            if (_this.state.device === 'mobilePortrait') {\r\n                _this.state.visiblePanel = 'detailPanel';\r\n                if (!_this.state.selectedTrailId) {\r\n                    _this.container.style.display = 'none';\r\n                }\r\n                else {\r\n                    _this.container.style.display = 'flex';\r\n                }\r\n            }\r\n            else {\r\n                _this.container.style.display = 'flex';\r\n            }\r\n        });\r\n        state.watch('selectedTrailId', function () {\r\n            if (_this.state.device === 'mobilePortrait') {\r\n                if (_this.state.selectedTrailId) {\r\n                    _this.container.style.display = 'flex';\r\n                }\r\n                else {\r\n                    _this.container.style.display = 'none';\r\n                }\r\n            }\r\n        });\r\n        on(document.querySelector('#details'), 'click', function (evt) {\r\n            var displayValue = _this.container.style.display;\r\n            console.log(displayValue);\r\n            _this.container.style.display = (displayValue === 'none' || displayValue === '') ? 'flex' : 'none';\r\n        });\r\n    }\r\n    MenuPanel.prototype.initVisiblePanel = function (panels) {\r\n        if (this.state.device === 'mobilePortrait') {\r\n            this.state.visiblePanel = 'detailPanel';\r\n        }\r\n        else {\r\n            this.state.visiblePanel = 'selectionPanel';\r\n        }\r\n        panels[this.state.visiblePanel].container.style.display = 'block';\r\n    };\r\n    return MenuPanel;\r\n}());\r\nexports.default = MenuPanel;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvdWkvTWVudVBhbmVsLnRzPzBmMTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxnQ0FBOEI7QUFDOUIsNENBQXdDO0FBQ3hDLCtDQUE4QztBQUM5Qyw2Q0FBMEM7QUFHMUMsc0NBQTBDO0FBRTFDLHdCQUFxQztBQUVyQztJQUtFLG1CQUFZLE1BQU0sRUFBRSxLQUFZO1FBQWhDLGlCQTBFQztRQXhFQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsU0FBUyxHQUFnQixRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRW5FLElBQUksY0FBYyxHQUFHLElBQUksd0JBQWMsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDdkQsSUFBSSxXQUFXLEdBQUcsSUFBSSxxQkFBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNqRCxJQUFJLFlBQVksR0FBRyxJQUFJLHNCQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFM0MsSUFBSSxNQUFNLEdBQUc7WUFDWCxjQUFjO1lBQ2QsV0FBVztZQUNYLFlBQVk7U0FDYjtRQUVELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU5QixLQUFLLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxVQUFDLFFBQVEsRUFBRSxRQUFRO1lBRTdDLHlDQUF5QztZQUN6QyxRQUFRLENBQUMsYUFBYSxDQUFDLGdCQUFjLFFBQVEsT0FBSSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzRSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1lBRW5ELDZDQUE2QztZQUM3QyxRQUFRLENBQUMsYUFBYSxDQUFDLGdCQUFjLFFBQVEsT0FBSSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxR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LENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBQyxDQUFDLE1BQU0sQ0FBQztRQUNuRyxDQUFDLENBQUMsQ0FBQztJQUVMLENBQUM7SUFFTyxvQ0FBZ0IsR0FBeEIsVUFBeUIsTUFBTTtRQUM3QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsYUFBYSxDQUFDO1FBQzFDLENBQUM7UUFDRCxJQUFJLENBQUMsQ0FBQztZQUNKLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLGdCQUFnQixDQUFDO1FBQzdDLENBQUM7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDcEUsQ0FBQztJQUNILGdCQUFDO0FBQUQsQ0FBQyIsImZpbGUiOiI0MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgKiBhcyBvbiBmcm9tICdkb2pvL29uJztcclxuaW1wb3J0IERldGFpbFBhbmVsIGZyb20gJy4vRGV0YWlsUGFuZWwnO1xyXG5pbXBvcnQgU2VsZWN0aW9uUGFuZWwgZnJvbSAnLi9TZWxlY3Rpb25QYW5lbCc7XHJcbmltcG9ydCBCYXNlbWFwUGFuZWwgZnJvbSAnLi9CYXNlbWFwUGFuZWwnO1xyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0ICogYXMgU2NlbmVWaWV3IGZyb20gJ2Vzcmkvdmlld3MvU2NlbmVWaWV3JztcclxuaW1wb3J0ICogYXMgV2ViU2NlbmUgZnJvbSAnZXNyaS9XZWJTY2VuZSc7XHJcblxyXG5pbXBvcnQgJy4uLy4uL3N0eWxlL21lbnUtcGFuZWwuc2Nzcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZW51UGFuZWwge1xyXG5cclxuICBzdGF0ZTogU3RhdGU7XHJcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IodHJhaWxzLCBzdGF0ZTogU3RhdGUpIHtcclxuXHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudVBhbmVsJyk7XHJcblxyXG4gICAgbGV0IHNlbGVjdGlvblBhbmVsID0gbmV3IFNlbGVjdGlvblBhbmVsKHRyYWlscywgc3RhdGUpO1xyXG4gICAgbGV0IGRldGFpbFBhbmVsID0gbmV3IERldGFpbFBhbmVsKHRyYWlscywgc3RhdGUpO1xyXG4gICAgbGV0IGJhc2VtYXBQYW5lbCA9IG5ldyBCYXNlbWFwUGFuZWwoc3RhdGUpO1xyXG5cclxuICAgIGxldCBwYW5lbHMgPSB7XHJcbiAgICAgIHNlbGVjdGlvblBhbmVsLFxyXG4gICAgICBkZXRhaWxQYW5lbCxcclxuICAgICAgYmFzZW1hcFBhbmVsXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0VmlzaWJsZVBhbmVsKHBhbmVscyk7XHJcblxyXG4gICAgc3RhdGUud2F0Y2goJ3Zpc2libGVQYW5lbCcsIChuZXdQYW5lbCwgb2xkUGFuZWwpID0+IHtcclxuXHJcbiAgICAgIC8vIGFjdGl2YXRlIHRoZSBzZWxlY3RlZCBwYW5lbCAobmV3UGFuZWwpXHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYj0nJHtuZXdQYW5lbH0nXWApLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICBwYW5lbHNbbmV3UGFuZWxdLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgICAgIC8vIGRlYWN0aXZhdGUgdGhlIG9sZCBhY3RpdmUgcGFuZWwgKG9sZFBhbmVsKVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YWI9JyR7b2xkUGFuZWx9J11gKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgcGFuZWxzW29sZFBhbmVsXS5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH0pO1xyXG5cclxuICAgIG9uKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51VGFicycpLCAnY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuc3RhdGUudmlzaWJsZVBhbmVsID0gZXZ0LnRhcmdldC5kYXRhc2V0LnRhYjtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIHRoaXMgY2xhc3MgYWxzbyB0YWtlcyBjYXJlIG9mIHRoZSBtb2JpbGUgbWVudVxyXG4gICAgb24oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hvbWUnKSwgJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLnZpZXcpO1xyXG4gICAgICBsZXQgdmlldyA9IHRoaXMuc3RhdGUudmlldztcclxuICAgICAgaWYgKHZpZXcubWFwIGluc3RhbmNlb2YgV2ViU2NlbmUpIHtcclxuICAgICAgICB2aWV3LmdvVG8odmlldy5tYXAuaW5pdGlhbFZpZXdQcm9wZXJ0aWVzLnZpZXdwb2ludCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZFRyYWlsSWQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdGF0ZS53YXRjaCgnZGV2aWNlJywgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5zdGF0ZS5kZXZpY2UgPT09ICdtb2JpbGVQb3J0cmFpdCcpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLnZpc2libGVQYW5lbCA9ICdkZXRhaWxQYW5lbCc7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5zZWxlY3RlZFRyYWlsSWQpIHtcclxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdGF0ZS53YXRjaCgnc2VsZWN0ZWRUcmFpbElkJywgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5zdGF0ZS5kZXZpY2UgPT09ICdtb2JpbGVQb3J0cmFpdCcpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RlZFRyYWlsSWQpIHtcclxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIG9uKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXRhaWxzJyksICdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgbGV0IGRpc3BsYXlWYWx1ZSA9IHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRpc3BsYXlWYWx1ZSk7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAoZGlzcGxheVZhbHVlID09PSAnbm9uZScgfHwgZGlzcGxheVZhbHVlID09PSAnJykgPyAnZmxleCc6ICdub25lJztcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdFZpc2libGVQYW5lbChwYW5lbHMpIHtcclxuICAgIGlmICh0aGlzLnN0YXRlLmRldmljZSA9PT0gJ21vYmlsZVBvcnRyYWl0Jykge1xyXG4gICAgICB0aGlzLnN0YXRlLnZpc2libGVQYW5lbCA9ICdkZXRhaWxQYW5lbCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5zdGF0ZS52aXNpYmxlUGFuZWwgPSAnc2VsZWN0aW9uUGFuZWwnO1xyXG4gICAgfVxyXG4gICAgcGFuZWxzW3RoaXMuc3RhdGUudmlzaWJsZVBhbmVsXS5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90cy91aS9NZW51UGFuZWwudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///40\n");

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dom = __webpack_require__(1);\r\nvar domConstruct = __webpack_require__(2);\r\nvar config_1 = __webpack_require__(0);\r\n__webpack_require__(42);\r\n__webpack_require__(43);\r\nvar SelectionPanel = /** @class */ (function () {\r\n    function SelectionPanel(trails, state) {\r\n        var _this = this;\r\n        this.state = state;\r\n        this.trails = trails;\r\n        this.container = dom.byId('detailPanel');\r\n        this.detailTitle = dom.byId(\"detailTitle\");\r\n        this.detailInfograph = dom.byId(\"detailInfograph\");\r\n        this.detailDescription = dom.byId(\"detailDescription\");\r\n        this.detailElevationProfile = dom.byId('detailElevationProfile');\r\n        this.emptyDetails();\r\n        state.watch('selectedTrailId', function (id) {\r\n            if (id) {\r\n                var selectedTrail = _this.trails.filter(function (trail) { return trail.id === id; })[0];\r\n                _this.displayInfo(selectedTrail);\r\n            }\r\n            else {\r\n                _this.emptyDetails();\r\n            }\r\n        });\r\n        state.watch('device', function () {\r\n            if (!_this.state.selectedTrailId) {\r\n                _this.displayAppInfo();\r\n            }\r\n        });\r\n    }\r\n    SelectionPanel.prototype.emptyDetails = function () {\r\n        domConstruct.empty(this.detailTitle);\r\n        domConstruct.empty(this.detailDescription);\r\n        domConstruct.empty(this.detailInfograph);\r\n        domConstruct.empty(this.detailElevationProfile);\r\n        this.displayAppInfo();\r\n    };\r\n    SelectionPanel.prototype.displayAppInfo = function () {\r\n        if (this.state.device === 'mobilePortrait') {\r\n            this.detailInfograph.innerHTML = 'This app shows the hikes in the Swiss National Park. Select a hike on the map to find out more about it.';\r\n        }\r\n        else {\r\n            this.detailInfograph.innerHTML = 'Select a hike in the map or in the Hikes panel to see more details about it.';\r\n        }\r\n    };\r\n    SelectionPanel.prototype.displayInfo = function (trail) {\r\n        // create title\r\n        this.detailTitle.innerHTML = trail.name;\r\n        // create infograph\r\n        this.createInfograph(trail);\r\n        // create the description container\r\n        this.detailDescription.innerHTML = trail.description;\r\n        // create the elevation profile\r\n        this.createChart(trail.profileData);\r\n    };\r\n    SelectionPanel.prototype.createInfograph = function (trail) {\r\n        var status = [{\r\n                icon: 'fa fa-calendar-times-o',\r\n                text: 'Closed'\r\n            }, {\r\n                icon: 'fa fa-calendar-check-o',\r\n                text: 'Open'\r\n            }];\r\n        this.detailInfograph.innerHTML = \"\\n      <span class='infograph'><span class='fa fa-line-chart' aria-hidden='true'></span> \" + trail.ascent + \" m</span>\\n      <span class='infograph'><span class='fa fa-wrench' aria-hidden='true'></span> \" + trail.difficulty + \"</span>\\n      <span class='infograph'><span class='fa fa-clock-o' aria-hidden='true'></span> \" + trail.walktime + \" hr</span>\\n      <span class='infograph'><span class='\" + status[trail.status].icon + \"' aria-hidden='true'></span> \" + status[trail.status].text + \"</span>\\n    \";\r\n    };\r\n    SelectionPanel.prototype.createChart = function (data) {\r\n        var chart = AmCharts.makeChart(this.detailElevationProfile, {\r\n            type: 'serial',\r\n            theme: 'light',\r\n            dataProvider: data,\r\n            color: '#4b4b4b',\r\n            fontFamily: 'Open Sans Condensed',\r\n            balloon: {\r\n                borderAlpha: 0,\r\n                fillAlpha: 0.8,\r\n                fillColor: config_1.default.colors.selectedTrail,\r\n                shadowAlpha: 0\r\n            },\r\n            graphs: [{\r\n                    id: \"g1\",\r\n                    balloonText: \"Distance: <b>[[category]] km</b><br>Elevation:<b>[[value]] m</b>\",\r\n                    fillAlphas: 0.2,\r\n                    bulletAlpha: 0,\r\n                    lineColor: config_1.default.colors.selectedTrail,\r\n                    lineThickness: 1,\r\n                    valueField: \"value\"\r\n                }],\r\n            chartCursor: {\r\n                limitToGraph: \"g1\",\r\n                categoryBalloonEnabled: false,\r\n                zoomable: false\r\n            },\r\n            categoryField: \"length\",\r\n            categoryAxis: {\r\n                gridThickness: 0,\r\n                axisThickness: 0.1,\r\n            },\r\n            valueAxes: [{\r\n                    strictMinMax: true,\r\n                    autoGridCount: false,\r\n                    minimum: 1000,\r\n                    maximum: 3500,\r\n                    axisThickness: 0,\r\n                    tickLength: 0,\r\n                }]\r\n        });\r\n        var popup = this.state.view.popup;\r\n        chart.addListener('changed', function (e) {\r\n            if (e.index) {\r\n                var data = e.chart.dataProvider[e.index];\r\n                popup.dockEnabled = false;\r\n                popup.open({\r\n                    title: data.value + \" m\",\r\n                    location: {\r\n                        spatialReference: { wkid: 4326 },\r\n                        longitude: data.point[0],\r\n                        latitude: data.point[1],\r\n                        z: data.point[2],\r\n                        type: 'point'\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                popup.close();\r\n            }\r\n        });\r\n    };\r\n    return SelectionPanel;\r\n}());\r\nexports.default = SelectionPanel;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvdWkvRGV0YWlsUGFuZWwudHM/YjczNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLGlDQUFnQztBQUVoQywwQ0FBbUQ7QUFFbkQsc0NBQStCO0FBSS9CLHdCQUF1QztBQUV2Qyx3QkFBNkM7QUFJN0M7SUFVRSx3QkFBWSxNQUFNLEVBQUUsS0FBWTtRQUFoQyxpQkEwQkM7UUF6QkMsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsZUFBZSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBQ3ZELElBQUksQ0FBQyxzQkFBc0IsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUM7UUFFakUsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBRXBCLEtBQUssQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsVUFBQyxFQUFFO1lBQ2hDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ1AsSUFBTSxhQUFhLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBQyxLQUFLLElBQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuRixLQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ2xDLENBQUM7WUFDRCxJQUFJLENBQUMsQ0FBQztnQkFDSixLQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDdEIsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7WUFDcEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hDLEtBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUN4QixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQscUNBQVksR0FBWjtRQUNFLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3JDLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDM0MsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDekMsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUVoRCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELHVDQUFjLEdBQWQ7UUFDRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEdBQUcsMEdBQTBHLENBQUM7UUFDOUksQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEdBQUcsOEVBQThFLENBQUM7UUFDbEgsQ0FBQztJQUNILENBQUM7SUFFRCxvQ0FBVyxHQUFYLFVBQVksS0FBWTtRQUV0QixlQUFlO1FBQ2YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztRQUV4QyxtQkFBbUI7UUFDbkIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUU1QixtQ0FBbUM7UUFDbkMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDO1FBRXJELCtCQUErQjtRQUMvQixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsd0NBQWUsR0FBZixVQUFnQixLQUFLO1FBRW5CLElBQU0sTUFBTSxHQUFHLENBQUM7Z0JBQ2QsSUFBSSxFQUFFLHdCQUF3QjtnQkFDOUIsSUFBSSxFQUFFLFFBQVE7YUFDZixFQUFFO2dCQUNELElBQUksRUFBRSx3QkFBd0I7Z0JBQzlCLElBQUksRUFBRSxNQUFNO2FBQ2IsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEdBQUcsK0ZBQ3FELEtBQUssQ0FBQyxNQUFNLHVHQUNoQixLQUFLLENBQUMsVUFBVSxzR0FDZixLQUFLLENBQUMsUUFBUSwrREFDeEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLHFDQUFnQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksa0JBQzFILENBQUM7SUFFSixDQUFDO0lBRUQsb0NBQVcsR0FBWCxVQUFZLElBQUk7UUFFZCxJQUFJLEtBQUssR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBRTtZQUMxRCxJQUFJLEVBQUMsUUFBUTtZQUNiLEtBQUssRUFBRSxPQUFPO1lBQ2QsWUFBWSxFQUFFLElBQUk7WUFDbEIsS0FBSyxFQUFFLFNBQVM7WUFDaEIsVUFBVSxFQUFFLHFCQUFxQjtZQUNqQyxPQUFPLEVBQUU7Z0JBQ1AsV0FBVyxFQUFFLENBQUM7Z0JBQ2QsU0FBUyxFQUFFLEdBQUc7Z0JBQ2QsU0FBUyxFQUFFLGdCQUFNLENBQUMsTUFBTSxDQUFDLGFBQWE7Z0JBQ3RDLFdBQVcsRUFBRSxDQUFDO2FBQ2Y7WUFDRCxNQUFNLEVBQUUsQ0FBQztvQkFDUCxFQUFFLEVBQUUsSUFBSTtvQkFDUixXQUFXLEVBQUUsa0VBQWtFO29CQUMvRSxVQUFVLEVBQUUsR0FBRztvQkFDZixXQUFXLEVBQUUsQ0FBQztvQkFDZCxTQUFTLEVBQUUsZ0JBQU0sQ0FBQyxNQUFNLENBQUMsYUFBYTtvQkFDdEMsYUFBYSxFQUFFLENBQUM7b0JBQ2hCLFVBQVUsRUFBRSxPQUFPO2lCQUNwQixDQUFDO1lBQ0YsV0FBVyxFQUFFO2dCQUNYLFlBQVksRUFBRSxJQUFJO2dCQUNsQixzQkFBc0IsRUFBRSxLQUFLO2dCQUM3QixRQUFRLEVBQUUsS0FBSzthQUNoQjtZQUNELGFBQWEsRUFBRSxRQUFRO1lBQ3ZCLFlBQVksRUFBRTtnQkFDWixhQUFhLEVBQUUsQ0FBQztnQkFDaEIsYUFBYSxFQUFFLEdBQUc7YUFDbkI7WUFDRCxTQUFTLEVBQUUsQ0FBQztvQkFDVixZQUFZLEVBQUUsSUFBSTtvQkFDbEIsYUFBYSxFQUFFLEtBQUs7b0JBQ3BCLE9BQU8sRUFBRSxJQUFJO29CQUNiLE9BQU8sRUFBRSxJQUFJO29CQUNiLGFBQWEsRUFBRSxDQUFDO29CQUNuQixVQUFVLEVBQUUsQ0FBQztpQkFDWCxDQUFDO1NBQ0gsQ0FBQyxDQUFDO1FBRUgsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBRWxDLEtBQUssQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLFVBQUMsQ0FBQztZQUM3QixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDWixJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBRSxDQUFDLENBQUMsS0FBSyxDQUFFLENBQUM7Z0JBQzNDLEtBQUssQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO2dCQUMxQixLQUFLLENBQUMsSUFBSSxDQUFDO29CQUNULEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUk7b0JBQ3hCLFFBQVEsRUFBUzt3QkFDZixnQkFBZ0IsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7d0JBQ2hDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzt3QkFDeEIsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO3dCQUN2QixDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7d0JBQ2hCLElBQUksRUFBRSxPQUFPO3FCQUNkO2lCQUNGLENBQUMsQ0FBQztZQUNMLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDTixLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDaEIsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVILHFCQUFDO0FBQUQsQ0FBQyIsImZpbGUiOiI0MS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgKiBhcyBQb2ludCBmcm9tICdlc3JpL2dlb21ldHJ5L1BvaW50JztcclxuaW1wb3J0ICogYXMgZG9tIGZyb20gJ2Rvam8vZG9tJztcclxuaW1wb3J0ICogYXMgb24gZnJvbSAnZG9qby9vbic7XHJcbmltcG9ydCAqIGFzIGRvbUNvbnN0cnVjdCBmcm9tICdkb2pvL2RvbS1jb25zdHJ1Y3QnO1xyXG5pbXBvcnQgKiBhcyBkb21DbGFzcyBmcm9tICdkb2pvL2RvbS1jbGFzcyc7XHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJztcclxuXHJcbmRlY2xhcmUgbGV0IEFtQ2hhcnRzOiBhbnk7XHJcblxyXG5pbXBvcnQgJy4uLy4uL3N0eWxlL2RldGFpbC1wYW5lbC5zY3NzJztcclxuXHJcbmltcG9ydCBcImZvbnQtYXdlc29tZS9zY3NzL2ZvbnQtYXdlc29tZS5zY3NzXCI7XHJcblxyXG5pbXBvcnQgeyBTdGF0ZSwgVHJhaWwgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3Rpb25QYW5lbCB7XHJcblxyXG4gIHRyYWlsczogQXJyYXk8VHJhaWw+O1xyXG4gIHN0YXRlOiBTdGF0ZTtcclxuICBjb250YWluZXI6IGFueTtcclxuICBkZXRhaWxUaXRsZTogYW55O1xyXG4gIGRldGFpbEluZm9ncmFwaDogYW55O1xyXG4gIGRldGFpbEVsZXZhdGlvblByb2ZpbGU6IGFueTtcclxuICBkZXRhaWxEZXNjcmlwdGlvbjogYW55O1xyXG5cclxuICBjb25zdHJ1Y3Rvcih0cmFpbHMsIHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgdGhpcy50cmFpbHMgPSB0cmFpbHM7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvbS5ieUlkKCdkZXRhaWxQYW5lbCcpO1xyXG4gICAgdGhpcy5kZXRhaWxUaXRsZSA9IGRvbS5ieUlkKFwiZGV0YWlsVGl0bGVcIik7XHJcbiAgICB0aGlzLmRldGFpbEluZm9ncmFwaCA9IGRvbS5ieUlkKFwiZGV0YWlsSW5mb2dyYXBoXCIpO1xyXG4gICAgdGhpcy5kZXRhaWxEZXNjcmlwdGlvbiA9IGRvbS5ieUlkKFwiZGV0YWlsRGVzY3JpcHRpb25cIik7XHJcbiAgICB0aGlzLmRldGFpbEVsZXZhdGlvblByb2ZpbGUgPSBkb20uYnlJZCgnZGV0YWlsRWxldmF0aW9uUHJvZmlsZScpO1xyXG5cclxuICAgIHRoaXMuZW1wdHlEZXRhaWxzKCk7XHJcblxyXG4gICAgc3RhdGUud2F0Y2goJ3NlbGVjdGVkVHJhaWxJZCcsIChpZCkgPT4ge1xyXG4gICAgICBpZiAoaWQpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFRyYWlsID0gdGhpcy50cmFpbHMuZmlsdGVyKCh0cmFpbCkgPT4geyByZXR1cm4gdHJhaWwuaWQgPT09IGlkO30pWzBdO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheUluZm8oc2VsZWN0ZWRUcmFpbCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5lbXB0eURldGFpbHMoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc3RhdGUud2F0Y2goJ2RldmljZScsICgpID0+IHtcclxuICAgICAgaWYgKCF0aGlzLnN0YXRlLnNlbGVjdGVkVHJhaWxJZCkge1xyXG4gICAgICAgIHRoaXMuZGlzcGxheUFwcEluZm8oKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbXB0eURldGFpbHMoKSB7XHJcbiAgICBkb21Db25zdHJ1Y3QuZW1wdHkodGhpcy5kZXRhaWxUaXRsZSk7XHJcbiAgICBkb21Db25zdHJ1Y3QuZW1wdHkodGhpcy5kZXRhaWxEZXNjcmlwdGlvbik7XHJcbiAgICBkb21Db25zdHJ1Y3QuZW1wdHkodGhpcy5kZXRhaWxJbmZvZ3JhcGgpO1xyXG4gICAgZG9tQ29uc3RydWN0LmVtcHR5KHRoaXMuZGV0YWlsRWxldmF0aW9uUHJvZmlsZSk7XHJcblxyXG4gICAgdGhpcy5kaXNwbGF5QXBwSW5mbygpO1xyXG4gIH1cclxuXHJcbiAgZGlzcGxheUFwcEluZm8oKSB7XHJcbiAgICBpZiAodGhpcy5zdGF0ZS5kZXZpY2UgPT09ICdtb2JpbGVQb3J0cmFpdCcpIHtcclxuICAgICAgdGhpcy5kZXRhaWxJbmZvZ3JhcGguaW5uZXJIVE1MID0gJ1RoaXMgYXBwIHNob3dzIHRoZSBoaWtlcyBpbiB0aGUgU3dpc3MgTmF0aW9uYWwgUGFyay4gU2VsZWN0IGEgaGlrZSBvbiB0aGUgbWFwIHRvIGZpbmQgb3V0IG1vcmUgYWJvdXQgaXQuJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGV0YWlsSW5mb2dyYXBoLmlubmVySFRNTCA9ICdTZWxlY3QgYSBoaWtlIGluIHRoZSBtYXAgb3IgaW4gdGhlIEhpa2VzIHBhbmVsIHRvIHNlZSBtb3JlIGRldGFpbHMgYWJvdXQgaXQuJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc3BsYXlJbmZvKHRyYWlsOiBUcmFpbCk6dm9pZCB7XHJcblxyXG4gICAgLy8gY3JlYXRlIHRpdGxlXHJcbiAgICB0aGlzLmRldGFpbFRpdGxlLmlubmVySFRNTCA9IHRyYWlsLm5hbWU7XHJcblxyXG4gICAgLy8gY3JlYXRlIGluZm9ncmFwaFxyXG4gICAgdGhpcy5jcmVhdGVJbmZvZ3JhcGgodHJhaWwpO1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgZGVzY3JpcHRpb24gY29udGFpbmVyXHJcbiAgICB0aGlzLmRldGFpbERlc2NyaXB0aW9uLmlubmVySFRNTCA9IHRyYWlsLmRlc2NyaXB0aW9uO1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgZWxldmF0aW9uIHByb2ZpbGVcclxuICAgIHRoaXMuY3JlYXRlQ2hhcnQodHJhaWwucHJvZmlsZURhdGEpO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlSW5mb2dyYXBoKHRyYWlsKSB7XHJcblxyXG4gICAgY29uc3Qgc3RhdHVzID0gW3tcclxuICAgICAgaWNvbjogJ2ZhIGZhLWNhbGVuZGFyLXRpbWVzLW8nLFxyXG4gICAgICB0ZXh0OiAnQ2xvc2VkJ1xyXG4gICAgfSwge1xyXG4gICAgICBpY29uOiAnZmEgZmEtY2FsZW5kYXItY2hlY2stbycsXHJcbiAgICAgIHRleHQ6ICdPcGVuJ1xyXG4gICAgfV07XHJcblxyXG4gICAgdGhpcy5kZXRhaWxJbmZvZ3JhcGguaW5uZXJIVE1MID0gYFxyXG4gICAgICA8c3BhbiBjbGFzcz0naW5mb2dyYXBoJz48c3BhbiBjbGFzcz0nZmEgZmEtbGluZS1jaGFydCcgYXJpYS1oaWRkZW49J3RydWUnPjwvc3Bhbj4gJHt0cmFpbC5hc2NlbnR9IG08L3NwYW4+XHJcbiAgICAgIDxzcGFuIGNsYXNzPSdpbmZvZ3JhcGgnPjxzcGFuIGNsYXNzPSdmYSBmYS13cmVuY2gnIGFyaWEtaGlkZGVuPSd0cnVlJz48L3NwYW4+ICR7dHJhaWwuZGlmZmljdWx0eX08L3NwYW4+XHJcbiAgICAgIDxzcGFuIGNsYXNzPSdpbmZvZ3JhcGgnPjxzcGFuIGNsYXNzPSdmYSBmYS1jbG9jay1vJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9zcGFuPiAke3RyYWlsLndhbGt0aW1lfSBocjwvc3Bhbj5cclxuICAgICAgPHNwYW4gY2xhc3M9J2luZm9ncmFwaCc+PHNwYW4gY2xhc3M9JyR7c3RhdHVzW3RyYWlsLnN0YXR1c10uaWNvbn0nIGFyaWEtaGlkZGVuPSd0cnVlJz48L3NwYW4+ICR7c3RhdHVzW3RyYWlsLnN0YXR1c10udGV4dH08L3NwYW4+XHJcbiAgICBgO1xyXG5cclxuICB9XHJcblxyXG4gIGNyZWF0ZUNoYXJ0KGRhdGEpIHtcclxuXHJcbiAgICBsZXQgY2hhcnQgPSBBbUNoYXJ0cy5tYWtlQ2hhcnQodGhpcy5kZXRhaWxFbGV2YXRpb25Qcm9maWxlLCB7XHJcbiAgICAgIHR5cGU6J3NlcmlhbCcsXHJcbiAgICAgIHRoZW1lOiAnbGlnaHQnLFxyXG4gICAgICBkYXRhUHJvdmlkZXI6IGRhdGEsXHJcbiAgICAgIGNvbG9yOiAnIzRiNGI0YicsXHJcbiAgICAgIGZvbnRGYW1pbHk6ICdPcGVuIFNhbnMgQ29uZGVuc2VkJyxcclxuICAgICAgYmFsbG9vbjoge1xyXG4gICAgICAgIGJvcmRlckFscGhhOiAwLFxyXG4gICAgICAgIGZpbGxBbHBoYTogMC44LFxyXG4gICAgICAgIGZpbGxDb2xvcjogY29uZmlnLmNvbG9ycy5zZWxlY3RlZFRyYWlsLFxyXG4gICAgICAgIHNoYWRvd0FscGhhOiAwXHJcbiAgICAgIH0sXHJcbiAgICAgIGdyYXBoczogW3tcclxuICAgICAgICBpZDogXCJnMVwiLFxyXG4gICAgICAgIGJhbGxvb25UZXh0OiBcIkRpc3RhbmNlOiA8Yj5bW2NhdGVnb3J5XV0ga208L2I+PGJyPkVsZXZhdGlvbjo8Yj5bW3ZhbHVlXV0gbTwvYj5cIixcclxuICAgICAgICBmaWxsQWxwaGFzOiAwLjIsXHJcbiAgICAgICAgYnVsbGV0QWxwaGE6IDAsXHJcbiAgICAgICAgbGluZUNvbG9yOiBjb25maWcuY29sb3JzLnNlbGVjdGVkVHJhaWwsXHJcbiAgICAgICAgbGluZVRoaWNrbmVzczogMSxcclxuICAgICAgICB2YWx1ZUZpZWxkOiBcInZhbHVlXCJcclxuICAgICAgfV0sXHJcbiAgICAgIGNoYXJ0Q3Vyc29yOiB7XHJcbiAgICAgICAgbGltaXRUb0dyYXBoOiBcImcxXCIsXHJcbiAgICAgICAgY2F0ZWdvcnlCYWxsb29uRW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgem9vbWFibGU6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNhdGVnb3J5RmllbGQ6IFwibGVuZ3RoXCIsXHJcbiAgICAgIGNhdGVnb3J5QXhpczoge1xyXG4gICAgICAgIGdyaWRUaGlja25lc3M6IDAsXHJcbiAgICAgICAgYXhpc1RoaWNrbmVzczogMC4xLFxyXG4gICAgICB9LFxyXG4gICAgICB2YWx1ZUF4ZXM6IFt7XHJcbiAgICAgICAgc3RyaWN0TWluTWF4OiB0cnVlLFxyXG4gICAgICAgIGF1dG9HcmlkQ291bnQ6IGZhbHNlLFxyXG4gICAgICAgIG1pbmltdW06IDEwMDAsXHJcbiAgICAgICAgbWF4aW11bTogMzUwMCxcclxuICAgICAgICBheGlzVGhpY2tuZXNzOiAwLFxyXG5cdFx0XHQgIHRpY2tMZW5ndGg6IDAsXHJcbiAgICAgIH1dXHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgcG9wdXAgPSB0aGlzLnN0YXRlLnZpZXcucG9wdXA7XHJcblxyXG4gICAgY2hhcnQuYWRkTGlzdGVuZXIoJ2NoYW5nZWQnLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS5pbmRleCkge1xyXG4gICAgICAgIHZhciBkYXRhID0gZS5jaGFydC5kYXRhUHJvdmlkZXJbIGUuaW5kZXggXTtcclxuICAgICAgICBwb3B1cC5kb2NrRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHBvcHVwLm9wZW4oe1xyXG4gICAgICAgICAgdGl0bGU6IGRhdGEudmFsdWUgKyBcIiBtXCIsXHJcbiAgICAgICAgICBsb2NhdGlvbjogPFBvaW50PntcclxuICAgICAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogeyB3a2lkOiA0MzI2IH0sXHJcbiAgICAgICAgICAgIGxvbmdpdHVkZTogZGF0YS5wb2ludFswXSxcclxuICAgICAgICAgICAgbGF0aXR1ZGU6IGRhdGEucG9pbnRbMV0sXHJcbiAgICAgICAgICAgIHo6IGRhdGEucG9pbnRbMl0sXHJcbiAgICAgICAgICAgIHR5cGU6ICdwb2ludCdcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHMvdWkvRGV0YWlsUGFuZWwudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///41\n");

/***/ }),
/* 42 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZGV0YWlsLXBhbmVsLnNjc3M/NDAxZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI0Mi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc3R5bGUvZGV0YWlsLXBhbmVsLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///42\n");

/***/ }),
/* 43 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZm9udC1hd2Vzb21lL3Njc3MvZm9udC1hd2Vzb21lLnNjc3M/MzNlMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI0My5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZm9udC1hd2Vzb21lL3Njc3MvZm9udC1hd2Vzb21lLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///43\n");

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dom = __webpack_require__(1);\r\nvar on = __webpack_require__(3);\r\nvar domConstruct = __webpack_require__(2);\r\nvar config_1 = __webpack_require__(0);\r\nvar noUiSlider = __webpack_require__(45);\r\n__webpack_require__(46);\r\n__webpack_require__(47);\r\nvar SelectionPanel = /** @class */ (function () {\r\n    function SelectionPanel(trails, state) {\r\n        var _this = this;\r\n        this.state = state;\r\n        this.trails = trails;\r\n        this.container = dom.byId('selectionPanel');\r\n        this.trailsPanel = dom.byId('trailsPanel');\r\n        this.generateTrailsPanel();\r\n        on(document.querySelector('.removeSelected'), 'click', function (evt) {\r\n            _this.state.setSelectedTrailId(null);\r\n        });\r\n        this.filterPanel = dom.byId('filterPanel');\r\n        this.generateFilterPanel();\r\n        state.watch('selectedTrailId', function (id) {\r\n            if (document.querySelector(\".selected\")) {\r\n                document.querySelector(\".selected\").classList.remove(\"selected\");\r\n            }\r\n            if (id) {\r\n                document.querySelector(\"[data-id ='\" + id + \"']\").classList.add(\"selected\");\r\n                document.querySelector('.removeSelected').removeAttribute('disabled');\r\n            }\r\n            else {\r\n                document.querySelector('.removeSelected').setAttribute('disabled', '');\r\n            }\r\n        });\r\n        state.watch('filters', function (filters) {\r\n            var filteredTrailIds = _this.getFilteredTrails(filters)\r\n                .map(function (trail) { return trail.id; });\r\n            _this.state.setFilteredTrailIds(filteredTrailIds);\r\n        });\r\n        state.watch('filteredTrailIds', function (ids) {\r\n            _this.updateVisibleTrails(ids);\r\n        });\r\n    }\r\n    SelectionPanel.prototype.getFilteredTrails = function (filters) {\r\n        var filteredTrails = this.trails.filter(function (trail) {\r\n            // we assume the trail will not be filtered out\r\n            var keepTrail = true;\r\n            // go through each filter criteria and verify if the trail should be filtered out\r\n            for (var filter in filters) {\r\n                if (Array.isArray(filters[filter])) {\r\n                    if (trail[filter] < filters[filter][0] || trail[filter] > filters[filter][1]) {\r\n                        keepTrail = false;\r\n                        break;\r\n                    }\r\n                }\r\n                else {\r\n                    if (filters[filter] !== 'All') {\r\n                        if (trail[filter] !== filters[filter]) {\r\n                            keepTrail = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return keepTrail;\r\n        });\r\n        return filteredTrails;\r\n    };\r\n    SelectionPanel.prototype.updateVisibleTrails = function (ids) {\r\n        var trailElements = document.querySelectorAll(\".trail\");\r\n        [].forEach.call(trailElements, function (elem) {\r\n            if (ids.indexOf(parseInt(elem.dataset.id)) === -1) {\r\n                elem.classList.add(\"disabled\");\r\n            }\r\n            else {\r\n                elem.classList.remove(\"disabled\");\r\n            }\r\n        });\r\n    };\r\n    SelectionPanel.prototype.generateTrailsPanel = function () {\r\n        var _this = this;\r\n        var state = this.state;\r\n        this.trails.forEach(function (trail) {\r\n            var trailElement = domConstruct.create('div', {\r\n                'innerHTML': trail.name,\r\n                'data-difficulty': trail.difficulty,\r\n                'data-id': trail.id,\r\n                'data-category': trail.category,\r\n                'data-walktime': trail.walktime,\r\n                'data-status': trail.status,\r\n                'data-ascent': trail.ascent,\r\n                'class': 'trail'\r\n            }, _this.trailsPanel);\r\n            on(trailElement, 'click', function (evt) {\r\n                state.setSelectedTrailId(parseInt(evt.target.dataset.id));\r\n            });\r\n        });\r\n    };\r\n    SelectionPanel.prototype.generateFilterPanel = function () {\r\n        this.generateSingleChoiceFilters();\r\n        this.generateRangeFilters();\r\n    };\r\n    // create radio buttons for single choice filter criteria\r\n    SelectionPanel.prototype.generateSingleChoiceFilters = function () {\r\n        var _this = this;\r\n        var singleChoiceFilters = config_1.default.data.filterOptions.singleChoice;\r\n        for (var _i = 0, singleChoiceFilters_1 = singleChoiceFilters; _i < singleChoiceFilters_1.length; _i++) {\r\n            var filter = singleChoiceFilters_1[_i];\r\n            // get unique values for the single choice options\r\n            var uniqueValues = this.getUniqueValues(filter);\r\n            // create a single choice options text so that users know what to select\r\n            var text = filter.charAt(0).toUpperCase() + filter.slice(1);\r\n            domConstruct.create(\"div\", {\r\n                innerHTML: text,\r\n                class: 'filter-category'\r\n            }, this.filterPanel);\r\n            // add options as radio buttons\r\n            var spanContainer = domConstruct.create(\"span\", {\r\n                \"class\": \"radio-group\"\r\n            }, this.filterPanel);\r\n            for (var i = 0; i < uniqueValues.length; i++) {\r\n                var checked = (i === 0) ? 'checked' : '';\r\n                var id = filter + \"-\" + uniqueValues[i];\r\n                var radioOption = \"<input type='radio' id='\" + id + \"' name=\" + filter + \" \" + checked + \"/>\\n        <label for='\" + id + \"' data-group='\" + filter + \"' data-option='\" + uniqueValues[i] + \"'>\" + uniqueValues[i] + \"</label>\";\r\n                spanContainer.innerHTML += radioOption;\r\n            }\r\n            // initialize state\r\n            this.state.setFilter(filter, 'All');\r\n            on(spanContainer, \"click\", function (evt) {\r\n                var target = evt.target;\r\n                if (target.localName === 'label') {\r\n                    _this.state.setFilter(target.dataset.group, target.dataset.option);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    // function that gets unique values for a trail attribute (filter)\r\n    SelectionPanel.prototype.getUniqueValues = function (filter) {\r\n        var uniqueValues = ['All'];\r\n        this.trails.forEach(function (elem) {\r\n            if (uniqueValues.indexOf(elem[filter]) === -1) {\r\n                uniqueValues.push(elem[filter]);\r\n            }\r\n        });\r\n        return uniqueValues;\r\n    };\r\n    // creates range sliders for interval type filter criteria\r\n    SelectionPanel.prototype.generateRangeFilters = function () {\r\n        var rangeFilters = config_1.default.data.filterOptions.range;\r\n        var state = this.state;\r\n        var _loop_1 = function (filter) {\r\n            var text = filter.charAt(0).toUpperCase() + filter.slice(1);\r\n            domConstruct.create(\"div\", {\r\n                innerHTML: text,\r\n                class: 'filter-category'\r\n            }, this_1.filterPanel);\r\n            // get minimum and maximum for the filter criteria\r\n            var extremes = this_1.getExtremes(filter);\r\n            var unit = '', step = 1;\r\n            switch (filter) {\r\n                case 'walktime': {\r\n                    unit = 'hrs';\r\n                    step = 1;\r\n                    break;\r\n                }\r\n                case 'ascent': {\r\n                    unit = 'm';\r\n                    step = 50;\r\n                    break;\r\n                }\r\n            }\r\n            domConstruct.create('span', {\r\n                innerHTML: extremes.min + ' ' + unit\r\n            }, this_1.filterPanel);\r\n            var rangeSliderContainer = domConstruct.create('div', {\r\n                'class': 'range-slider',\r\n                'data-group': filter\r\n            }, this_1.filterPanel);\r\n            var format = {\r\n                to: function (value) {\r\n                    return parseInt(value) + \" \" + unit;\r\n                },\r\n                from: function (value) {\r\n                    return parseInt(value) + \" \" + unit;\r\n                }\r\n            };\r\n            noUiSlider.create(rangeSliderContainer, {\r\n                start: [extremes.min, extremes.max],\r\n                range: {\r\n                    min: extremes.min,\r\n                    max: extremes.max\r\n                },\r\n                connect: true,\r\n                step: step,\r\n                tooltips: [format, format]\r\n            });\r\n            //initialize state\r\n            state.setFilter(filter, [extremes.min, extremes.max]);\r\n            //add event listener on slider to change the state when slider values change\r\n            rangeSliderContainer.noUiSlider.on('end', function (values) {\r\n                state.setFilter(this.target.dataset.group, values);\r\n            });\r\n            domConstruct.create('span', {\r\n                innerHTML: extremes.max + ' ' + unit\r\n            }, this_1.filterPanel);\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, rangeFilters_1 = rangeFilters; _i < rangeFilters_1.length; _i++) {\r\n            var filter = rangeFilters_1[_i];\r\n            _loop_1(filter);\r\n        }\r\n    };\r\n    SelectionPanel.prototype.getExtremes = function (prop) {\r\n        var min = 1000, max = 0;\r\n        this.trails.forEach(function (elem) {\r\n            if (elem[prop] !== null) {\r\n                if (elem[prop] < min) {\r\n                    min = elem[prop];\r\n                }\r\n                if (elem[prop] > max) {\r\n                    max = elem[prop];\r\n                }\r\n            }\r\n        });\r\n        return {\r\n            min: min,\r\n            max: max\r\n        };\r\n    };\r\n    return SelectionPanel;\r\n}());\r\nexports.default = SelectionPanel;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvdWkvU2VsZWN0aW9uUGFuZWwudHM/NGRlNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlDQUFnQztBQUNoQyxnQ0FBOEI7QUFDOUIsMENBQW1EO0FBQ25ELHNDQUErQjtBQUMvQix5Q0FBMEM7QUFDMUMsd0JBQTBDO0FBQzFDLHdCQUFxQztBQUdyQztJQVFFLHdCQUFZLE1BQU0sRUFBRSxLQUFZO1FBQWhDLGlCQXlDQztRQXZDQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUVyQixJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUU1QyxJQUFJLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFFM0IsRUFBRSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsaUJBQWlCLENBQUMsRUFBRSxPQUFPLEVBQUUsVUFBQyxHQUFHO1lBQ3pELEtBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFFM0IsS0FBSyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxVQUFDLEVBQUU7WUFDaEMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hDLFFBQVEsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNuRSxD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QUFRLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJO2FBQ3JDLEVBQUUsT0FBSyxXQUFXLENBQUMsQ0FBQztRQUN2QixDQUFDOztRQWxFRCxHQUFHLENBQUMsQ0FBZSxVQUFZLEVBQVosNkJBQVksRUFBWiwwQkFBWSxFQUFaLElBQVk7WUFBMUIsSUFBSSxNQUFNO29CQUFOLE1BQU07U0FrRWQ7SUFDSCxDQUFDO0lBRU8sb0NBQVcsR0FBbkIsVUFBb0IsSUFBSTtRQUN0QixJQUFJLEdBQUcsR0FBRyxJQUFJLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFTLElBQUk7WUFDL0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3hCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUNyQixHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNuQixDQUFDO2dCQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUNyQixHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNuQixDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUMsQ0FBQztRQUNGLE1BQU0sQ0FBQztZQUNMLEdBQUcsRUFBRSxHQUFHO1lBQ1IsR0FBRyxFQUFFLEdBQUc7U0FDVCxDQUFDO0lBQ0osQ0FBQztJQUVILHFCQUFDO0FBQUQsQ0FBQyIsImZpbGUiOiI0NC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvbSBmcm9tICdkb2pvL2RvbSc7XHJcbmltcG9ydCAqIGFzIG9uIGZyb20gJ2Rvam8vb24nO1xyXG5pbXBvcnQgKiBhcyBkb21Db25zdHJ1Y3QgZnJvbSAnZG9qby9kb20tY29uc3RydWN0JztcclxuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgbm9VaVNsaWRlciA9IHJlcXVpcmUoJ25vVWlTbGlkZXInKTtcclxuaW1wb3J0ICcuLi8uLi9zdHlsZS9zZWxlY3Rpb24tcGFuZWwuc2Nzcyc7XHJcbmltcG9ydCAnLi4vLi4vc3R5bGUvbm91aXNsaWRlci5zY3NzJztcclxuaW1wb3J0IHsgU3RhdGUsIFRyYWlsLCBGaWx0ZXJzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VsZWN0aW9uUGFuZWwge1xyXG5cclxuICB0cmFpbHNQYW5lbDtcclxuICBmaWx0ZXJQYW5lbDtcclxuICB0cmFpbHM6IEFycmF5PFRyYWlsPjtcclxuICBzdGF0ZTogU3RhdGU7XHJcbiAgY29udGFpbmVyOiBhbnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHRyYWlscywgc3RhdGU6IFN0YXRlKSB7XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgdGhpcy50cmFpbHMgPSB0cmFpbHM7XHJcblxyXG4gICAgdGhpcy5jb250YWluZXIgPSBkb20uYnlJZCgnc2VsZWN0aW9uUGFuZWwnKTtcclxuXHJcbiAgICB0aGlzLnRyYWlsc1BhbmVsID0gZG9tLmJ5SWQoJ3RyYWlsc1BhbmVsJyk7XHJcbiAgICB0aGlzLmdlbmVyYXRlVHJhaWxzUGFuZWwoKTtcclxuXHJcbiAgICBvbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlU2VsZWN0ZWQnKSwgJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLnN0YXRlLnNldFNlbGVjdGVkVHJhaWxJZChudWxsKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuZmlsdGVyUGFuZWwgPSBkb20uYnlJZCgnZmlsdGVyUGFuZWwnKTtcclxuICAgIHRoaXMuZ2VuZXJhdGVGaWx0ZXJQYW5lbCgpO1xyXG5cclxuICAgIHN0YXRlLndhdGNoKCdzZWxlY3RlZFRyYWlsSWQnLCAoaWQpID0+IHtcclxuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0ZWRcIikpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaWQpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtaWQgPSdcIiArIGlkICsgXCInXVwiKS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlbW92ZVNlbGVjdGVkJykucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmVTZWxlY3RlZCcpLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHN0YXRlLndhdGNoKCdmaWx0ZXJzJywgKGZpbHRlcnM6IEZpbHRlcnMpID0+IHtcclxuXHJcbiAgICAgIGxldCBmaWx0ZXJlZFRyYWlsSWRzID0gdGhpcy5nZXRGaWx0ZXJlZFRyYWlscyhmaWx0ZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHRyYWlsKSA9PiB0cmFpbC5pZCk7XHJcbiAgICAgIHRoaXMuc3RhdGUuc2V0RmlsdGVyZWRUcmFpbElkcyhmaWx0ZXJlZFRyYWlsSWRzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN0YXRlLndhdGNoKCdmaWx0ZXJlZFRyYWlsSWRzJywgKGlkcykgPT4ge1xyXG4gICAgICB0aGlzLnVwZGF0ZVZpc2libGVUcmFpbHMoaWRzKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0RmlsdGVyZWRUcmFpbHMoZmlsdGVyczogRmlsdGVycyk6IEFycmF5PFRyYWlsPiB7XHJcbiAgICBsZXQgZmlsdGVyZWRUcmFpbHMgPSB0aGlzLnRyYWlscy5maWx0ZXIoKHRyYWlsKSA9PiB7XHJcblxyXG4gICAgICAvLyB3ZSBhc3N1bWUgdGhlIHRyYWlsIHdpbGwgbm90IGJlIGZpbHRlcmVkIG91dFxyXG4gICAgICBsZXQga2VlcFRyYWlsID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIGdvIHRocm91Z2ggZWFjaCBmaWx0ZXIgY3JpdGVyaWEgYW5kIHZlcmlmeSBpZiB0aGUgdHJhaWwgc2hvdWxkIGJlIGZpbHRlcmVkIG91dFxyXG4gICAgICBmb3IgKGxldCBmaWx0ZXIgaW4gZmlsdGVycykge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpbHRlcnNbZmlsdGVyXSkpIHtcclxuICAgICAgICAgIGlmICh0cmFpbFtmaWx0ZXJdIDwgZmlsdGVyc1tmaWx0ZXJdWzBdIHx8IHRyYWlsW2ZpbHRlcl0gPiBmaWx0ZXJzW2ZpbHRlcl1bMV0pIHtcclxuICAgICAgICAgICAga2VlcFRyYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGlmIChmaWx0ZXJzW2ZpbHRlcl0gIT09ICdBbGwnKSB7XHJcbiAgICAgICAgICAgIGlmICh0cmFpbFtmaWx0ZXJdICE9PSBmaWx0ZXJzW2ZpbHRlcl0pIHtcclxuICAgICAgICAgICAgICBrZWVwVHJhaWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGtlZXBUcmFpbDtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBmaWx0ZXJlZFRyYWlscztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlVmlzaWJsZVRyYWlscyhpZHMpIHtcclxuICAgIGxldCB0cmFpbEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50cmFpbFwiKTtcclxuICAgIFtdLmZvckVhY2guY2FsbCh0cmFpbEVsZW1lbnRzLCBmdW5jdGlvbihlbGVtKXtcclxuICAgICAgaWYgKGlkcy5pbmRleE9mKHBhcnNlSW50KGVsZW0uZGF0YXNldC5pZCkpID09PSAtMSkge1xyXG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2VuZXJhdGVUcmFpbHNQYW5lbCgpOnZvaWQge1xyXG5cclxuICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgdGhpcy50cmFpbHMuZm9yRWFjaCgodHJhaWwpID0+IHtcclxuICAgICAgbGV0IHRyYWlsRWxlbWVudCA9IGRvbUNvbnN0cnVjdC5jcmVhdGUoJ2RpdicsIHtcclxuICAgICAgICAnaW5uZXJIVE1MJzogdHJhaWwubmFtZSxcclxuICAgICAgICAnZGF0YS1kaWZmaWN1bHR5JzogdHJhaWwuZGlmZmljdWx0eSxcclxuICAgICAgICAnZGF0YS1pZCc6IHRyYWlsLmlkLFxyXG4gICAgICAgICdkYXRhLWNhdGVnb3J5JzogdHJhaWwuY2F0ZWdvcnksXHJcbiAgICAgICAgJ2RhdGEtd2Fsa3RpbWUnOiB0cmFpbC53YWxrdGltZSxcclxuICAgICAgICAnZGF0YS1zdGF0dXMnOiB0cmFpbC5zdGF0dXMsXHJcbiAgICAgICAgJ2RhdGEtYXNjZW50JzogdHJhaWwuYXNjZW50LFxyXG4gICAgICAgICdjbGFzcyc6ICd0cmFpbCdcclxuICAgICAgfSwgdGhpcy50cmFpbHNQYW5lbCk7XHJcblxyXG4gICAgICBvbih0cmFpbEVsZW1lbnQsICdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICBzdGF0ZS5zZXRTZWxlY3RlZFRyYWlsSWQocGFyc2VJbnQoZXZ0LnRhcmdldC5kYXRhc2V0LmlkKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZW5lcmF0ZUZpbHRlclBhbmVsKCk6dm9pZCB7XHJcbiAgICB0aGlzLmdlbmVyYXRlU2luZ2xlQ2hvaWNlRmlsdGVycygpO1xyXG4gICAgdGhpcy5nZW5lcmF0ZVJhbmdlRmlsdGVycygpO1xyXG4gIH1cclxuXHJcbiAgLy8gY3JlYXRlIHJhZGlvIGJ1dHRvbnMgZm9yIHNpbmdsZSBjaG9pY2UgZmlsdGVyIGNyaXRlcmlhXHJcbiAgcHJpdmF0ZSBnZW5lcmF0ZVNpbmdsZUNob2ljZUZpbHRlcnMoKTp2b2lkIHtcclxuXHJcbiAgICBsZXQgc2luZ2xlQ2hvaWNlRmlsdGVyczpBcnJheTxzdHJpbmc+ID0gY29uZmlnLmRhdGEuZmlsdGVyT3B0aW9ucy5zaW5nbGVDaG9pY2U7XHJcblxyXG4gICAgZm9yIChsZXQgZmlsdGVyIG9mIHNpbmdsZUNob2ljZUZpbHRlcnMpIHtcclxuXHJcbiAgICAgIC8vIGdldCB1bmlxdWUgdmFsdWVzIGZvciB0aGUgc2luZ2xlIGNob2ljZSBvcHRpb25zXHJcbiAgICAgIGxldCB1bmlxdWVWYWx1ZXMgPSB0aGlzLmdldFVuaXF1ZVZhbHVlcyhmaWx0ZXIpO1xyXG5cclxuICAgICAgLy8gY3JlYXRlIGEgc2luZ2xlIGNob2ljZSBvcHRpb25zIHRleHQgc28gdGhhdCB1c2VycyBrbm93IHdoYXQgdG8gc2VsZWN0XHJcbiAgICAgIGxldCB0ZXh0ID0gZmlsdGVyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZmlsdGVyLnNsaWNlKDEpO1xyXG4gICAgICBkb21Db25zdHJ1Y3QuY3JlYXRlKFwiZGl2XCIsIHtcclxuICAgICAgICBpbm5lckhUTUw6IHRleHQsXHJcbiAgICAgICAgY2xhc3M6ICdmaWx0ZXItY2F0ZWdvcnknXHJcbiAgICAgICAgfSwgdGhpcy5maWx0ZXJQYW5lbCk7XHJcblxyXG4gICAgICAvLyBhZGQgb3B0aW9ucyBhcyByYWRpbyBidXR0b25zXHJcbiAgICAgIHZhciBzcGFuQ29udGFpbmVyID0gZG9tQ29uc3RydWN0LmNyZWF0ZShcInNwYW5cIiwge1xyXG4gICAgICAgIFwiY2xhc3NcIjogXCJyYWRpby1ncm91cFwiXHJcbiAgICAgIH0sIHRoaXMuZmlsdGVyUGFuZWwpO1xyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bmlxdWVWYWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgY2hlY2tlZCA9IChpID09PSAwKSA/ICdjaGVja2VkJyA6ICcnO1xyXG4gICAgICAgIGxldCBpZCA9IGAke2ZpbHRlcn0tJHt1bmlxdWVWYWx1ZXNbaV19YDtcclxuICAgICAgICB2YXIgcmFkaW9PcHRpb24gPSBgPGlucHV0IHR5cGU9J3JhZGlvJyBpZD0nJHtpZH0nIG5hbWU9JHtmaWx0ZXJ9ICR7Y2hlY2tlZH0vPlxyXG4gICAgICAgIDxsYWJlbCBmb3I9JyR7aWR9JyBkYXRhLWdyb3VwPScke2ZpbHRlcn0nIGRhdGEtb3B0aW9uPScke3VuaXF1ZVZhbHVlc1tpXX0nPiR7dW5pcXVlVmFsdWVzW2ldfTwvbGFiZWw+YDtcclxuICAgICAgICBzcGFuQ29udGFpbmVyLmlubmVySFRNTCArPSByYWRpb09wdGlvbjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gaW5pdGlhbGl6ZSBzdGF0ZVxyXG4gICAgICB0aGlzLnN0YXRlLnNldEZpbHRlcihmaWx0ZXIsICdBbGwnKTtcclxuXHJcbiAgICAgIG9uKHNwYW5Db250YWluZXIsIFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSBldnQudGFyZ2V0O1xyXG4gICAgICAgIGlmICh0YXJnZXQubG9jYWxOYW1lID09PSAnbGFiZWwnICkge1xyXG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZXRGaWx0ZXIodGFyZ2V0LmRhdGFzZXQuZ3JvdXAsIHRhcmdldC5kYXRhc2V0Lm9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvLyBmdW5jdGlvbiB0aGF0IGdldHMgdW5pcXVlIHZhbHVlcyBmb3IgYSB0cmFpbCBhdHRyaWJ1dGUgKGZpbHRlcilcclxuICBwcml2YXRlIGdldFVuaXF1ZVZhbHVlcyhmaWx0ZXIpOkFycmF5PHN0cmluZz4ge1xyXG5cclxuICAgIGxldCB1bmlxdWVWYWx1ZXMgPSBbJ0FsbCddO1xyXG5cclxuICAgIHRoaXMudHJhaWxzLmZvckVhY2goKGVsZW0pID0+IHtcclxuICAgICAgaWYgKHVuaXF1ZVZhbHVlcy5pbmRleE9mKGVsZW1bZmlsdGVyXSkgPT09IC0xKSAge1xyXG4gICAgICAgIHVuaXF1ZVZhbHVlcy5wdXNoKGVsZW1bZmlsdGVyXSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB1bmlxdWVWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICAvLyBjcmVhdGVzIHJhbmdlIHNsaWRlcnMgZm9yIGludGVydmFsIHR5cGUgZmlsdGVyIGNyaXRlcmlhXHJcbiAgcHJpdmF0ZSBnZW5lcmF0ZVJhbmdlRmlsdGVycygpOnZvaWQge1xyXG5cclxuICAgIGxldCByYW5nZUZpbHRlcnM6IEFycmF5PHN0cmluZz4gPSBjb25maWcuZGF0YS5maWx0ZXJPcHRpb25zLnJhbmdlO1xyXG4gICAgbGV0IHN0YXRlOiBTdGF0ZSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgZm9yIChsZXQgZmlsdGVyIG9mIHJhbmdlRmlsdGVycykge1xyXG5cclxuICAgICAgbGV0IHRleHQgPSBmaWx0ZXIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBmaWx0ZXIuc2xpY2UoMSk7XHJcbiAgICAgIGRvbUNvbnN0cnVjdC5jcmVhdGUoXCJkaXZcIiwge1xyXG4gICAgICAgIGlubmVySFRNTDogdGV4dCxcclxuICAgICAgICBjbGFzczogJ2ZpbHRlci1jYXRlZ29yeSdcclxuICAgICAgICB9LCB0aGlzLmZpbHRlclBhbmVsKTtcclxuXHJcbiAgICAgIC8vIGdldCBtaW5pbXVtIGFuZCBtYXhpbXVtIGZvciB0aGUgZmlsdGVyIGNyaXRlcmlhXHJcbiAgICAgIGxldCBleHRyZW1lczpFeHRyZW1lcyA9IHRoaXMuZ2V0RXh0cmVtZXMoZmlsdGVyKTtcclxuICAgICAgbGV0IHVuaXQ6c3RyaW5nID0gJycsIHN0ZXA6bnVtYmVyID0gMTtcclxuXHJcbiAgICAgIHN3aXRjaChmaWx0ZXIpIHtcclxuICAgICAgICBjYXNlICd3YWxrdGltZSc6IHtcclxuICAgICAgICAgIHVuaXQgPSAnaHJzJztcclxuICAgICAgICAgIHN0ZXAgPSAxO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgJ2FzY2VudCc6IHtcclxuICAgICAgICAgIHVuaXQgPSAnbSc7XHJcbiAgICAgICAgICBzdGVwID0gNTA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRvbUNvbnN0cnVjdC5jcmVhdGUoJ3NwYW4nLCB7XHJcbiAgICAgICAgaW5uZXJIVE1MOiBleHRyZW1lcy5taW4gKyAnICcgKyB1bml0XHJcbiAgICAgIH0sIHRoaXMuZmlsdGVyUGFuZWwpO1xyXG5cclxuXHJcbiAgICAgIGxldCByYW5nZVNsaWRlckNvbnRhaW5lciA9IGRvbUNvbnN0cnVjdC5jcmVhdGUoJ2RpdicsIHtcclxuICAgICAgICAnY2xhc3MnOiAncmFuZ2Utc2xpZGVyJyxcclxuICAgICAgICAnZGF0YS1ncm91cCc6IGZpbHRlclxyXG4gICAgICB9LCB0aGlzLmZpbHRlclBhbmVsKTtcclxuXHJcbiAgICAgIGxldCBmb3JtYXQgPSB7XHJcbiAgICAgICAgdG86ICggdmFsdWUgKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gYCR7cGFyc2VJbnQodmFsdWUpfSAke3VuaXR9YDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZyb206ICggdmFsdWUgKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gYCR7cGFyc2VJbnQodmFsdWUpfSAke3VuaXR9YDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG5vVWlTbGlkZXIuY3JlYXRlKHJhbmdlU2xpZGVyQ29udGFpbmVyLCB7XHJcbiAgICAgICAgc3RhcnQ6IFtleHRyZW1lcy5taW4sIGV4dHJlbWVzLm1heF0sXHJcbiAgICAgICAgcmFuZ2U6IHtcclxuICAgICAgICAgIG1pbjogZXh0cmVtZXMubWluLFxyXG4gICAgICAgICAgbWF4OiBleHRyZW1lcy5tYXhcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbm5lY3Q6IHRydWUsXHJcbiAgICAgICAgc3RlcDogc3RlcCxcclxuICAgICAgICB0b29sdGlwczogW2Zvcm1hdCwgZm9ybWF0XVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vaW5pdGlhbGl6ZSBzdGF0ZVxyXG4gICAgICBzdGF0ZS5zZXRGaWx0ZXIoZmlsdGVyLCBbZXh0cmVtZXMubWluLCBleHRyZW1lcy5tYXhdKTtcclxuXHJcbiAgICAgIC8vYWRkIGV2ZW50IGxpc3RlbmVyIG9uIHNsaWRlciB0byBjaGFuZ2UgdGhlIHN0YXRlIHdoZW4gc2xpZGVyIHZhbHVlcyBjaGFuZ2VcclxuICAgICAgcmFuZ2VTbGlkZXJDb250YWluZXIubm9VaVNsaWRlci5vbignZW5kJywgZnVuY3Rpb24gKHZhbHVlcykge1xyXG4gICAgICAgIHN0YXRlLnNldEZpbHRlcih0aGlzLnRhcmdldC5kYXRhc2V0Lmdyb3VwLCB2YWx1ZXMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGRvbUNvbnN0cnVjdC5jcmVhdGUoJ3NwYW4nLCB7XHJcbiAgICAgICAgaW5uZXJIVE1MOiBleHRyZW1lcy5tYXggKyAnICcgKyB1bml0XHJcbiAgICAgIH0sIHRoaXMuZmlsdGVyUGFuZWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRFeHRyZW1lcyhwcm9wKTpFeHRyZW1lcyB7XHJcbiAgICB2YXIgbWluID0gMTAwMCwgbWF4ID0gMDtcclxuICAgIHRoaXMudHJhaWxzLmZvckVhY2goZnVuY3Rpb24oZWxlbSkge1xyXG4gICAgICBpZiAoZWxlbVtwcm9wXSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGlmIChlbGVtW3Byb3BdIDwgbWluKSB7XHJcbiAgICAgICAgICBtaW4gPSBlbGVtW3Byb3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZWxlbVtwcm9wXSA+IG1heCkge1xyXG4gICAgICAgICAgbWF4ID0gZWxlbVtwcm9wXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtaW46IG1pbixcclxuICAgICAgbWF4OiBtYXhcclxuICAgIH07XHJcbiAgfVxyXG5cclxufVxyXG5cclxuaW50ZXJmYWNlIEV4dHJlbWVzIHtcclxuICBtaW46IG51bWJlcixcclxuICBtYXg6IG51bWJlclxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90cy91aS9TZWxlY3Rpb25QYW5lbC50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///44\n");

/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! nouislider - 11.0.0 - 2018-01-12 20:37:52 */\n\n(function (factory) {\n\n    if ( true ) {\n\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n    } else if ( typeof exports === 'object' ) {\n\n        // Node/CommonJS\n        module.exports = factory();\n\n    } else {\n\n        // Browser globals\n        window.noUiSlider = factory();\n    }\n\n}(function( ){\n\n\t'use strict';\n\n\tvar VERSION = '11.0.0';\n\n\n\tfunction isValidFormatter ( entry ) {\n\t\treturn typeof entry === 'object' && typeof entry.to === 'function' && typeof entry.from === 'function';\n\t}\n\n\tfunction removeElement ( el ) {\n\t\tel.parentElement.removeChild(el);\n\t}\n\n\t// Bindable version\n\tfunction preventDefault ( e ) {\n\t\te.preventDefault();\n\t}\n\n\t// Removes duplicates from an array.\n\tfunction unique ( array ) {\n\t\treturn array.filter(function(a){\n\t\t\treturn !this[a] ? this[a] = true : false;\n\t\t}, {});\n\t}\n\n\t// Round a value to the closest 'to'.\n\tfunction closest ( value, to ) {\n\t\treturn Math.round(value / to) * to;\n\t}\n\n\t// Current position of an element relative to the document.\n\tfunction offset ( elem, orientation ) {\n\n\t\tvar rect = elem.getBoundingClientRect();\n\t\tvar doc = elem.ownerDocument;\n\t\tvar docElem = doc.documentElement;\n\t\tvar pageOffset = getPageOffset(doc);\n\n\t\t// getBoundingClientRect contains left scroll in Chrome on Android.\n\t\t// I haven't found a feature detection that proves this. Worst case\n\t\t// scenario on mis-match: the 'tap' feature on horizontal sliders breaks.\n\t\tif ( /webkit.*Chrome.*Mobile/i.test(navigator.userAgent) ) {\n\t\t\tpageOffset.x = 0;\n\t\t}\n\n\t\treturn orientation ? (rect.top + pageOffset.y - docElem.clientTop) : (rect.left + pageOffset.x - docElem.clientLeft);\n\t}\n\n\t// Checks whether a value is numerical.\n\tfunction isNumeric ( a ) {\n\t\treturn typeof a === 'number' && !isNaN( a ) && isFinite( a );\n\t}\n\n\t// Sets a class and removes it after [duration] ms.\n\tfunction addClassFor ( element, className, duration ) {\n\t\tif (duration > 0) {\n\t\taddClass(element, className);\n\t\t\tsetTimeout(function(){\n\t\t\t\tremoveClass(element, className);\n\t\t\t}, duration);\n\t\t}\n\t}\n\n\t// Limits a value to 0 - 100\n\tfunction limit ( a ) {\n\t\treturn Math.max(Math.min(a, 100), 0);\n\t}\n\n\t// Wraps a variable as an array, if it isn't one yet.\n\t// Note that an input array is returned by reference!\n\tfunction asArray ( a ) {\n\t\treturn Array.isArray(a) ? a : [a];\n\t}\n\n\t// Counts decimals\n\tfunction countDecimals ( numStr ) {\n\t\tnumStr = String(numStr);\n\t\tvar pieces = numStr.split(\".\");\n\t\treturn pieces.length > 1 ? pieces[1].length : 0;\n\t}\n\n\t// http://youmightnotneedjquery.com/#add_class\n\tfunction addClass ( el, className ) {\n\t\tif ( el.classList ) {\n\t\t\tel.classList.add(className);\n\t\t} else {\n\t\t\tel.className += ' ' + className;\n\t\t}\n\t}\n\n\t// http://youmightnotneedjquery.com/#remove_class\n\tfunction removeClass ( el, className ) {\n\t\tif ( el.classList ) {\n\t\t\tel.classList.remove(className);\n\t\t} else {\n\t\t\tel.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n\t\t}\n\t}\n\n\t// https://plainjs.com/javascript/attributes/adding-removing-and-testing-for-classes-9/\n\tfunction hasClass ( el, className ) {\n\t\treturn el.classList ? el.classList.contains(className) : new RegExp('\\\\b' + className + '\\\\b').test(el.className);\n\t}\n\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY#Notes\n\tfunction getPageOffset ( doc ) {\n\n\t\tvar supportPageOffset = window.pageXOffset !== undefined;\n\t\tvar isCSS1Compat = ((doc.compatMode || \"\") === \"CSS1Compat\");\n\t\tvar x = supportPageOffset ? window.pageXOffset : isCSS1Compat ? doc.documentElement.scrollLeft : doc.body.scrollLeft;\n\t\tvar y = supportPageOffset ? window.pageYOffset : isCSS1Compat ? doc.documentElement.scrollTop : doc.body.scrollTop;\n\n\t\treturn {\n\t\t\tx: x,\n\t\t\ty: y\n\t\t};\n\t}\n\n\t// we provide a function to compute constants instead\n\t// of accessing window.* as soon as the module needs it\n\t// so that we do not compute anything if not needed\n\tfunction getActions ( ) {\n\n\t\t// Determine the events to bind. IE11 implements pointerEvents without\n\t\t// a prefix, which breaks compatibility with the IE10 implementation.\n\t\treturn window.navigator.pointerEnabled ? {\n\t\t\tstart: 'pointerdown',\n\t\t\tmove: 'pointermove',\n\t\t\tend: 'pointerup'\n\t\t} : window.navigator.msPointerEnabled ? {\n\t\t\tstart: 'MSPointerDown',\n\t\t\tmove: 'MSPointerMove',\n\t\t\tend: 'MSPointerUp'\n\t\t} : {\n\t\t\tstart: 'mousedown touchstart',\n\t\t\tmove: 'mousemove touchmove',\n\t\t\tend: 'mouseup touchend'\n\t\t};\n\t}\n\n\t// https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n\t// Issue #785\n\tfunction getSupportsPassive ( ) {\n\n\t\tvar supportsPassive = false;\n\n\t\ttry {\n\n\t\t\tvar opts = Object.defineProperty({}, 'passive', {\n\t\t\t\tget: function() {\n\t\t\t\t\tsupportsPassive = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\twindow.addEventListener('test', null, opts);\n\n\t\t} catch (e) {}\n\n\t\treturn supportsPassive;\n\t}\n\n\tfunction getSupportsTouchActionNone ( ) {\n\t\treturn window.CSS && CSS.supports && CSS.supports('touch-action', 'none');\n\t}\n\n\n// Value calculation\n\n\t// Determine the size of a sub-range in relation to a full range.\n\tfunction subRangeRatio ( pa, pb ) {\n\t\treturn (100 / (pb - pa));\n\t}\n\n\t// (percentage) How many percent is this value of this range?\n\tfunction fromPercentage ( range, value ) {\n\t\treturn (value * 100) / ( range[1] - range[0] );\n\t}\n\n\t// (percentage) Where is this value on this range?\n\tfunction toPercentage ( range, value ) {\n\t\treturn fromPercentage( range, range[0] < 0 ?\n\t\t\tvalue + Math.abs(range[0]) :\n\t\t\t\tvalue - range[0] );\n\t}\n\n\t// (value) How much is this percentage on this range?\n\tfunction isPercentage ( range, value ) {\n\t\treturn ((value * ( range[1] - range[0] )) / 100) + range[0];\n\t}\n\n\n// Range conversion\n\n\tfunction getJ ( value, arr ) {\n\n\t\tvar j = 1;\n\n\t\twhile ( value >= arr[j] ){\n\t\t\tj += 1;\n\t\t}\n\n\t\treturn j;\n\t}\n\n\t// (percentage) Input a value, find where, on a scale of 0-100, it applies.\n\tfunction toStepping ( xVal, xPct, value ) {\n\n\t\tif ( value >= xVal.slice(-1)[0] ){\n\t\t\treturn 100;\n\t\t}\n\n\t\tvar j = getJ( value, xVal ), va, vb, pa, pb;\n\n\t\tva = xVal[j-1];\n\t\tvb = xVal[j];\n\t\tpa = xPct[j-1];\n\t\tpb = xPct[j];\n\n\t\treturn pa + (toPercentage([va, vb], value) / subRangeRatio (pa, pb));\n\t}\n\n\t// (value) Input a percentage, find where it is on the specified range.\n\tfunction fromStepping ( xVal, xPct, value ) {\n\n\t\t// There is no range group that fits 100\n\t\tif ( value >= 100 ){\n\t\t\treturn xVal.slice(-1)[0];\n\t\t}\n\n\t\tvar j = getJ( value, xPct ), va, vb, pa, pb;\n\n\t\tva = xVal[j-1];\n\t\tvb = xVal[j];\n\t\tpa = xPct[j-1];\n\t\tpb = xPct[j];\n\n\t\treturn isPercentage([va, vb], (value - pa) * subRangeRatio (pa, pb));\n\t}\n\n\t// (percentage) Get the step that applies at a certain value.\n\tfunction getStep ( xPct, xSteps, snap, value ) {\n\n\t\tif ( value === 100 ) {\n\t\t\treturn value;\n\t\t}\n\n\t\tvar j = getJ( value, xPct ), a, b;\n\n\t\t// If 'snap' is set, steps are used as fixed points on the slider.\n\t\tif ( snap ) {\n\n\t\t\ta = xPct[j-1];\n\t\t\tb = xPct[j];\n\n\t\t\t// Find the closest position, a or b.\n\t\t\tif ((value - a) > ((b-a)/2)){\n\t\t\t\treturn b;\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\n\t\tif ( !xSteps[j-1] ){\n\t\t\treturn value;\n\t\t}\n\n\t\treturn xPct[j-1] + closest(\n\t\t\tvalue - xPct[j-1],\n\t\t\txSteps[j-1]\n\t\t);\n\t}\n\n\n// Entry parsing\n\n\tfunction handleEntryPoint ( index, value, that ) {\n\n\t\tvar percentage;\n\n\t\t// Wrap numerical input in an array.\n\t\tif ( typeof value === \"number\" ) {\n\t\t\tvalue = [value];\n\t\t}\n\n\t\t// Reject any invalid input, by testing whether value is an array.\n\t\tif ( !Array.isArray(value) ){\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'range' contains invalid value.\");\n\t\t}\n\n\t\t// Covert min/max syntax to 0 and 100.\n\t\tif ( index === 'min' ) {\n\t\t\tpercentage = 0;\n\t\t} else if ( index === 'max' ) {\n\t\t\tpercentage = 100;\n\t\t} else {\n\t\t\tpercentage = parseFloat( index );\n\t\t}\n\n\t\t// Check for correct input.\n\t\tif ( !isNumeric( percentage ) || !isNumeric( value[0] ) ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'range' value isn't numeric.\");\n\t\t}\n\n\t\t// Store values.\n\t\tthat.xPct.push( percentage );\n\t\tthat.xVal.push( value[0] );\n\n\t\t// NaN will evaluate to false too, but to keep\n\t\t// logging clear, set step explicitly. Make sure\n\t\t// not to override the 'step' setting with false.\n\t\tif ( !percentage ) {\n\t\t\tif ( !isNaN( value[1] ) ) {\n\t\t\t\tthat.xSteps[0] = value[1];\n\t\t\t}\n\t\t} else {\n\t\t\tthat.xSteps.push( isNaN(value[1]) ? false : value[1] );\n\t\t}\n\n\t\tthat.xHighestCompleteStep.push(0);\n\t}\n\n\tfunction handleStepPoint ( i, n, that ) {\n\n\t\t// Ignore 'false' stepping.\n\t\tif ( !n ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Factor to range ratio\n\t\tthat.xSteps[i] = fromPercentage([\n\t\t\t that.xVal[i]\n\t\t\t,that.xVal[i+1]\n\t\t], n) / subRangeRatio (\n\t\t\tthat.xPct[i],\n\t\t\tthat.xPct[i+1] );\n\n\t\tvar totalSteps = (that.xVal[i+1] - that.xVal[i]) / that.xNumSteps[i];\n\t\tvar highestStep = Math.ceil(Number(totalSteps.toFixed(3)) - 1);\n\t\tvar step = that.xVal[i] + (that.xNumSteps[i] * highestStep);\n\n\t\tthat.xHighestCompleteStep[i] = step;\n\t}\n\n\n// Interface\n\n\tfunction Spectrum ( entry, snap, singleStep ) {\n\n\t\tthis.xPct = [];\n\t\tthis.xVal = [];\n\t\tthis.xSteps = [ singleStep || false ];\n\t\tthis.xNumSteps = [ false ];\n\t\tthis.xHighestCompleteStep = [];\n\n\t\tthis.snap = snap;\n\n\t\tvar index, ordered = [ /* [0, 'min'], [1, '50%'], [2, 'max'] */ ];\n\n\t\t// Map the object keys to an array.\n\t\tfor ( index in entry ) {\n\t\t\tif ( entry.hasOwnProperty(index) ) {\n\t\t\t\tordered.push([entry[index], index]);\n\t\t\t}\n\t\t}\n\n\t\t// Sort all entries by value (numeric sort).\n\t\tif ( ordered.length && typeof ordered[0][0] === \"object\" ) {\n\t\t\tordered.sort(function(a, b) { return a[0][0] - b[0][0]; });\n\t\t} else {\n\t\t\tordered.sort(function(a, b) { return a[0] - b[0]; });\n\t\t}\n\n\n\t\t// Convert all entries to subranges.\n\t\tfor ( index = 0; index < ordered.length; index++ ) {\n\t\t\thandleEntryPoint(ordered[index][1], ordered[index][0], this);\n\t\t}\n\n\t\t// Store the actual step values.\n\t\t// xSteps is sorted in the same order as xPct and xVal.\n\t\tthis.xNumSteps = this.xSteps.slice(0);\n\n\t\t// Convert all numeric steps to the percentage of the subrange they represent.\n\t\tfor ( index = 0; index < this.xNumSteps.length; index++ ) {\n\t\t\thandleStepPoint(index, this.xNumSteps[index], this);\n\t\t}\n\t}\n\n\tSpectrum.prototype.getMargin = function ( value ) {\n\n\t\tvar step = this.xNumSteps[0];\n\n\t\tif ( step && ((value / step) % 1) !== 0 ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'limit', 'margin' and 'padding' must be divisible by step.\");\n\t\t}\n\n\t\treturn this.xPct.length === 2 ? fromPercentage(this.xVal, value) : false;\n\t};\n\n\tSpectrum.prototype.toStepping = function ( value ) {\n\n\t\tvalue = toStepping( this.xVal, this.xPct, value );\n\n\t\treturn value;\n\t};\n\n\tSpectrum.prototype.fromStepping = function ( value ) {\n\n\t\treturn fromStepping( this.xVal, this.xPct, value );\n\t};\n\n\tSpectrum.prototype.getStep = function ( value ) {\n\n\t\tvalue = getStep(this.xPct, this.xSteps, this.snap, value );\n\n\t\treturn value;\n\t};\n\n\tSpectrum.prototype.getNearbySteps = function ( value ) {\n\n\t\tvar j = getJ(value, this.xPct);\n\n\t\treturn {\n\t\t\tstepBefore: { startValue: this.xVal[j-2], step: this.xNumSteps[j-2], highestStep: this.xHighestCompleteStep[j-2] },\n\t\t\tthisStep: { startValue: this.xVal[j-1], step: this.xNumSteps[j-1], highestStep: this.xHighestCompleteStep[j-1] },\n\t\t\tstepAfter: { startValue: this.xVal[j-0], step: this.xNumSteps[j-0], highestStep: this.xHighestCompleteStep[j-0] }\n\t\t};\n\t};\n\n\tSpectrum.prototype.countStepDecimals = function () {\n\t\tvar stepDecimals = this.xNumSteps.map(countDecimals);\n\t\treturn Math.max.apply(null, stepDecimals);\n \t};\n\n\t// Outside testing\n\tSpectrum.prototype.convert = function ( value ) {\n\t\treturn this.getStep(this.toStepping(value));\n\t};\n\n/*\tEvery input option is tested and parsed. This'll prevent\n\tendless validation in internal methods. These tests are\n\tstructured with an item for every option available. An\n\toption can be marked as required by setting the 'r' flag.\n\tThe testing function is provided with three arguments:\n\t\t- The provided value for the option;\n\t\t- A reference to the options object;\n\t\t- The name for the option;\n\n\tThe testing function returns false when an error is detected,\n\tor true when everything is OK. It can also modify the option\n\tobject, to make sure all values can be correctly looped elsewhere. */\n\n\tvar defaultFormatter = { 'to': function( value ){\n\t\treturn value !== undefined && value.toFixed(2);\n\t}, 'from': Number };\n\n\tfunction validateFormat ( entry ) {\n\n\t\t// Any object with a to and from method is supported.\n\t\tif ( isValidFormatter(entry) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'format' requires 'to' and 'from' methods.\");\n\t}\n\n\tfunction testStep ( parsed, entry ) {\n\n\t\tif ( !isNumeric( entry ) ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'step' is not numeric.\");\n\t\t}\n\n\t\t// The step option can still be used to set stepping\n\t\t// for linear sliders. Overwritten if set in 'range'.\n\t\tparsed.singleStep = entry;\n\t}\n\n\tfunction testRange ( parsed, entry ) {\n\n\t\t// Filter incorrect input.\n\t\tif ( typeof entry !== 'object' || Array.isArray(entry) ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'range' is not an object.\");\n\t\t}\n\n\t\t// Catch missing start or end.\n\t\tif ( entry.min === undefined || entry.max === undefined ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): Missing 'min' or 'max' in 'range'.\");\n\t\t}\n\n\t\t// Catch equal start or end.\n\t\tif ( entry.min === entry.max ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'range' 'min' and 'max' cannot be equal.\");\n\t\t}\n\n\t\tparsed.spectrum = new Spectrum(entry, parsed.snap, parsed.singleStep);\n\t}\n\n\tfunction testStart ( parsed, entry ) {\n\n\t\tentry = asArray(entry);\n\n\t\t// Validate input. Values aren't tested, as the public .val method\n\t\t// will always provide a valid location.\n\t\tif ( !Array.isArray( entry ) || !entry.length ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'start' option is incorrect.\");\n\t\t}\n\n\t\t// Store the number of handles.\n\t\tparsed.handles = entry.length;\n\n\t\t// When the slider is initialized, the .val method will\n\t\t// be called with the start options.\n\t\tparsed.start = entry;\n\t}\n\n\tfunction testSnap ( parsed, entry ) {\n\n\t\t// Enforce 100% stepping within subranges.\n\t\tparsed.snap = entry;\n\n\t\tif ( typeof entry !== 'boolean' ){\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'snap' option must be a boolean.\");\n\t\t}\n\t}\n\n\tfunction testAnimate ( parsed, entry ) {\n\n\t\t// Enforce 100% stepping within subranges.\n\t\tparsed.animate = entry;\n\n\t\tif ( typeof entry !== 'boolean' ){\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'animate' option must be a boolean.\");\n\t\t}\n\t}\n\n\tfunction testAnimationDuration ( parsed, entry ) {\n\n\t\tparsed.animationDuration = entry;\n\n\t\tif ( typeof entry !== 'number' ){\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'animationDuration' option must be a number.\");\n\t\t}\n\t}\n\n\tfunction testConnect ( parsed, entry ) {\n\n\t\tvar connect = [false];\n\t\tvar i;\n\n\t\t// Map legacy options\n\t\tif ( entry === 'lower' ) {\n\t\t\tentry = [true, false];\n\t\t}\n\n\t\telse if ( entry === 'upper' ) {\n\t\t\tentry = [false, true];\n\t\t}\n\n\t\t// Handle boolean options\n\t\tif ( entry === true || entry === false ) {\n\n\t\t\tfor ( i = 1; i < parsed.handles; i++ ) {\n\t\t\t\tconnect.push(entry);\n\t\t\t}\n\n\t\t\tconnect.push(false);\n\t\t}\n\n\t\t// Reject invalid input\n\t\telse if ( !Array.isArray( entry ) || !entry.length || entry.length !== parsed.handles + 1 ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'connect' option doesn't match handle count.\");\n\t\t}\n\n\t\telse {\n\t\t\tconnect = entry;\n\t\t}\n\n\t\tparsed.connect = connect;\n\t}\n\n\tfunction testOrientation ( parsed, entry ) {\n\n\t\t// Set orientation to an a numerical value for easy\n\t\t// array selection.\n\t\tswitch ( entry ){\n\t\t  case 'horizontal':\n\t\t\tparsed.ort = 0;\n\t\t\tbreak;\n\t\t  case 'vertical':\n\t\t\tparsed.ort = 1;\n\t\t\tbreak;\n\t\t  default:\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'orientation' option is invalid.\");\n\t\t}\n\t}\n\n\tfunction testMargin ( parsed, entry ) {\n\n\t\tif ( !isNumeric(entry) ){\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'margin' option must be numeric.\");\n\t\t}\n\n\t\t// Issue #582\n\t\tif ( entry === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tparsed.margin = parsed.spectrum.getMargin(entry);\n\n\t\tif ( !parsed.margin ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'margin' option is only supported on linear sliders.\");\n\t\t}\n\t}\n\n\tfunction testLimit ( parsed, entry ) {\n\n\t\tif ( !isNumeric(entry) ){\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'limit' option must be numeric.\");\n\t\t}\n\n\t\tparsed.limit = parsed.spectrum.getMargin(entry);\n\n\t\tif ( !parsed.limit || parsed.handles < 2 ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'limit' option is only supported on linear sliders with 2 or more handles.\");\n\t\t}\n\t}\n\n\tfunction testPadding ( parsed, entry ) {\n\n\t\tif ( !isNumeric(entry) && !Array.isArray(entry) ){\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'padding' option must be numeric or array of exactly 2 numbers.\");\n\t\t}\n\n\t\tif ( Array.isArray(entry) && !(entry.length == 2 || isNumeric(entry[0]) || isNumeric(entry[1])) ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'padding' option must be numeric or array of exactly 2 numbers.\");\n\t\t}\n\n\t\tif ( entry === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Array.isArray(entry) ) {\n\t\t\tentry = [entry, entry];\n\t\t}\n\n\t\t// 'getMargin' returns false for invalid values.\n\t\tparsed.padding = [parsed.spectrum.getMargin(entry[0]), parsed.spectrum.getMargin(entry[1])];\n\n\t\tif ( parsed.padding[0] === false || parsed.padding[1] === false ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'padding' option is only supported on linear sliders.\");\n\t\t}\n\n\t\tif ( parsed.padding[0] < 0 || parsed.padding[1] < 0 ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'padding' option must be a positive number(s).\");\n\t\t}\n\n\t\tif ( parsed.padding[0] >= 50 || parsed.padding[1] >= 50 ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'padding' option must be less than half the range.\");\n\t\t}\n\t}\n\n\tfunction testDirection ( parsed, entry ) {\n\n\t\t// Set direction as a numerical value for easy parsing.\n\t\t// Invert connection for RTL sliders, so that the proper\n\t\t// handles get the connect/background classes.\n\t\tswitch ( entry ) {\n\t\t  case 'ltr':\n\t\t\tparsed.dir = 0;\n\t\t\tbreak;\n\t\t  case 'rtl':\n\t\t\tparsed.dir = 1;\n\t\t\tbreak;\n\t\t  default:\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'direction' option was not recognized.\");\n\t\t}\n\t}\n\n\tfunction testBehaviour ( parsed, entry ) {\n\n\t\t// Make sure the input is a string.\n\t\tif ( typeof entry !== 'string' ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'behaviour' must be a string containing options.\");\n\t\t}\n\n\t\t// Check if the string contains any keywords.\n\t\t// None are required.\n\t\tvar tap = entry.indexOf('tap') >= 0;\n\t\tvar drag = entry.indexOf('drag') >= 0;\n\t\tvar fixed = entry.indexOf('fixed') >= 0;\n\t\tvar snap = entry.indexOf('snap') >= 0;\n\t\tvar hover = entry.indexOf('hover') >= 0;\n\n\t\tif ( fixed ) {\n\n\t\t\tif ( parsed.handles !== 2 ) {\n\t\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'fixed' behaviour must be used with 2 handles\");\n\t\t\t}\n\n\t\t\t// Use margin to enforce fixed state\n\t\t\ttestMargin(parsed, parsed.start[1] - parsed.start[0]);\n\t\t}\n\n\t\tparsed.events = {\n\t\t\ttap: tap || snap,\n\t\t\tdrag: drag,\n\t\t\tfixed: fixed,\n\t\t\tsnap: snap,\n\t\t\thover: hover\n\t\t};\n\t}\n\n\tfunction testTooltips ( parsed, entry ) {\n\n\t\tif ( entry === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\telse if ( entry === true ) {\n\n\t\t\tparsed.tooltips = [];\n\n\t\t\tfor ( var i = 0; i < parsed.handles; i++ ) {\n\t\t\t\tparsed.tooltips.push(true);\n\t\t\t}\n\t\t}\n\n\t\telse {\n\n\t\t\tparsed.tooltips = asArray(entry);\n\n\t\t\tif ( parsed.tooltips.length !== parsed.handles ) {\n\t\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): must pass a formatter for all handles.\");\n\t\t\t}\n\n\t\t\tparsed.tooltips.forEach(function(formatter){\n\t\t\t\tif ( typeof formatter !== 'boolean' && (typeof formatter !== 'object' || typeof formatter.to !== 'function') ) {\n\t\t\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'tooltips' must be passed a formatter or 'false'.\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction testAriaFormat ( parsed, entry ) {\n\t\tparsed.ariaFormat = entry;\n\t\tvalidateFormat(entry);\n\t}\n\n\tfunction testFormat ( parsed, entry ) {\n\t\tparsed.format = entry;\n\t\tvalidateFormat(entry);\n\t}\n\n\tfunction testCssPrefix ( parsed, entry ) {\n\n\t\tif ( entry !== undefined && typeof entry !== 'string' && entry !== false ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'cssPrefix' must be a string or `false`.\");\n\t\t}\n\n\t\tparsed.cssPrefix = entry;\n\t}\n\n\tfunction testCssClasses ( parsed, entry ) {\n\n\t\tif ( entry !== undefined && typeof entry !== 'object' ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'cssClasses' must be an object.\");\n\t\t}\n\n\t\tif ( typeof parsed.cssPrefix === 'string' ) {\n\t\t\tparsed.cssClasses = {};\n\n\t\t\tfor ( var key in entry ) {\n\t\t\t\tif ( !entry.hasOwnProperty(key) ) { continue; }\n\n\t\t\t\tparsed.cssClasses[key] = parsed.cssPrefix + entry[key];\n\t\t\t}\n\t\t} else {\n\t\t\tparsed.cssClasses = entry;\n\t\t}\n\t}\n\n\t// Test all developer settings and parse to assumption-safe values.\n\tfunction testOptions ( options ) {\n\n\t\t// To prove a fix for #537, freeze options here.\n\t\t// If the object is modified, an error will be thrown.\n\t\t// Object.freeze(options);\n\n\t\tvar parsed = {\n\t\t\tmargin: 0,\n\t\t\tlimit: 0,\n\t\t\tpadding: 0,\n\t\t\tanimate: true,\n\t\t\tanimationDuration: 300,\n\t\t\tariaFormat: defaultFormatter,\n\t\t\tformat: defaultFormatter\n\t\t};\n\n\t\t// Tests are executed in the order they are presented here.\n\t\tvar tests = {\n\t\t\t'step': { r: false, t: testStep },\n\t\t\t'start': { r: true, t: testStart },\n\t\t\t'connect': { r: true, t: testConnect },\n\t\t\t'direction': { r: true, t: testDirection },\n\t\t\t'snap': { r: false, t: testSnap },\n\t\t\t'animate': { r: false, t: testAnimate },\n\t\t\t'animationDuration': { r: false, t: testAnimationDuration },\n\t\t\t'range': { r: true, t: testRange },\n\t\t\t'orientation': { r: false, t: testOrientation },\n\t\t\t'margin': { r: false, t: testMargin },\n\t\t\t'limit': { r: false, t: testLimit },\n\t\t\t'padding': { r: false, t: testPadding },\n\t\t\t'behaviour': { r: true, t: testBehaviour },\n\t\t\t'ariaFormat': { r: false, t: testAriaFormat },\n\t\t\t'format': { r: false, t: testFormat },\n\t\t\t'tooltips': { r: false, t: testTooltips },\n\t\t\t'cssPrefix': { r: false, t: testCssPrefix },\n\t\t\t'cssClasses': { r: false, t: testCssClasses }\n\t\t};\n\n\t\tvar defaults = {\n\t\t\t'connect': false,\n\t\t\t'direction': 'ltr',\n\t\t\t'behaviour': 'tap',\n\t\t\t'orientation': 'horizontal',\n\t\t\t'cssPrefix' : 'noUi-',\n\t\t\t'cssClasses': {\n\t\t\t\ttarget: 'target',\n\t\t\t\tbase: 'base',\n\t\t\t\torigin: 'origin',\n\t\t\t\thandle: 'handle',\n\t\t\t\thandleLower: 'handle-lower',\n\t\t\t\thandleUpper: 'handle-upper',\n\t\t\t\thorizontal: 'horizontal',\n\t\t\t\tvertical: 'vertical',\n\t\t\t\tbackground: 'background',\n\t\t\t\tconnect: 'connect',\n\t\t\t\tconnects: 'connects',\n\t\t\t\tltr: 'ltr',\n\t\t\t\trtl: 'rtl',\n\t\t\t\tdraggable: 'draggable',\n\t\t\t\tdrag: 'state-drag',\n\t\t\t\ttap: 'state-tap',\n\t\t\t\tactive: 'active',\n\t\t\t\ttooltip: 'tooltip',\n\t\t\t\tpips: 'pips',\n\t\t\t\tpipsHorizontal: 'pips-horizontal',\n\t\t\t\tpipsVertical: 'pips-vertical',\n\t\t\t\tmarker: 'marker',\n\t\t\t\tmarkerHorizontal: 'marker-horizontal',\n\t\t\t\tmarkerVertical: 'marker-vertical',\n\t\t\t\tmarkerNormal: 'marker-normal',\n\t\t\t\tmarkerLarge: 'marker-large',\n\t\t\t\tmarkerSub: 'marker-sub',\n\t\t\t\tvalue: 'value',\n\t\t\t\tvalueHorizontal: 'value-horizontal',\n\t\t\t\tvalueVertical: 'value-vertical',\n\t\t\t\tvalueNormal: 'value-normal',\n\t\t\t\tvalueLarge: 'value-large',\n\t\t\t\tvalueSub: 'value-sub'\n\t\t\t}\n\t\t};\n\n\t\t// AriaFormat defaults to regular format, if any.\n\t\tif ( options.format && !options.ariaFormat ) {\n\t\t\toptions.ariaFormat = options.format;\n\t\t}\n\n\t\t// Run all options through a testing mechanism to ensure correct\n\t\t// input. It should be noted that options might get modified to\n\t\t// be handled properly. E.g. wrapping integers in arrays.\n\t\tObject.keys(tests).forEach(function( name ){\n\n\t\t\t// If the option isn't set, but it is required, throw an error.\n\t\t\tif ( options[name] === undefined && defaults[name] === undefined ) {\n\n\t\t\t\tif ( tests[name].r ) {\n\t\t\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): '\" + name + \"' is required.\");\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\ttests[name].t( parsed, options[name] === undefined ? defaults[name] : options[name] );\n\t\t});\n\n\t\t// Forward pips options\n\t\tparsed.pips = options.pips;\n\n\t\t// All recent browsers accept unprefixed transform.\n\t\t// We need -ms- for IE9 and -webkit- for older Android;\n\t\t// Assume use of -webkit- if unprefixed and -ms- are not supported.\n\t\t// https://caniuse.com/#feat=transforms2d\n\t\tvar d = document.createElement(\"div\");\n\t\tvar msPrefix = d.style.msTransform !== undefined;\n\t\tvar noPrefix = d.style.transform !== undefined;\n\n\t\tparsed.transformRule = noPrefix ? 'transform' : (msPrefix ? 'msTransform' : 'webkitTransform');\n\n\t\t// Pips don't move, so we can place them using left/top.\n\t\tvar styles = [['left', 'top'], ['right', 'bottom']];\n\n\t\tparsed.style = styles[parsed.dir][parsed.ort];\n\n\t\treturn parsed;\n\t}\n\n\nfunction closure ( target, options, originalOptions ){\n\n\tvar actions = getActions();\n\tvar supportsTouchActionNone = getSupportsTouchActionNone();\n\tvar supportsPassive = supportsTouchActionNone && getSupportsPassive();\n\n\t// All variables local to 'closure' are prefixed with 'scope_'\n\tvar scope_Target = target;\n\tvar scope_Locations = [];\n\tvar scope_Base;\n\tvar scope_Handles;\n\tvar scope_HandleNumbers = [];\n\tvar scope_ActiveHandlesCount = 0;\n\tvar scope_Connects;\n\tvar scope_Spectrum = options.spectrum;\n\tvar scope_Values = [];\n\tvar scope_Events = {};\n\tvar scope_Self;\n\tvar scope_Pips;\n\tvar scope_Document = target.ownerDocument;\n\tvar scope_DocumentElement = scope_Document.documentElement;\n\tvar scope_Body = scope_Document.body;\n\n\n\t// Creates a node, adds it to target, returns the new node.\n\tfunction addNodeTo ( target, className ) {\n\n\t\tvar div = scope_Document.createElement('div');\n\n\t\tif ( className ) {\n\t\t\taddClass(div, className);\n\t\t}\n\n\t\ttarget.appendChild(div);\n\n\t\treturn div;\n\t}\n\n\t// Append a origin to the base\n\tfunction addOrigin ( base, handleNumber ) {\n\n\t\tvar origin = addNodeTo(base, options.cssClasses.origin);\n\t\tvar handle = addNodeTo(origin, options.cssClasses.handle);\n\n\t\thandle.setAttribute('data-handle', handleNumber);\n\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex\n\t\t// 0 = focusable and reachable\n\t\thandle.setAttribute('tabindex', '0');\n\t\thandle.setAttribute('role', 'slider');\n\t\thandle.setAttribute('aria-orientation', options.ort ? 'vertical' : 'horizontal');\n\n\t\tif ( handleNumber === 0 ) {\n\t\t\taddClass(handle, options.cssClasses.handleLower);\n\t\t}\n\n\t\telse if ( handleNumber === options.handles - 1 ) {\n\t\t\taddClass(handle, options.cssClasses.handleUpper);\n\t\t}\n\n\t\treturn origin;\n\t}\n\n\t// Insert nodes for connect elements\n\tfunction addConnect ( base, add ) {\n\n\t\tif ( !add ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn addNodeTo(base, options.cssClasses.connect);\n\t}\n\n\t// Add handles to the slider base.\n\tfunction addElements ( connectOptions, base ) {\n\n\t\tvar connectBase = addNodeTo(base, options.cssClasses.connects);\n\n\t\tscope_Handles = [];\n\t\tscope_Connects = [];\n\n\t\tscope_Connects.push(addConnect(connectBase, connectOptions[0]));\n\n\t\t// [::::O====O====O====]\n\t\t// connectOptions = [0, 1, 1, 1]\n\n\t\tfor ( var i = 0; i < options.handles; i++ ) {\n\t\t\t// Keep a list of all added handles.\n\t\t\tscope_Handles.push(addOrigin(base, i));\n\t\t\tscope_HandleNumbers[i] = i;\n\t\t\tscope_Connects.push(addConnect(connectBase, connectOptions[i + 1]));\n\t\t}\n\t}\n\n\t// Initialize a single slider.\n\tfunction addSlider ( target ) {\n\n\t\t// Apply classes and data to the target.\n\t\taddClass(target, options.cssClasses.target);\n\n\t\tif ( options.dir === 0 ) {\n\t\t\taddClass(target, options.cssClasses.ltr);\n\t\t} else {\n\t\t\taddClass(target, options.cssClasses.rtl);\n\t\t}\n\n\t\tif ( options.ort === 0 ) {\n\t\t\taddClass(target, options.cssClasses.horizontal);\n\t\t} else {\n\t\t\taddClass(target, options.cssClasses.vertical);\n\t\t}\n\n\t\tscope_Base = addNodeTo(target, options.cssClasses.base);\n\t}\n\n\n\tfunction addTooltip ( handle, handleNumber ) {\n\n\t\tif ( !options.tooltips[handleNumber] ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn addNodeTo(handle.firstChild, options.cssClasses.tooltip);\n\t}\n\n\t// The tooltips option is a shorthand for using the 'update' event.\n\tfunction tooltips ( ) {\n\n\t\t// Tooltips are added with options.tooltips in original order.\n\t\tvar tips = scope_Handles.map(addTooltip);\n\n\t\tbindEvent('update', function(values, handleNumber, unencoded) {\n\n\t\t\tif ( !tips[handleNumber] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar formattedValue = values[handleNumber];\n\n\t\t\tif ( options.tooltips[handleNumber] !== true ) {\n\t\t\t\tformattedValue = options.tooltips[handleNumber].to(unencoded[handleNumber]);\n\t\t\t}\n\n\t\t\ttips[handleNumber].innerHTML = formattedValue;\n\t\t});\n\t}\n\n\n\tfunction aria ( ) {\n\n\t\tbindEvent('update', function ( values, handleNumber, unencoded, tap, positions ) {\n\n\t\t\t// Update Aria Values for all handles, as a change in one changes min and max values for the next.\n\t\t\tscope_HandleNumbers.forEach(function( handleNumber ){\n\n\t\t\t\tvar handle = scope_Handles[handleNumber];\n\n\t\t\t\tvar min = checkHandlePosition(scope_Locations, handleNumber, 0, true, true, true);\n\t\t\t\tvar max = checkHandlePosition(scope_Locations, handleNumber, 100, true, true, true);\n\n\t\t\t\tvar now = positions[handleNumber];\n\t\t\t\tvar text = options.ariaFormat.to(unencoded[handleNumber]);\n\n\t\t\t\thandle.children[0].setAttribute('aria-valuemin', min.toFixed(1));\n\t\t\t\thandle.children[0].setAttribute('aria-valuemax', max.toFixed(1));\n\t\t\t\thandle.children[0].setAttribute('aria-valuenow', now.toFixed(1));\n\t\t\t\thandle.children[0].setAttribute('aria-valuetext', text);\n\t\t\t});\n\t\t});\n\t}\n\n\n\tfunction getGroup ( mode, values, stepped ) {\n\n\t\t// Use the range.\n\t\tif ( mode === 'range' || mode === 'steps' ) {\n\t\t\treturn scope_Spectrum.xVal;\n\t\t}\n\n\t\tif ( mode === 'count' ) {\n\n\t\t\tif ( values < 2 ) {\n\t\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): 'values' (>= 2) required for mode 'count'.\");\n\t\t\t}\n\n\t\t\t// Divide 0 - 100 in 'count' parts.\n\t\t\tvar interval = values - 1;\n\t\t\tvar spread = ( 100 / interval );\n\n\t\t\tvalues = [];\n\n\t\t\t// List these parts and have them handled as 'positions'.\n\t\t\twhile ( interval-- ) {\n\t\t\t\tvalues[ interval ] = ( interval * spread );\n\t\t\t}\n\n\t\t\tvalues.push(100);\n\n\t\t\tmode = 'positions';\n\t\t}\n\n\t\tif ( mode === 'positions' ) {\n\n\t\t\t// Map all percentages to on-range values.\n\t\t\treturn values.map(function( value ){\n\t\t\t\treturn scope_Spectrum.fromStepping( stepped ? scope_Spectrum.getStep( value ) : value );\n\t\t\t});\n\t\t}\n\n\t\tif ( mode === 'values' ) {\n\n\t\t\t// If the value must be stepped, it needs to be converted to a percentage first.\n\t\t\tif ( stepped ) {\n\n\t\t\t\treturn values.map(function( value ){\n\n\t\t\t\t\t// Convert to percentage, apply step, return to value.\n\t\t\t\t\treturn scope_Spectrum.fromStepping( scope_Spectrum.getStep( scope_Spectrum.toStepping( value ) ) );\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\t// Otherwise, we can simply use the values.\n\t\t\treturn values;\n\t\t}\n\t}\n\n\tfunction generateSpread ( density, mode, group ) {\n\n\t\tfunction safeIncrement(value, increment) {\n\t\t\t// Avoid floating point variance by dropping the smallest decimal places.\n\t\t\treturn (value + increment).toFixed(7) / 1;\n\t\t}\n\n\t\tvar indexes = {};\n\t\tvar firstInRange = scope_Spectrum.xVal[0];\n\t\tvar lastInRange = scope_Spectrum.xVal[scope_Spectrum.xVal.length-1];\n\t\tvar ignoreFirst = false;\n\t\tvar ignoreLast = false;\n\t\tvar prevPct = 0;\n\n\t\t// Create a copy of the group, sort it and filter away all duplicates.\n\t\tgroup = unique(group.slice().sort(function(a, b){ return a - b; }));\n\n\t\t// Make sure the range starts with the first element.\n\t\tif ( group[0] !== firstInRange ) {\n\t\t\tgroup.unshift(firstInRange);\n\t\t\tignoreFirst = true;\n\t\t}\n\n\t\t// Likewise for the last one.\n\t\tif ( group[group.length - 1] !== lastInRange ) {\n\t\t\tgroup.push(lastInRange);\n\t\t\tignoreLast = true;\n\t\t}\n\n\t\tgroup.forEach(function ( current, index ) {\n\n\t\t\t// Get the current step and the lower + upper positions.\n\t\t\tvar step;\n\t\t\tvar i;\n\t\t\tvar q;\n\t\t\tvar low = current;\n\t\t\tvar high = group[index+1];\n\t\t\tvar newPct;\n\t\t\tvar pctDifference;\n\t\t\tvar pctPos;\n\t\t\tvar type;\n\t\t\tvar steps;\n\t\t\tvar realSteps;\n\t\t\tvar stepsize;\n\n\t\t\t// When using 'steps' mode, use the provided steps.\n\t\t\t// Otherwise, we'll step on to the next subrange.\n\t\t\tif ( mode === 'steps' ) {\n\t\t\t\tstep = scope_Spectrum.xNumSteps[ index ];\n\t\t\t}\n\n\t\t\t// Default to a 'full' step.\n\t\t\tif ( !step ) {\n\t\t\t\tstep = high-low;\n\t\t\t}\n\n\t\t\t// Low can be 0, so test for false. If high is undefined,\n\t\t\t// we are at the last subrange. Index 0 is already handled.\n\t\t\tif ( low === false || high === undefined ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Make sure step isn't 0, which would cause an infinite loop (#654)\n\t\t\tstep = Math.max(step, 0.0000001);\n\n\t\t\t// Find all steps in the subrange.\n\t\t\tfor ( i = low; i <= high; i = safeIncrement(i, step) ) {\n\n\t\t\t\t// Get the percentage value for the current step,\n\t\t\t\t// calculate the size for the subrange.\n\t\t\t\tnewPct = scope_Spectrum.toStepping( i );\n\t\t\t\tpctDifference = newPct - prevPct;\n\n\t\t\t\tsteps = pctDifference / density;\n\t\t\t\trealSteps = Math.round(steps);\n\n\t\t\t\t// This ratio represents the amount of percentage-space a point indicates.\n\t\t\t\t// For a density 1 the points/percentage = 1. For density 2, that percentage needs to be re-devided.\n\t\t\t\t// Round the percentage offset to an even number, then divide by two\n\t\t\t\t// to spread the offset on both sides of the range.\n\t\t\t\tstepsize = pctDifference/realSteps;\n\n\t\t\t\t// Divide all points evenly, adding the correct number to this subrange.\n\t\t\t\t// Run up to <= so that 100% gets a point, event if ignoreLast is set.\n\t\t\t\tfor ( q = 1; q <= realSteps; q += 1 ) {\n\n\t\t\t\t\t// The ratio between the rounded value and the actual size might be ~1% off.\n\t\t\t\t\t// Correct the percentage offset by the number of points\n\t\t\t\t\t// per subrange. density = 1 will result in 100 points on the\n\t\t\t\t\t// full range, 2 for 50, 4 for 25, etc.\n\t\t\t\t\tpctPos = prevPct + ( q * stepsize );\n\t\t\t\t\tindexes[pctPos.toFixed(5)] = ['x', 0];\n\t\t\t\t}\n\n\t\t\t\t// Determine the point type.\n\t\t\t\ttype = (group.indexOf(i) > -1) ? 1 : ( mode === 'steps' ? 2 : 0 );\n\n\t\t\t\t// Enforce the 'ignoreFirst' option by overwriting the type for 0.\n\t\t\t\tif ( !index && ignoreFirst ) {\n\t\t\t\t\ttype = 0;\n\t\t\t\t}\n\n\t\t\t\tif ( !(i === high && ignoreLast)) {\n\t\t\t\t\t// Mark the 'type' of this point. 0 = plain, 1 = real value, 2 = step value.\n\t\t\t\t\tindexes[newPct.toFixed(5)] = [i, type];\n\t\t\t\t}\n\n\t\t\t\t// Update the percentage count.\n\t\t\t\tprevPct = newPct;\n\t\t\t}\n\t\t});\n\n\t\treturn indexes;\n\t}\n\n\tfunction addMarking ( spread, filterFunc, formatter ) {\n\n\t\tvar element = scope_Document.createElement('div');\n\n\t\tvar valueSizeClasses = [\n\t\t\toptions.cssClasses.valueNormal,\n\t\t\toptions.cssClasses.valueLarge,\n\t\t\toptions.cssClasses.valueSub\n\t\t];\n\t\tvar markerSizeClasses = [\n\t\t\toptions.cssClasses.markerNormal,\n\t\t\toptions.cssClasses.markerLarge,\n\t\t\toptions.cssClasses.markerSub\n\t\t];\n\t\tvar valueOrientationClasses = [\n\t\t\toptions.cssClasses.valueHorizontal,\n\t\t\toptions.cssClasses.valueVertical\n\t\t];\n\t\tvar markerOrientationClasses = [\n\t\t\toptions.cssClasses.markerHorizontal,\n\t\t\toptions.cssClasses.markerVertical\n\t\t];\n\n\t\taddClass(element, options.cssClasses.pips);\n\t\taddClass(element, options.ort === 0 ? options.cssClasses.pipsHorizontal : options.cssClasses.pipsVertical);\n\n\t\tfunction getClasses( type, source ){\n\t\t\tvar a = source === options.cssClasses.value;\n\t\t\tvar orientationClasses = a ? valueOrientationClasses : markerOrientationClasses;\n\t\t\tvar sizeClasses = a ? valueSizeClasses : markerSizeClasses;\n\n\t\t\treturn source + ' ' + orientationClasses[options.ort] + ' ' + sizeClasses[type];\n\t\t}\n\n\t\tfunction addSpread ( offset, values ){\n\n\t\t\t// Apply the filter function, if it is set.\n\t\t\tvalues[1] = (values[1] && filterFunc) ? filterFunc(values[0], values[1]) : values[1];\n\n\t\t\t// Add a marker for every point\n\t\t\tvar node = addNodeTo(element, false);\n\t\t\t\tnode.className = getClasses(values[1], options.cssClasses.marker);\n\t\t\t\tnode.style[options.style] = offset + '%';\n\n\t\t\t// Values are only appended for points marked '1' or '2'.\n\t\t\tif ( values[1] ) {\n\t\t\t\tnode = addNodeTo(element, false);\n\t\t\t\tnode.className = getClasses(values[1], options.cssClasses.value);\n\t\t\t\tnode.setAttribute('data-value', values[0]);\n\t\t\t\tnode.style[options.style] = offset + '%';\n\t\t\t\tnode.innerText = formatter.to(values[0]);\n\t\t\t}\n\t\t}\n\n\t\t// Append all points.\n\t\tObject.keys(spread).forEach(function(a){\n\t\t\taddSpread(a, spread[a]);\n\t\t});\n\n\t\treturn element;\n\t}\n\n\tfunction removePips ( ) {\n\t\tif ( scope_Pips ) {\n\t\t\tremoveElement(scope_Pips);\n\t\t\tscope_Pips = null;\n\t\t}\n\t}\n\n\tfunction pips ( grid ) {\n\n\t\t// Fix #669\n\t\tremovePips();\n\n\t\tvar mode = grid.mode;\n\t\tvar density = grid.density || 1;\n\t\tvar filter = grid.filter || false;\n\t\tvar values = grid.values || false;\n\t\tvar stepped = grid.stepped || false;\n\t\tvar group = getGroup( mode, values, stepped );\n\t\tvar spread = generateSpread( density, mode, group );\n\t\tvar format = grid.format || {\n\t\t\tto: Math.round\n\t\t};\n\n\t\tscope_Pips = scope_Target.appendChild(addMarking(\n\t\t\tspread,\n\t\t\tfilter,\n\t\t\tformat\n\t\t));\n\n\t\treturn scope_Pips;\n\t}\n\n\n\t// Shorthand for base dimensions.\n\tfunction baseSize ( ) {\n\t\tvar rect = scope_Base.getBoundingClientRect(), alt = 'offset' + ['Width', 'Height'][options.ort];\n\t\treturn options.ort === 0 ? (rect.width||scope_Base[alt]) : (rect.height||scope_Base[alt]);\n\t}\n\n\t// Handler for attaching events trough a proxy.\n\tfunction attachEvent ( events, element, callback, data ) {\n\n\t\t// This function can be used to 'filter' events to the slider.\n\t\t// element is a node, not a nodeList\n\n\t\tvar method = function ( e ){\n\n\t\t\te = fixEvent(e, data.pageOffset, data.target || element);\n\n\t\t\t// fixEvent returns false if this event has a different target\n\t\t\t// when handling (multi-) touch events;\n\t\t\tif ( !e ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// doNotReject is passed by all end events to make sure released touches\n\t\t\t// are not rejected, leaving the slider \"stuck\" to the cursor;\n\t\t\tif ( scope_Target.hasAttribute('disabled') && !data.doNotReject ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Stop if an active 'tap' transition is taking place.\n\t\t\tif ( hasClass(scope_Target, options.cssClasses.tap) && !data.doNotReject ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Ignore right or middle clicks on start #454\n\t\t\tif ( events === actions.start && e.buttons !== undefined && e.buttons > 1 ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Ignore right or middle clicks on start #454\n\t\t\tif ( data.hover && e.buttons ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// 'supportsPassive' is only true if a browser also supports touch-action: none in CSS.\n\t\t\t// iOS safari does not, so it doesn't get to benefit from passive scrolling. iOS does support\n\t\t\t// touch-action: manipulation, but that allows panning, which breaks\n\t\t\t// sliders after zooming/on non-responsive pages.\n\t\t\t// See: https://bugs.webkit.org/show_bug.cgi?id=133112\n\t\t\tif ( !supportsPassive ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\te.calcPoint = e.points[ options.ort ];\n\n\t\t\t// Call the event handler with the event [ and additional data ].\n\t\t\tcallback ( e, data );\n\t\t};\n\n\t\tvar methods = [];\n\n\t\t// Bind a closure on the target for every event type.\n\t\tevents.split(' ').forEach(function( eventName ){\n\t\t\telement.addEventListener(eventName, method, supportsPassive ? { passive: true } : false);\n\t\t\tmethods.push([eventName, method]);\n\t\t});\n\n\t\treturn methods;\n\t}\n\n\t// Provide a clean event with standardized offset values.\n\tfunction fixEvent ( e, pageOffset, target ) {\n\n\t\t// Filter the event to register the type, which can be\n\t\t// touch, mouse or pointer. Offset changes need to be\n\t\t// made on an event specific basis.\n\t\tvar touch = e.type.indexOf('touch') === 0;\n\t\tvar mouse = e.type.indexOf('mouse') === 0;\n\t\tvar pointer = e.type.indexOf('pointer') === 0;\n\n\t\tvar x;\n\t\tvar y;\n\n\t\t// IE10 implemented pointer events with a prefix;\n\t\tif ( e.type.indexOf('MSPointer') === 0 ) {\n\t\t\tpointer = true;\n\t\t}\n\n\n\t\t// In the event that multitouch is activated, the only thing one handle should be concerned\n\t\t// about is the touches that originated on top of it.\n\t\tif ( touch ) {\n\n\t\t\t// Returns true if a touch originated on the target.\n\t\t\tvar isTouchOnTarget = function (touch) {\n\t\t\t\treturn touch.target === target || target.contains(touch.target);\n\t\t\t};\n\n\t\t\t// In the case of touchstart events, we need to make sure there is still no more than one\n\t\t\t// touch on the target so we look amongst all touches.\n\t\t\tif (e.type === 'touchstart') {\n\n\t\t\t\tvar targetTouches = Array.prototype.filter.call(e.touches, isTouchOnTarget);\n\n\t\t\t\t// Do not support more than one touch per handle.\n\t\t\t\tif ( targetTouches.length > 1 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tx = targetTouches[0].pageX;\n\t\t\t\ty = targetTouches[0].pageY;\n\n\t\t\t} else {\n\n\t\t\t\t// In the other cases, find on changedTouches is enough.\n\t\t\t\tvar targetTouch = Array.prototype.find.call(e.changedTouches, isTouchOnTarget);\n\n\t\t\t\t// Cancel if the target touch has not moved.\n\t\t\t\tif ( !targetTouch ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tx = targetTouch.pageX;\n\t\t\t\ty = targetTouch.pageY;\n\t\t\t}\n\t\t}\n\n\t\tpageOffset = pageOffset || getPageOffset(scope_Document);\n\n\t\tif ( mouse || pointer ) {\n\t\t\tx = e.clientX + pageOffset.x;\n\t\t\ty = e.clientY + pageOffset.y;\n\t\t}\n\n\t\te.pageOffset = pageOffset;\n\t\te.points = [x, y];\n\t\te.cursor = mouse || pointer; // Fix #435\n\n\t\treturn e;\n\t}\n\n\t// Translate a coordinate in the document to a percentage on the slider\n\tfunction calcPointToPercentage ( calcPoint ) {\n\t\tvar location = calcPoint - offset(scope_Base, options.ort);\n\t\tvar proposal = ( location * 100 ) / baseSize();\n\t\treturn options.dir ? 100 - proposal : proposal;\n\t}\n\n\t// Find handle closest to a certain percentage on the slider\n\tfunction getClosestHandle ( proposal ) {\n\n\t\tvar closest = 100;\n\t\tvar handleNumber = false;\n\n\t\tscope_Handles.forEach(function(handle, index){\n\n\t\t\t// Disabled handles are ignored\n\t\t\tif ( handle.hasAttribute('disabled') ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar pos = Math.abs(scope_Locations[index] - proposal);\n\n\t\t\tif ( pos < closest ) {\n\t\t\t\thandleNumber = index;\n\t\t\t\tclosest = pos;\n\t\t\t}\n\t\t});\n\n\t\treturn handleNumber;\n\t}\n\n\t// Moves handle(s) by a percentage\n\t// (bool, % to move, [% where handle started, ...], [index in scope_Handles, ...])\n\tfunction moveHandles ( upward, proposal, locations, handleNumbers ) {\n\n\t\tvar proposals = locations.slice();\n\n\t\tvar b = [!upward, upward];\n\t\tvar f = [upward, !upward];\n\n\t\t// Copy handleNumbers so we don't change the dataset\n\t\thandleNumbers = handleNumbers.slice();\n\n\t\t// Check to see which handle is 'leading'.\n\t\t// If that one can't move the second can't either.\n\t\tif ( upward ) {\n\t\t\thandleNumbers.reverse();\n\t\t}\n\n\t\t// Step 1: get the maximum percentage that any of the handles can move\n\t\tif ( handleNumbers.length > 1 ) {\n\n\t\t\thandleNumbers.forEach(function(handleNumber, o) {\n\n\t\t\t\tvar to = checkHandlePosition(proposals, handleNumber, proposals[handleNumber] + proposal, b[o], f[o], false);\n\n\t\t\t\t// Stop if one of the handles can't move.\n\t\t\t\tif ( to === false ) {\n\t\t\t\t\tproposal = 0;\n\t\t\t\t} else {\n\t\t\t\t\tproposal = to - proposals[handleNumber];\n\t\t\t\t\tproposals[handleNumber] = to;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// If using one handle, check backward AND forward\n\t\telse {\n\t\t\tb = f = [true];\n\t\t}\n\n\t\tvar state = false;\n\n\t\t// Step 2: Try to set the handles with the found percentage\n\t\thandleNumbers.forEach(function(handleNumber, o) {\n\t\t\tstate = setHandle(handleNumber, locations[handleNumber] + proposal, b[o], f[o]) || state;\n\t\t});\n\n\t\t// Step 3: If a handle moved, fire events\n\t\tif ( state ) {\n\t\t\thandleNumbers.forEach(function(handleNumber){\n\t\t\t\tfireEvent('update', handleNumber);\n\t\t\t\tfireEvent('slide', handleNumber);\n\t\t\t});\n\t\t}\n\t}\n\n\t// External event handling\n\tfunction fireEvent ( eventName, handleNumber, tap ) {\n\n\t\tObject.keys(scope_Events).forEach(function( targetEvent ) {\n\n\t\t\tvar eventType = targetEvent.split('.')[0];\n\n\t\t\tif ( eventName === eventType ) {\n\t\t\t\tscope_Events[targetEvent].forEach(function( callback ) {\n\n\t\t\t\t\tcallback.call(\n\t\t\t\t\t\t// Use the slider public API as the scope ('this')\n\t\t\t\t\t\tscope_Self,\n\t\t\t\t\t\t// Return values as array, so arg_1[arg_2] is always valid.\n\t\t\t\t\t\tscope_Values.map(options.format.to),\n\t\t\t\t\t\t// Handle index, 0 or 1\n\t\t\t\t\t\thandleNumber,\n\t\t\t\t\t\t// Unformatted slider values\n\t\t\t\t\t\tscope_Values.slice(),\n\t\t\t\t\t\t// Event is fired by tap, true or false\n\t\t\t\t\t\ttap || false,\n\t\t\t\t\t\t// Left offset of the handle, in relation to the slider\n\t\t\t\t\t\tscope_Locations.slice()\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\n\t// Fire 'end' when a mouse or pen leaves the document.\n\tfunction documentLeave ( event, data ) {\n\t\tif ( event.type === \"mouseout\" && event.target.nodeName === \"HTML\" && event.relatedTarget === null ){\n\t\t\teventEnd (event, data);\n\t\t}\n\t}\n\n\t// Handle movement on document for handle and range drag.\n\tfunction eventMove ( event, data ) {\n\n\t\t// Fix #498\n\t\t// Check value of .buttons in 'start' to work around a bug in IE10 mobile (data.buttonsProperty).\n\t\t// https://connect.microsoft.com/IE/feedback/details/927005/mobile-ie10-windows-phone-buttons-property-of-pointermove-event-always-zero\n\t\t// IE9 has .buttons and .which zero on mousemove.\n\t\t// Firefox breaks the spec MDN defines.\n\t\tif ( navigator.appVersion.indexOf(\"MSIE 9\") === -1 && event.buttons === 0 && data.buttonsProperty !== 0 ) {\n\t\t\treturn eventEnd(event, data);\n\t\t}\n\n\t\t// Check if we are moving up or down\n\t\tvar movement = (options.dir ? -1 : 1) * (event.calcPoint - data.startCalcPoint);\n\n\t\t// Convert the movement into a percentage of the slider width/height\n\t\tvar proposal = (movement * 100) / data.baseSize;\n\n\t\tmoveHandles(movement > 0, proposal, data.locations, data.handleNumbers);\n\t}\n\n\t// Unbind move events on document, call callbacks.\n\tfunction eventEnd ( event, data ) {\n\n\t\t// The handle is no longer active, so remove the class.\n\t\tif ( data.handle ) {\n\t\t\tremoveClass(data.handle, options.cssClasses.active);\n\t\t\tscope_ActiveHandlesCount -= 1;\n\t\t}\n\n\t\t// Unbind the move and end events, which are added on 'start'.\n\t\tdata.listeners.forEach(function( c ) {\n\t\t\tscope_DocumentElement.removeEventListener(c[0], c[1]);\n\t\t});\n\n\t\tif ( scope_ActiveHandlesCount === 0 ) {\n\t\t\t// Remove dragging class.\n\t\t\tremoveClass(scope_Target, options.cssClasses.drag);\n\t\t\tsetZindex();\n\n\t\t\t// Remove cursor styles and text-selection events bound to the body.\n\t\t\tif ( event.cursor ) {\n\t\t\t\tscope_Body.style.cursor = '';\n\t\t\t\tscope_Body.removeEventListener('selectstart', preventDefault);\n\t\t\t}\n\t\t}\n\n\t\tdata.handleNumbers.forEach(function(handleNumber){\n\t\t\tfireEvent('change', handleNumber);\n\t\t\tfireEvent('set', handleNumber);\n\t\t\tfireEvent('end', handleNumber);\n\t\t});\n\t}\n\n\t// Bind move events on document.\n\tfunction eventStart ( event, data ) {\n\n\t\tvar handle;\n\t\tif ( data.handleNumbers.length === 1 ) {\n\n\t\t\tvar handleOrigin = scope_Handles[data.handleNumbers[0]];\n\n\t\t\t// Ignore 'disabled' handles\n\t\t\tif ( handleOrigin.hasAttribute('disabled') ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\thandle = handleOrigin.children[0];\n\t\t\tscope_ActiveHandlesCount += 1;\n\n\t\t\t// Mark the handle as 'active' so it can be styled.\n\t\t\taddClass(handle, options.cssClasses.active);\n\t\t}\n\n\t\t// A drag should never propagate up to the 'tap' event.\n\t\tevent.stopPropagation();\n\n\t\t// Record the event listeners.\n\t\tvar listeners = [];\n\n\t\t// Attach the move and end events.\n\t\tvar moveEvent = attachEvent(actions.move, scope_DocumentElement, eventMove, {\n\t\t\t// The event target has changed so we need to propagate the original one so that we keep\n\t\t\t// relying on it to extract target touches.\n\t\t\ttarget: event.target,\n\t\t\thandle: handle,\n\t\t\tlisteners: listeners,\n\t\t\tstartCalcPoint: event.calcPoint,\n\t\t\tbaseSize: baseSize(),\n\t\t\tpageOffset: event.pageOffset,\n\t\t\thandleNumbers: data.handleNumbers,\n\t\t\tbuttonsProperty: event.buttons,\n\t\t\tlocations: scope_Locations.slice()\n\t\t});\n\n\t\tvar endEvent = attachEvent(actions.end, scope_DocumentElement, eventEnd, {\n\t\t\ttarget: event.target,\n\t\t\thandle: handle,\n\t\t\tlisteners: listeners,\n\t\t\tdoNotReject: true,\n\t\t\thandleNumbers: data.handleNumbers\n\t\t});\n\n\t\tvar outEvent = attachEvent(\"mouseout\", scope_DocumentElement, documentLeave, {\n\t\t\ttarget: event.target,\n\t\t\thandle: handle,\n\t\t\tlisteners: listeners,\n\t\t\tdoNotReject: true,\n\t\t\thandleNumbers: data.handleNumbers\n\t\t});\n\n\t\t// We want to make sure we pushed the listeners in the listener list rather than creating\n\t\t// a new one as it has already been passed to the event handlers.\n\t\tlisteners.push.apply(listeners, moveEvent.concat(endEvent, outEvent));\n\n\t\t// Text selection isn't an issue on touch devices,\n\t\t// so adding cursor styles can be skipped.\n\t\tif ( event.cursor ) {\n\n\t\t\t// Prevent the 'I' cursor and extend the range-drag cursor.\n\t\t\tscope_Body.style.cursor = getComputedStyle(event.target).cursor;\n\n\t\t\t// Mark the target with a dragging state.\n\t\t\tif ( scope_Handles.length > 1 ) {\n\t\t\t\taddClass(scope_Target, options.cssClasses.drag);\n\t\t\t}\n\n\t\t\t// Prevent text selection when dragging the handles.\n\t\t\t// In noUiSlider <= 9.2.0, this was handled by calling preventDefault on mouse/touch start/move,\n\t\t\t// which is scroll blocking. The selectstart event is supported by FireFox starting from version 52,\n\t\t\t// meaning the only holdout is iOS Safari. This doesn't matter: text selection isn't triggered there.\n\t\t\t// The 'cursor' flag is false.\n\t\t\t// See: http://caniuse.com/#search=selectstart\n\t\t\tscope_Body.addEventListener('selectstart', preventDefault, false);\n\t\t}\n\n\t\tdata.handleNumbers.forEach(function(handleNumber){\n\t\t\tfireEvent('start', handleNumber);\n\t\t});\n\t}\n\n\t// Move closest handle to tapped location.\n\tfunction eventTap ( event ) {\n\n\t\t// The tap event shouldn't propagate up\n\t\tevent.stopPropagation();\n\n\t\tvar proposal = calcPointToPercentage(event.calcPoint);\n\t\tvar handleNumber = getClosestHandle(proposal);\n\n\t\t// Tackle the case that all handles are 'disabled'.\n\t\tif ( handleNumber === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Flag the slider as it is now in a transitional state.\n\t\t// Transition takes a configurable amount of ms (default 300). Re-enable the slider after that.\n\t\tif ( !options.events.snap ) {\n\t\t\taddClassFor(scope_Target, options.cssClasses.tap, options.animationDuration);\n\t\t}\n\n\t\tsetHandle(handleNumber, proposal, true, true);\n\n\t\tsetZindex();\n\n\t\tfireEvent('slide', handleNumber, true);\n\t\tfireEvent('update', handleNumber, true);\n\t\tfireEvent('change', handleNumber, true);\n\t\tfireEvent('set', handleNumber, true);\n\n\t\tif ( options.events.snap ) {\n\t\t\teventStart(event, { handleNumbers: [handleNumber] });\n\t\t}\n\t}\n\n\t// Fires a 'hover' event for a hovered mouse/pen position.\n\tfunction eventHover ( event ) {\n\n\t\tvar proposal = calcPointToPercentage(event.calcPoint);\n\n\t\tvar to = scope_Spectrum.getStep(proposal);\n\t\tvar value = scope_Spectrum.fromStepping(to);\n\n\t\tObject.keys(scope_Events).forEach(function( targetEvent ) {\n\t\t\tif ( 'hover' === targetEvent.split('.')[0] ) {\n\t\t\t\tscope_Events[targetEvent].forEach(function( callback ) {\n\t\t\t\t\tcallback.call( scope_Self, value );\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t// Attach events to several slider parts.\n\tfunction bindSliderEvents ( behaviour ) {\n\n\t\t// Attach the standard drag event to the handles.\n\t\tif ( !behaviour.fixed ) {\n\n\t\t\tscope_Handles.forEach(function( handle, index ){\n\n\t\t\t\t// These events are only bound to the visual handle\n\t\t\t\t// element, not the 'real' origin element.\n\t\t\t\tattachEvent ( actions.start, handle.children[0], eventStart, {\n\t\t\t\t\thandleNumbers: [index]\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// Attach the tap event to the slider base.\n\t\tif ( behaviour.tap ) {\n\t\t\tattachEvent (actions.start, scope_Base, eventTap, {});\n\t\t}\n\n\t\t// Fire hover events\n\t\tif ( behaviour.hover ) {\n\t\t\tattachEvent (actions.move, scope_Base, eventHover, { hover: true });\n\t\t}\n\n\t\t// Make the range draggable.\n\t\tif ( behaviour.drag ){\n\n\t\t\tscope_Connects.forEach(function( connect, index ){\n\n\t\t\t\tif ( connect === false || index === 0 || index === scope_Connects.length - 1 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar handleBefore = scope_Handles[index - 1];\n\t\t\t\tvar handleAfter = scope_Handles[index];\n\t\t\t\tvar eventHolders = [connect];\n\n\t\t\t\taddClass(connect, options.cssClasses.draggable);\n\n\t\t\t\t// When the range is fixed, the entire range can\n\t\t\t\t// be dragged by the handles. The handle in the first\n\t\t\t\t// origin will propagate the start event upward,\n\t\t\t\t// but it needs to be bound manually on the other.\n\t\t\t\tif ( behaviour.fixed ) {\n\t\t\t\t\teventHolders.push(handleBefore.children[0]);\n\t\t\t\t\teventHolders.push(handleAfter.children[0]);\n\t\t\t\t}\n\n\t\t\t\teventHolders.forEach(function( eventHolder ) {\n\t\t\t\t\tattachEvent ( actions.start, eventHolder, eventStart, {\n\t\t\t\t\t\thandles: [handleBefore, handleAfter],\n\t\t\t\t\t\thandleNumbers: [index - 1, index]\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\n\t// Split out the handle positioning logic so the Move event can use it, too\n\tfunction checkHandlePosition ( reference, handleNumber, to, lookBackward, lookForward, getValue ) {\n\n\t\t// For sliders with multiple handles, limit movement to the other handle.\n\t\t// Apply the margin option by adding it to the handle positions.\n\t\tif ( scope_Handles.length > 1 ) {\n\n\t\t\tif ( lookBackward && handleNumber > 0 ) {\n\t\t\t\tto = Math.max(to, reference[handleNumber - 1] + options.margin);\n\t\t\t}\n\n\t\t\tif ( lookForward && handleNumber < scope_Handles.length - 1 ) {\n\t\t\t\tto = Math.min(to, reference[handleNumber + 1] - options.margin);\n\t\t\t}\n\t\t}\n\n\t\t// The limit option has the opposite effect, limiting handles to a\n\t\t// maximum distance from another. Limit must be > 0, as otherwise\n\t\t// handles would be unmoveable.\n\t\tif ( scope_Handles.length > 1 && options.limit ) {\n\n\t\t\tif ( lookBackward && handleNumber > 0 ) {\n\t\t\t\tto = Math.min(to, reference[handleNumber - 1] + options.limit);\n\t\t\t}\n\n\t\t\tif ( lookForward && handleNumber < scope_Handles.length - 1 ) {\n\t\t\t\tto = Math.max(to, reference[handleNumber + 1] - options.limit);\n\t\t\t}\n\t\t}\n\n\t\t// The padding option keeps the handles a certain distance from the\n\t\t// edges of the slider. Padding must be > 0.\n\t\tif ( options.padding ) {\n\n\t\t\tif ( handleNumber === 0 ) {\n\t\t\t\tto = Math.max(to, options.padding[0]);\n\t\t\t}\n\n\t\t\tif ( handleNumber === scope_Handles.length - 1 ) {\n\t\t\t\tto = Math.min(to, 100 - options.padding[1]);\n\t\t\t}\n\t\t}\n\n\t\tto = scope_Spectrum.getStep(to);\n\n\t\t// Limit percentage to the 0 - 100 range\n\t\tto = limit(to);\n\n\t\t// Return false if handle can't move\n\t\tif ( to === reference[handleNumber] && !getValue ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn to;\n\t}\n\n\t// Uses slider orientation to create CSS rules. a = base value;\n\tfunction inRuleOrder ( v, a ) {\n\t\tvar o = options.ort;\n\t\treturn (o?a:v) + ', ' + (o?v:a);\n\t}\n\n\tfunction toPct ( pct ) {\n\t\treturn pct + '%';\n\t}\n\n\t// Takes a base value and an offset. This offset is used for the connect bar size.\n\t// In the initial design for this feature, the origin element was 1% wide.\n\t// Unfortunately, a rounding bug in Chrome makes it impossible to implement this feature\n\t// in this manner: https://bugs.chromium.org/p/chromium/issues/detail?id=798223\n\tfunction transformDirection ( a, b ) {\n\t\treturn options.dir ? 100 - a - b : a;\n\t}\n\n\t// Updates scope_Locations and scope_Values, updates visual state\n\tfunction updateHandlePosition ( handleNumber, to ) {\n\n\t\t// Update locations.\n\t\tscope_Locations[handleNumber] = to;\n\n\t\t// Convert the value to the slider stepping/range.\n\t\tscope_Values[handleNumber] = scope_Spectrum.fromStepping(to);\n\n\t\tvar rule = 'translate(' + inRuleOrder(toPct(transformDirection(to, 0)), '0') + ')';\n\t\tscope_Handles[handleNumber].style[options.transformRule] = rule;\n\n\t\tupdateConnect(handleNumber);\n\t\tupdateConnect(handleNumber + 1);\n\t}\n\n\tfunction setZindex ( ) {\n\n\t\tscope_HandleNumbers.forEach(function(handleNumber){\n\t\t\t// Handles before the slider middle are stacked later = higher,\n\t\t\t// Handles after the middle later is lower\n\t\t\t// [[7] [8] .......... | .......... [5] [4]\n\t\t\tvar dir = (scope_Locations[handleNumber] > 50 ? -1 : 1);\n\t\t\tvar zIndex = 3 + (scope_Handles.length + (dir * handleNumber));\n\t\t\tscope_Handles[handleNumber].style.zIndex = zIndex;\n\t\t});\n\t}\n\n\t// Test suggested values and apply margin, step.\n\tfunction setHandle ( handleNumber, to, lookBackward, lookForward ) {\n\n\t\tto = checkHandlePosition(scope_Locations, handleNumber, to, lookBackward, lookForward, false);\n\n\t\tif ( to === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tupdateHandlePosition(handleNumber, to);\n\n\t\treturn true;\n\t}\n\n\t// Updates style attribute for connect nodes\n\tfunction updateConnect ( index ) {\n\n\t\t// Skip connects set to false\n\t\tif ( !scope_Connects[index] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar l = 0;\n\t\tvar h = 100;\n\n\t\tif ( index !== 0 ) {\n\t\t\tl = scope_Locations[index - 1];\n\t\t}\n\n\t\tif ( index !== scope_Connects.length - 1 ) {\n\t\t\th = scope_Locations[index];\n\t\t}\n\n\t\t// We use two rules:\n\t\t// 'translate' to change the left/top offset;\n\t\t// 'scale' to change the width of the element;\n\t\t// As the element has a width of 100%, a translation of 100% is equal to 100% of the parent (.noUi-base)\n\t\tvar connectWidth = h - l;\n\t\tvar translateRule = 'translate(' + inRuleOrder(toPct(transformDirection(l, connectWidth)), '0') + ')';\n\t\tvar scaleRule = 'scale(' + inRuleOrder(connectWidth / 100, '1') + ')';\n\n\t\tscope_Connects[index].style[options.transformRule] = translateRule + ' ' + scaleRule;\n\t}\n\n\t// Parses value passed to .set method. Returns current value if not parseable.\n\tfunction resolveToValue ( to, handleNumber ) {\n\n\t\t// Setting with null indicates an 'ignore'.\n\t\t// Inputting 'false' is invalid.\n\t\tif ( to === null || to === false || to === undefined ) {\n\t\t\treturn scope_Locations[handleNumber];\n\t\t}\n\n\t\t// If a formatted number was passed, attempt to decode it.\n\t\tif ( typeof to === 'number' ) {\n\t\t\tto = String(to);\n\t\t}\n\n\t\tto = options.format.from(to);\n\t\tto = scope_Spectrum.toStepping(to);\n\n\t\t// If parsing the number failed, use the current value.\n\t\tif ( to === false || isNaN(to) ) {\n\t\t\treturn scope_Locations[handleNumber];\n\t\t}\n\n\t\treturn to;\n\t}\n\n\t// Set the slider value.\n\tfunction valueSet ( input, fireSetEvent ) {\n\n\t\tvar values = asArray(input);\n\t\tvar isInit = scope_Locations[0] === undefined;\n\n\t\t// Event fires by default\n\t\tfireSetEvent = (fireSetEvent === undefined ? true : !!fireSetEvent);\n\n\t\t// Animation is optional.\n\t\t// Make sure the initial values were set before using animated placement.\n\t\tif ( options.animate && !isInit ) {\n\t\t\taddClassFor(scope_Target, options.cssClasses.tap, options.animationDuration);\n\t\t}\n\n\t\t// First pass, without lookAhead but with lookBackward. Values are set from left to right.\n\t\tscope_HandleNumbers.forEach(function(handleNumber){\n\t\t\tsetHandle(handleNumber, resolveToValue(values[handleNumber], handleNumber), true, false);\n\t\t});\n\n\t\t// Second pass. Now that all base values are set, apply constraints\n\t\tscope_HandleNumbers.forEach(function(handleNumber){\n\t\t\tsetHandle(handleNumber, scope_Locations[handleNumber], true, true);\n\t\t});\n\n\t\tsetZindex();\n\n\t\tscope_HandleNumbers.forEach(function(handleNumber){\n\n\t\t\tfireEvent('update', handleNumber);\n\n\t\t\t// Fire the event only for handles that received a new value, as per #579\n\t\t\tif ( values[handleNumber] !== null && fireSetEvent ) {\n\t\t\t\tfireEvent('set', handleNumber);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Reset slider to initial values\n\tfunction valueReset ( fireSetEvent ) {\n\t\tvalueSet(options.start, fireSetEvent);\n\t}\n\n\t// Get the slider value.\n\tfunction valueGet ( ) {\n\n\t\tvar values = scope_Values.map(options.format.to);\n\n\t\t// If only one handle is used, return a single value.\n\t\tif ( values.length === 1 ){\n\t\t\treturn values[0];\n\t\t}\n\n\t\treturn values;\n\t}\n\n\t// Removes classes from the root and empties it.\n\tfunction destroy ( ) {\n\n\t\tfor ( var key in options.cssClasses ) {\n\t\t\tif ( !options.cssClasses.hasOwnProperty(key) ) { continue; }\n\t\t\tremoveClass(scope_Target, options.cssClasses[key]);\n\t\t}\n\n\t\twhile (scope_Target.firstChild) {\n\t\t\tscope_Target.removeChild(scope_Target.firstChild);\n\t\t}\n\n\t\tdelete scope_Target.noUiSlider;\n\t}\n\n\t// Get the current step size for the slider.\n\tfunction getCurrentStep ( ) {\n\n\t\t// Check all locations, map them to their stepping point.\n\t\t// Get the step point, then find it in the input list.\n\t\treturn scope_Locations.map(function( location, index ){\n\n\t\t\tvar nearbySteps = scope_Spectrum.getNearbySteps( location );\n\t\t\tvar value = scope_Values[index];\n\t\t\tvar increment = nearbySteps.thisStep.step;\n\t\t\tvar decrement = null;\n\n\t\t\t// If the next value in this step moves into the next step,\n\t\t\t// the increment is the start of the next step - the current value\n\t\t\tif ( increment !== false ) {\n\t\t\t\tif ( value + increment > nearbySteps.stepAfter.startValue ) {\n\t\t\t\t\tincrement = nearbySteps.stepAfter.startValue - value;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t// If the value is beyond the starting point\n\t\t\tif ( value > nearbySteps.thisStep.startValue ) {\n\t\t\t\tdecrement = nearbySteps.thisStep.step;\n\t\t\t}\n\n\t\t\telse if ( nearbySteps.stepBefore.step === false ) {\n\t\t\t\tdecrement = false;\n\t\t\t}\n\n\t\t\t// If a handle is at the start of a step, it always steps back into the previous step first\n\t\t\telse {\n\t\t\t\tdecrement = value - nearbySteps.stepBefore.highestStep;\n\t\t\t}\n\n\n\t\t\t// Now, if at the slider edges, there is not in/decrement\n\t\t\tif ( location === 100 ) {\n\t\t\t\tincrement = null;\n\t\t\t}\n\n\t\t\telse if ( location === 0 ) {\n\t\t\t\tdecrement = null;\n\t\t\t}\n\n\t\t\t// As per #391, the comparison for the decrement step can have some rounding issues.\n\t\t\tvar stepDecimals = scope_Spectrum.countStepDecimals();\n\n\t\t\t// Round per #391\n\t\t\tif ( increment !== null && increment !== false ) {\n\t\t\t\tincrement = Number(increment.toFixed(stepDecimals));\n\t\t\t}\n\n\t\t\tif ( decrement !== null && decrement !== false ) {\n\t\t\t\tdecrement = Number(decrement.toFixed(stepDecimals));\n\t\t\t}\n\n\t\t\treturn [decrement, increment];\n\t\t});\n\t}\n\n\t// Attach an event to this slider, possibly including a namespace\n\tfunction bindEvent ( namespacedEvent, callback ) {\n\t\tscope_Events[namespacedEvent] = scope_Events[namespacedEvent] || [];\n\t\tscope_Events[namespacedEvent].push(callback);\n\n\t\t// If the event bound is 'update,' fire it immediately for all handles.\n\t\tif ( namespacedEvent.split('.')[0] === 'update' ) {\n\t\t\tscope_Handles.forEach(function(a, index){\n\t\t\t\tfireEvent('update', index);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Undo attachment of event\n\tfunction removeEvent ( namespacedEvent ) {\n\n\t\tvar event = namespacedEvent && namespacedEvent.split('.')[0];\n\t\tvar namespace = event && namespacedEvent.substring(event.length);\n\n\t\tObject.keys(scope_Events).forEach(function( bind ){\n\n\t\t\tvar tEvent = bind.split('.')[0],\n\t\t\t\ttNamespace = bind.substring(tEvent.length);\n\n\t\t\tif ( (!event || event === tEvent) && (!namespace || namespace === tNamespace) ) {\n\t\t\t\tdelete scope_Events[bind];\n\t\t\t}\n\t\t});\n\t}\n\n\t// Updateable: margin, limit, padding, step, range, animate, snap\n\tfunction updateOptions ( optionsToUpdate, fireSetEvent ) {\n\n\t\t// Spectrum is created using the range, snap, direction and step options.\n\t\t// 'snap' and 'step' can be updated.\n\t\t// If 'snap' and 'step' are not passed, they should remain unchanged.\n\t\tvar v = valueGet();\n\n\t\tvar updateAble = ['margin', 'limit', 'padding', 'range', 'animate', 'snap', 'step', 'format'];\n\n\t\t// Only change options that we're actually passed to update.\n\t\tupdateAble.forEach(function(name){\n\t\t\tif ( optionsToUpdate[name] !== undefined ) {\n\t\t\t\toriginalOptions[name] = optionsToUpdate[name];\n\t\t\t}\n\t\t});\n\n\t\tvar newOptions = testOptions(originalOptions);\n\n\t\t// Load new options into the slider state\n\t\tupdateAble.forEach(function(name){\n\t\t\tif ( optionsToUpdate[name] !== undefined ) {\n\t\t\t\toptions[name] = newOptions[name];\n\t\t\t}\n\t\t});\n\n\t\tscope_Spectrum = newOptions.spectrum;\n\n\t\t// Limit, margin and padding depend on the spectrum but are stored outside of it. (#677)\n\t\toptions.margin = newOptions.margin;\n\t\toptions.limit = newOptions.limit;\n\t\toptions.padding = newOptions.padding;\n\n\t\t// Update pips, removes existing.\n\t\tif ( options.pips ) {\n\t\t\tpips(options.pips);\n\t\t}\n\n\t\t// Invalidate the current positioning so valueSet forces an update.\n\t\tscope_Locations = [];\n\t\tvalueSet(optionsToUpdate.start || v, fireSetEvent);\n\t}\n\n\t// Throw an error if the slider was already initialized.\n\tif ( scope_Target.noUiSlider ) {\n\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): Slider was already initialized.\");\n\t}\n\n\t// Create the base element, initialise HTML and set classes.\n\t// Add handles and connect elements.\n\taddSlider(scope_Target);\n\taddElements(options.connect, scope_Base);\n\n\tscope_Self = {\n\t\tdestroy: destroy,\n\t\tsteps: getCurrentStep,\n\t\ton: bindEvent,\n\t\toff: removeEvent,\n\t\tget: valueGet,\n\t\tset: valueSet,\n\t\treset: valueReset,\n\t\t// Exposed for unit testing, don't use this in your application.\n\t\t__moveHandles: function(a, b, c) { moveHandles(a, b, scope_Locations, c); },\n\t\toptions: originalOptions, // Issue #600, #678\n\t\tupdateOptions: updateOptions,\n\t\ttarget: scope_Target, // Issue #597\n\t\tremovePips: removePips,\n\t\tpips: pips // Issue #594\n\t};\n\n\t// Attach user events.\n\tbindSliderEvents(options.events);\n\n\t// Use the public value method to set the start values.\n\tvalueSet(options.start);\n\n\tif ( options.pips ) {\n\t\tpips(options.pips);\n\t}\n\n\tif ( options.tooltips ) {\n\t\ttooltips();\n\t}\n\n\taria();\n\n\treturn scope_Self;\n\n}\n\n\n\t// Run the standard initializer\n\tfunction initialize ( target, originalOptions ) {\n\n\t\tif ( !target || !target.nodeName ) {\n\t\t\tthrow new Error(\"noUiSlider (\" + VERSION + \"): create requires a single element, got: \" + target);\n\t\t}\n\n\t\t// Test the options and create the slider environment;\n\t\tvar options = testOptions( originalOptions, target );\n\t\tvar api = closure( target, options, originalOptions );\n\n\t\ttarget.noUiSlider = api;\n\n\t\treturn api;\n\t}\n\n\t// Use an object instead of a function for future expansibility;\n\treturn {\n\t\tversion: VERSION,\n\t\tcreate: initialize\n\t};\n\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbm9VaVNsaWRlci9kaXN0cmlidXRlL25vdWlzbGlkZXIuanM/OWI0NyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxJQUFJO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQ0FBZ0MsMEJBQTBCLEVBQUU7QUFDNUQsR0FBRztBQUNILGdDQUFnQyxvQkFBb0IsRUFBRTtBQUN0RDs7O0FBR0E7QUFDQSxrQkFBa0Isd0JBQXdCO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLCtCQUErQjtBQUNqRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxnQkFBZ0IscUdBQXFHO0FBQ3JILGNBQWMscUdBQXFHO0FBQ25ILGVBQWU7QUFDZjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHlCQUF5QjtBQUN6QjtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZUFBZSxvQkFBb0I7QUFDbkM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsbUJBQW1CLG9CQUFvQjtBQUN2QztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx1Q0FBdUMsVUFBVTs7QUFFakQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFF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QUFFbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLFdBQVc7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGtFQUFrRSxnQkFBZ0I7QUFDbEY7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCOztBQUU5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQixnQ0FBZ0M7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEOztBQUVBO0FBQ0E7QUFDQSx1REFBdUQsY0FBYztBQUNyRTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxtREFBbUQsVUFBVTtBQUM3RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx1Q0FBdUMsRUFBRTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsImZpbGUiOiI0NS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBub3Vpc2xpZGVyIC0gMTEuMC4wIC0gMjAxOC0wMS0xMiAyMDozNzo1MiAqL1xuXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcblxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcblxuICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcblxuICAgICAgICAvLyBOb2RlL0NvbW1vbkpTXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcbiAgICAgICAgd2luZG93Lm5vVWlTbGlkZXIgPSBmYWN0b3J5KCk7XG4gICAgfVxuXG59KGZ1bmN0aW9uKCApe1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgVkVSU0lPTiA9ICcxMS4wLjAnO1xuXG5cblx0ZnVuY3Rpb24gaXNWYWxpZEZvcm1hdHRlciAoIGVudHJ5ICkge1xuXHRcdHJldHVybiB0eXBlb2YgZW50cnkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBlbnRyeS50byA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZW50cnkuZnJvbSA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQgKCBlbCApIHtcblx0XHRlbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsKTtcblx0fVxuXG5cdC8vIEJpbmRhYmxlIHZlcnNpb25cblx0ZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCBlICkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0fVxuXG5cdC8vIFJlbW92ZXMgZHVwbGljYXRlcyBmcm9tIGFuIGFycmF5LlxuXHRmdW5jdGlvbiB1bmlxdWUgKCBhcnJheSApIHtcblx0XHRyZXR1cm4gYXJyYXkuZmlsdGVyKGZ1bmN0aW9uKGEpe1xuXHRcdFx0cmV0dXJuICF0aGlzW2FdID8gdGhpc1thXSA9IHRydWUgOiBmYWxzZTtcblx0XHR9LCB7fSk7XG5cdH1cblxuXHQvLyBSb3VuZCBhIHZhbHVlIHRvIHRoZSBjbG9zZXN0ICd0bycuXG5cdGZ1bmN0aW9uIGNsb3Nlc3QgKCB2YWx1ZSwgdG8gKSB7XG5cdFx0cmV0dXJuIE1hdGgucm91bmQodmFsdWUgLyB0bykgKiB0bztcblx0fVxuXG5cdC8vIEN1cnJlbnQgcG9zaXRpb24gb2YgYW4gZWxlbWVudCByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnQuXG5cdGZ1bmN0aW9uIG9mZnNldCAoIGVsZW0sIG9yaWVudGF0aW9uICkge1xuXG5cdFx0dmFyIHJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdHZhciBkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cdFx0dmFyIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdHZhciBwYWdlT2Zmc2V0ID0gZ2V0UGFnZU9mZnNldChkb2MpO1xuXG5cdFx0Ly8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGNvbnRhaW5zIGxlZnQgc2Nyb2xsIGluIENocm9tZSBvbiBBbmRyb2lkLlxuXHRcdC8vIEkgaGF2ZW4ndCBmb3VuZCBhIGZlYXR1cmUgZGV0ZWN0aW9uIHRoYXQgcHJvdmVzIHRoaXMuIFdvcnN0IGNhc2Vcblx0XHQvLyBzY2VuYXJpbyBvbiBtaXMtbWF0Y2g6IHRoZSAndGFwJyBmZWF0dXJlIG9uIGhvcml6b250YWwgc2xpZGVycyBicmVha3MuXG5cdFx0aWYgKCAvd2Via2l0LipDaHJvbWUuKk1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgKSB7XG5cdFx0XHRwYWdlT2Zmc2V0LnggPSAwO1xuXHRcdH1cblxuXHRcdHJldHVybiBvcmllbnRhdGlvbiA/IChyZWN0LnRvcCArIHBhZ2VPZmZzZXQueSAtIGRvY0VsZW0uY2xpZW50VG9wKSA6IChyZWN0LmxlZnQgKyBwYWdlT2Zmc2V0LnggLSBkb2NFbGVtLmNsaWVudExlZnQpO1xuXHR9XG5cblx0Ly8gQ2hlY2tzIHdoZXRoZXIgYSB2YWx1ZSBpcyBudW1lcmljYWwuXG5cdGZ1bmN0aW9uIGlzTnVtZXJpYyAoIGEgKSB7XG5cdFx0cmV0dXJuIHR5cGVvZiBhID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oIGEgKSAmJiBpc0Zpbml0ZSggYSApO1xuXHR9XG5cblx0Ly8gU2V0cyBhIGNsYXNzIGFuZCByZW1vdmVzIGl0IGFmdGVyIFtkdXJhdGlvbl0gbXMuXG5cdGZ1bmN0aW9uIGFkZENsYXNzRm9yICggZWxlbWVudCwgY2xhc3NOYW1lLCBkdXJhdGlvbiApIHtcblx0XHRpZiAoZHVyYXRpb24gPiAwKSB7XG5cdFx0YWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0cmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcblx0XHRcdH0sIGR1cmF0aW9uKTtcblx0XHR9XG5cdH1cblxuXHQvLyBMaW1pdHMgYSB2YWx1ZSB0byAwIC0gMTAwXG5cdGZ1bmN0aW9uIGxpbWl0ICggYSApIHtcblx0XHRyZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oYSwgMTAwKSwgMCk7XG5cdH1cblxuXHQvLyBXcmFwcyBhIHZhcmlhYmxlIGFzIGFuIGFycmF5LCBpZiBpdCBpc24ndCBvbmUgeWV0LlxuXHQvLyBOb3RlIHRoYXQgYW4gaW5wdXQgYXJyYXkgaXMgcmV0dXJuZWQgYnkgcmVmZXJlbmNlIVxuXHRmdW5jdGlvbiBhc0FycmF5ICggYSApIHtcblx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShhKSA/IGEgOiBbYV07XG5cdH1cblxuXHQvLyBDb3VudHMgZGVjaW1hbHNcblx0ZnVuY3Rpb24gY291bnREZWNpbWFscyAoIG51bVN0ciApIHtcblx0XHRudW1TdHIgPSBTdHJpbmcobnVtU3RyKTtcblx0XHR2YXIgcGllY2VzID0gbnVtU3RyLnNwbGl0KFwiLlwiKTtcblx0XHRyZXR1cm4gcGllY2VzLmxlbmd0aCA+IDEgPyBwaWVjZXNbMV0ubGVuZ3RoIDogMDtcblx0fVxuXG5cdC8vIGh0dHA6Ly95b3VtaWdodG5vdG5lZWRqcXVlcnkuY29tLyNhZGRfY2xhc3Ncblx0ZnVuY3Rpb24gYWRkQ2xhc3MgKCBlbCwgY2xhc3NOYW1lICkge1xuXHRcdGlmICggZWwuY2xhc3NMaXN0ICkge1xuXHRcdFx0ZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuXHRcdH1cblx0fVxuXG5cdC8vIGh0dHA6Ly95b3VtaWdodG5vdG5lZWRqcXVlcnkuY29tLyNyZW1vdmVfY2xhc3Ncblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MgKCBlbCwgY2xhc3NOYW1lICkge1xuXHRcdGlmICggZWwuY2xhc3NMaXN0ICkge1xuXHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpO1xuXHRcdH1cblx0fVxuXG5cdC8vIGh0dHBzOi8vcGxhaW5qcy5jb20vamF2YXNjcmlwdC9hdHRyaWJ1dGVzL2FkZGluZy1yZW1vdmluZy1hbmQtdGVzdGluZy1mb3ItY2xhc3Nlcy05L1xuXHRmdW5jdGlvbiBoYXNDbGFzcyAoIGVsLCBjbGFzc05hbWUgKSB7XG5cdFx0cmV0dXJuIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpIDogbmV3IFJlZ0V4cCgnXFxcXGInICsgY2xhc3NOYW1lICsgJ1xcXFxiJykudGVzdChlbC5jbGFzc05hbWUpO1xuXHR9XG5cblx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy9zY3JvbGxZI05vdGVzXG5cdGZ1bmN0aW9uIGdldFBhZ2VPZmZzZXQgKCBkb2MgKSB7XG5cblx0XHR2YXIgc3VwcG9ydFBhZ2VPZmZzZXQgPSB3aW5kb3cucGFnZVhPZmZzZXQgIT09IHVuZGVmaW5lZDtcblx0XHR2YXIgaXNDU1MxQ29tcGF0ID0gKChkb2MuY29tcGF0TW9kZSB8fCBcIlwiKSA9PT0gXCJDU1MxQ29tcGF0XCIpO1xuXHRcdHZhciB4ID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVhPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgOiBkb2MuYm9keS5zY3JvbGxMZWZ0O1xuXHRcdHZhciB5ID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA6IGRvYy5ib2R5LnNjcm9sbFRvcDtcblxuXHRcdHJldHVybiB7XG5cdFx0XHR4OiB4LFxuXHRcdFx0eTogeVxuXHRcdH07XG5cdH1cblxuXHQvLyB3ZSBwcm92aWRlIGEgZnVuY3Rpb24gdG8gY29tcHV0ZSBjb25zdGFudHMgaW5zdGVhZFxuXHQvLyBvZiBhY2Nlc3Npbmcgd2luZG93LiogYXMgc29vbiBhcyB0aGUgbW9kdWxlIG5lZWRzIGl0XG5cdC8vIHNvIHRoYXQgd2UgZG8gbm90IGNvbXB1dGUgYW55dGhpbmcgaWYgbm90IG5lZWRlZFxuXHRmdW5jdGlvbiBnZXRBY3Rpb25zICggKSB7XG5cblx0XHQvLyBEZXRlcm1pbmUgdGhlIGV2ZW50cyB0byBiaW5kLiBJRTExIGltcGxlbWVudHMgcG9pbnRlckV2ZW50cyB3aXRob3V0XG5cdFx0Ly8gYSBwcmVmaXgsIHdoaWNoIGJyZWFrcyBjb21wYXRpYmlsaXR5IHdpdGggdGhlIElFMTAgaW1wbGVtZW50YXRpb24uXG5cdFx0cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQgPyB7XG5cdFx0XHRzdGFydDogJ3BvaW50ZXJkb3duJyxcblx0XHRcdG1vdmU6ICdwb2ludGVybW92ZScsXG5cdFx0XHRlbmQ6ICdwb2ludGVydXAnXG5cdFx0fSA6IHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCA/IHtcblx0XHRcdHN0YXJ0OiAnTVNQb2ludGVyRG93bicsXG5cdFx0XHRtb3ZlOiAnTVNQb2ludGVyTW92ZScsXG5cdFx0XHRlbmQ6ICdNU1BvaW50ZXJVcCdcblx0XHR9IDoge1xuXHRcdFx0c3RhcnQ6ICdtb3VzZWRvd24gdG91Y2hzdGFydCcsXG5cdFx0XHRtb3ZlOiAnbW91c2Vtb3ZlIHRvdWNobW92ZScsXG5cdFx0XHRlbmQ6ICdtb3VzZXVwIHRvdWNoZW5kJ1xuXHRcdH07XG5cdH1cblxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9FdmVudExpc3RlbmVyT3B0aW9ucy9ibG9iL2doLXBhZ2VzL2V4cGxhaW5lci5tZFxuXHQvLyBJc3N1ZSAjNzg1XG5cdGZ1bmN0aW9uIGdldFN1cHBvcnRzUGFzc2l2ZSAoICkge1xuXG5cdFx0dmFyIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuXG5cdFx0dHJ5IHtcblxuXHRcdFx0dmFyIG9wdHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHN1cHBvcnRzUGFzc2l2ZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIG9wdHMpO1xuXG5cdFx0fSBjYXRjaCAoZSkge31cblxuXHRcdHJldHVybiBzdXBwb3J0c1Bhc3NpdmU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRTdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSAoICkge1xuXHRcdHJldHVybiB3aW5kb3cuQ1NTICYmIENTUy5zdXBwb3J0cyAmJiBDU1Muc3VwcG9ydHMoJ3RvdWNoLWFjdGlvbicsICdub25lJyk7XG5cdH1cblxuXG4vLyBWYWx1ZSBjYWxjdWxhdGlvblxuXG5cdC8vIERldGVybWluZSB0aGUgc2l6ZSBvZiBhIHN1Yi1yYW5nZSBpbiByZWxhdGlvbiB0byBhIGZ1bGwgcmFuZ2UuXG5cdGZ1bmN0aW9uIHN1YlJhbmdlUmF0aW8gKCBwYSwgcGIgKSB7XG5cdFx0cmV0dXJuICgxMDAgLyAocGIgLSBwYSkpO1xuXHR9XG5cblx0Ly8gKHBlcmNlbnRhZ2UpIEhvdyBtYW55IHBlcmNlbnQgaXMgdGhpcyB2YWx1ZSBvZiB0aGlzIHJhbmdlP1xuXHRmdW5jdGlvbiBmcm9tUGVyY2VudGFnZSAoIHJhbmdlLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gKHZhbHVlICogMTAwKSAvICggcmFuZ2VbMV0gLSByYW5nZVswXSApO1xuXHR9XG5cblx0Ly8gKHBlcmNlbnRhZ2UpIFdoZXJlIGlzIHRoaXMgdmFsdWUgb24gdGhpcyByYW5nZT9cblx0ZnVuY3Rpb24gdG9QZXJjZW50YWdlICggcmFuZ2UsIHZhbHVlICkge1xuXHRcdHJldHVybiBmcm9tUGVyY2VudGFnZSggcmFuZ2UsIHJhbmdlWzBdIDwgMCA/XG5cdFx0XHR2YWx1ZSArIE1hdGguYWJzKHJhbmdlWzBdKSA6XG5cdFx0XHRcdHZhbHVlIC0gcmFuZ2VbMF0gKTtcblx0fVxuXG5cdC8vICh2YWx1ZSkgSG93IG11Y2ggaXMgdGhpcyBwZXJjZW50YWdlIG9uIHRoaXMgcmFuZ2U/XG5cdGZ1bmN0aW9uIGlzUGVyY2VudGFnZSAoIHJhbmdlLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gKCh2YWx1ZSAqICggcmFuZ2VbMV0gLSByYW5nZVswXSApKSAvIDEwMCkgKyByYW5nZVswXTtcblx0fVxuXG5cbi8vIFJhbmdlIGNvbnZlcnNpb25cblxuXHRmdW5jdGlvbiBnZXRKICggdmFsdWUsIGFyciApIHtcblxuXHRcdHZhciBqID0gMTtcblxuXHRcdHdoaWxlICggdmFsdWUgPj0gYXJyW2pdICl7XG5cdFx0XHRqICs9IDE7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGo7XG5cdH1cblxuXHQvLyAocGVyY2VudGFnZSkgSW5wdXQgYSB2YWx1ZSwgZmluZCB3aGVyZSwgb24gYSBzY2FsZSBvZiAwLTEwMCwgaXQgYXBwbGllcy5cblx0ZnVuY3Rpb24gdG9TdGVwcGluZyAoIHhWYWwsIHhQY3QsIHZhbHVlICkge1xuXG5cdFx0aWYgKCB2YWx1ZSA+PSB4VmFsLnNsaWNlKC0xKVswXSApe1xuXHRcdFx0cmV0dXJuIDEwMDtcblx0XHR9XG5cblx0XHR2YXIgaiA9IGdldEooIHZhbHVlLCB4VmFsICksIHZhLCB2YiwgcGEsIHBiO1xuXG5cdFx0dmEgPSB4VmFsW2otMV07XG5cdFx0dmIgPSB4VmFsW2pdO1xuXHRcdHBhID0geFBjdFtqLTFdO1xuXHRcdHBiID0geFBjdFtqXTtcblxuXHRcdHJldHVybiBwYSArICh0b1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sIHZhbHVlKSAvIHN1YlJhbmdlUmF0aW8gKHBhLCBwYikpO1xuXHR9XG5cblx0Ly8gKHZhbHVlKSBJbnB1dCBhIHBlcmNlbnRhZ2UsIGZpbmQgd2hlcmUgaXQgaXMgb24gdGhlIHNwZWNpZmllZCByYW5nZS5cblx0ZnVuY3Rpb24gZnJvbVN0ZXBwaW5nICggeFZhbCwgeFBjdCwgdmFsdWUgKSB7XG5cblx0XHQvLyBUaGVyZSBpcyBubyByYW5nZSBncm91cCB0aGF0IGZpdHMgMTAwXG5cdFx0aWYgKCB2YWx1ZSA+PSAxMDAgKXtcblx0XHRcdHJldHVybiB4VmFsLnNsaWNlKC0xKVswXTtcblx0XHR9XG5cblx0XHR2YXIgaiA9IGdldEooIHZhbHVlLCB4UGN0ICksIHZhLCB2YiwgcGEsIHBiO1xuXG5cdFx0dmEgPSB4VmFsW2otMV07XG5cdFx0dmIgPSB4VmFsW2pdO1xuXHRcdHBhID0geFBjdFtqLTFdO1xuXHRcdHBiID0geFBjdFtqXTtcblxuXHRcdHJldHVybiBpc1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sICh2YWx1ZSAtIHBhKSAqIHN1YlJhbmdlUmF0aW8gKHBhLCBwYikpO1xuXHR9XG5cblx0Ly8gKHBlcmNlbnRhZ2UpIEdldCB0aGUgc3RlcCB0aGF0IGFwcGxpZXMgYXQgYSBjZXJ0YWluIHZhbHVlLlxuXHRmdW5jdGlvbiBnZXRTdGVwICggeFBjdCwgeFN0ZXBzLCBzbmFwLCB2YWx1ZSApIHtcblxuXHRcdGlmICggdmFsdWUgPT09IDEwMCApIHtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cblx0XHR2YXIgaiA9IGdldEooIHZhbHVlLCB4UGN0ICksIGEsIGI7XG5cblx0XHQvLyBJZiAnc25hcCcgaXMgc2V0LCBzdGVwcyBhcmUgdXNlZCBhcyBmaXhlZCBwb2ludHMgb24gdGhlIHNsaWRlci5cblx0XHRpZiAoIHNuYXAgKSB7XG5cblx0XHRcdGEgPSB4UGN0W2otMV07XG5cdFx0XHRiID0geFBjdFtqXTtcblxuXHRcdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBwb3NpdGlvbiwgYSBvciBiLlxuXHRcdFx0aWYgKCh2YWx1ZSAtIGEpID4gKChiLWEpLzIpKXtcblx0XHRcdFx0cmV0dXJuIGI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhO1xuXHRcdH1cblxuXHRcdGlmICggIXhTdGVwc1tqLTFdICl7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHhQY3Rbai0xXSArIGNsb3Nlc3QoXG5cdFx0XHR2YWx1ZSAtIHhQY3Rbai0xXSxcblx0XHRcdHhTdGVwc1tqLTFdXG5cdFx0KTtcblx0fVxuXG5cbi8vIEVudHJ5IHBhcnNpbmdcblxuXHRmdW5jdGlvbiBoYW5kbGVFbnRyeVBvaW50ICggaW5kZXgsIHZhbHVlLCB0aGF0ICkge1xuXG5cdFx0dmFyIHBlcmNlbnRhZ2U7XG5cblx0XHQvLyBXcmFwIG51bWVyaWNhbCBpbnB1dCBpbiBhbiBhcnJheS5cblx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdHZhbHVlID0gW3ZhbHVlXTtcblx0XHR9XG5cblx0XHQvLyBSZWplY3QgYW55IGludmFsaWQgaW5wdXQsIGJ5IHRlc3Rpbmcgd2hldGhlciB2YWx1ZSBpcyBhbiBhcnJheS5cblx0XHRpZiAoICFBcnJheS5pc0FycmF5KHZhbHVlKSApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnIGNvbnRhaW5zIGludmFsaWQgdmFsdWUuXCIpO1xuXHRcdH1cblxuXHRcdC8vIENvdmVydCBtaW4vbWF4IHN5bnRheCB0byAwIGFuZCAxMDAuXG5cdFx0aWYgKCBpbmRleCA9PT0gJ21pbicgKSB7XG5cdFx0XHRwZXJjZW50YWdlID0gMDtcblx0XHR9IGVsc2UgaWYgKCBpbmRleCA9PT0gJ21heCcgKSB7XG5cdFx0XHRwZXJjZW50YWdlID0gMTAwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwZXJjZW50YWdlID0gcGFyc2VGbG9hdCggaW5kZXggKTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgY29ycmVjdCBpbnB1dC5cblx0XHRpZiAoICFpc051bWVyaWMoIHBlcmNlbnRhZ2UgKSB8fCAhaXNOdW1lcmljKCB2YWx1ZVswXSApICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnIHZhbHVlIGlzbid0IG51bWVyaWMuXCIpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHZhbHVlcy5cblx0XHR0aGF0LnhQY3QucHVzaCggcGVyY2VudGFnZSApO1xuXHRcdHRoYXQueFZhbC5wdXNoKCB2YWx1ZVswXSApO1xuXG5cdFx0Ly8gTmFOIHdpbGwgZXZhbHVhdGUgdG8gZmFsc2UgdG9vLCBidXQgdG8ga2VlcFxuXHRcdC8vIGxvZ2dpbmcgY2xlYXIsIHNldCBzdGVwIGV4cGxpY2l0bHkuIE1ha2Ugc3VyZVxuXHRcdC8vIG5vdCB0byBvdmVycmlkZSB0aGUgJ3N0ZXAnIHNldHRpbmcgd2l0aCBmYWxzZS5cblx0XHRpZiAoICFwZXJjZW50YWdlICkge1xuXHRcdFx0aWYgKCAhaXNOYU4oIHZhbHVlWzFdICkgKSB7XG5cdFx0XHRcdHRoYXQueFN0ZXBzWzBdID0gdmFsdWVbMV07XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoYXQueFN0ZXBzLnB1c2goIGlzTmFOKHZhbHVlWzFdKSA/IGZhbHNlIDogdmFsdWVbMV0gKTtcblx0XHR9XG5cblx0XHR0aGF0LnhIaWdoZXN0Q29tcGxldGVTdGVwLnB1c2goMCk7XG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVTdGVwUG9pbnQgKCBpLCBuLCB0aGF0ICkge1xuXG5cdFx0Ly8gSWdub3JlICdmYWxzZScgc3RlcHBpbmcuXG5cdFx0aWYgKCAhbiApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIEZhY3RvciB0byByYW5nZSByYXRpb1xuXHRcdHRoYXQueFN0ZXBzW2ldID0gZnJvbVBlcmNlbnRhZ2UoW1xuXHRcdFx0IHRoYXQueFZhbFtpXVxuXHRcdFx0LHRoYXQueFZhbFtpKzFdXG5cdFx0XSwgbikgLyBzdWJSYW5nZVJhdGlvIChcblx0XHRcdHRoYXQueFBjdFtpXSxcblx0XHRcdHRoYXQueFBjdFtpKzFdICk7XG5cblx0XHR2YXIgdG90YWxTdGVwcyA9ICh0aGF0LnhWYWxbaSsxXSAtIHRoYXQueFZhbFtpXSkgLyB0aGF0LnhOdW1TdGVwc1tpXTtcblx0XHR2YXIgaGlnaGVzdFN0ZXAgPSBNYXRoLmNlaWwoTnVtYmVyKHRvdGFsU3RlcHMudG9GaXhlZCgzKSkgLSAxKTtcblx0XHR2YXIgc3RlcCA9IHRoYXQueFZhbFtpXSArICh0aGF0LnhOdW1TdGVwc1tpXSAqIGhpZ2hlc3RTdGVwKTtcblxuXHRcdHRoYXQueEhpZ2hlc3RDb21wbGV0ZVN0ZXBbaV0gPSBzdGVwO1xuXHR9XG5cblxuLy8gSW50ZXJmYWNlXG5cblx0ZnVuY3Rpb24gU3BlY3RydW0gKCBlbnRyeSwgc25hcCwgc2luZ2xlU3RlcCApIHtcblxuXHRcdHRoaXMueFBjdCA9IFtdO1xuXHRcdHRoaXMueFZhbCA9IFtdO1xuXHRcdHRoaXMueFN0ZXBzID0gWyBzaW5nbGVTdGVwIHx8IGZhbHNlIF07XG5cdFx0dGhpcy54TnVtU3RlcHMgPSBbIGZhbHNlIF07XG5cdFx0dGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcCA9IFtdO1xuXG5cdFx0dGhpcy5zbmFwID0gc25hcDtcblxuXHRcdHZhciBpbmRleCwgb3JkZXJlZCA9IFsgLyogWzAsICdtaW4nXSwgWzEsICc1MCUnXSwgWzIsICdtYXgnXSAqLyBdO1xuXG5cdFx0Ly8gTWFwIHRoZSBvYmplY3Qga2V5cyB0byBhbiBhcnJheS5cblx0XHRmb3IgKCBpbmRleCBpbiBlbnRyeSApIHtcblx0XHRcdGlmICggZW50cnkuaGFzT3duUHJvcGVydHkoaW5kZXgpICkge1xuXHRcdFx0XHRvcmRlcmVkLnB1c2goW2VudHJ5W2luZGV4XSwgaW5kZXhdKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTb3J0IGFsbCBlbnRyaWVzIGJ5IHZhbHVlIChudW1lcmljIHNvcnQpLlxuXHRcdGlmICggb3JkZXJlZC5sZW5ndGggJiYgdHlwZW9mIG9yZGVyZWRbMF1bMF0gPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcmRlcmVkLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYVswXVswXSAtIGJbMF1bMF07IH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRvcmRlcmVkLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYVswXSAtIGJbMF07IH0pO1xuXHRcdH1cblxuXG5cdFx0Ly8gQ29udmVydCBhbGwgZW50cmllcyB0byBzdWJyYW5nZXMuXG5cdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IG9yZGVyZWQubGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0aGFuZGxlRW50cnlQb2ludChvcmRlcmVkW2luZGV4XVsxXSwgb3JkZXJlZFtpbmRleF1bMF0sIHRoaXMpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHRoZSBhY3R1YWwgc3RlcCB2YWx1ZXMuXG5cdFx0Ly8geFN0ZXBzIGlzIHNvcnRlZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB4UGN0IGFuZCB4VmFsLlxuXHRcdHRoaXMueE51bVN0ZXBzID0gdGhpcy54U3RlcHMuc2xpY2UoMCk7XG5cblx0XHQvLyBDb252ZXJ0IGFsbCBudW1lcmljIHN0ZXBzIHRvIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBzdWJyYW5nZSB0aGV5IHJlcHJlc2VudC5cblx0XHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy54TnVtU3RlcHMubGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0aGFuZGxlU3RlcFBvaW50KGluZGV4LCB0aGlzLnhOdW1TdGVwc1tpbmRleF0sIHRoaXMpO1xuXHRcdH1cblx0fVxuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5nZXRNYXJnaW4gPSBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dmFyIHN0ZXAgPSB0aGlzLnhOdW1TdGVwc1swXTtcblxuXHRcdGlmICggc3RlcCAmJiAoKHZhbHVlIC8gc3RlcCkgJSAxKSAhPT0gMCApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2xpbWl0JywgJ21hcmdpbicgYW5kICdwYWRkaW5nJyBtdXN0IGJlIGRpdmlzaWJsZSBieSBzdGVwLlwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy54UGN0Lmxlbmd0aCA9PT0gMiA/IGZyb21QZXJjZW50YWdlKHRoaXMueFZhbCwgdmFsdWUpIDogZmFsc2U7XG5cdH07XG5cblx0U3BlY3RydW0ucHJvdG90eXBlLnRvU3RlcHBpbmcgPSBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dmFsdWUgPSB0b1N0ZXBwaW5nKCB0aGlzLnhWYWwsIHRoaXMueFBjdCwgdmFsdWUgKTtcblxuXHRcdHJldHVybiB2YWx1ZTtcblx0fTtcblxuXHRTcGVjdHJ1bS5wcm90b3R5cGUuZnJvbVN0ZXBwaW5nID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHJldHVybiBmcm9tU3RlcHBpbmcoIHRoaXMueFZhbCwgdGhpcy54UGN0LCB2YWx1ZSApO1xuXHR9O1xuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5nZXRTdGVwID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHZhbHVlID0gZ2V0U3RlcCh0aGlzLnhQY3QsIHRoaXMueFN0ZXBzLCB0aGlzLnNuYXAsIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH07XG5cblx0U3BlY3RydW0ucHJvdG90eXBlLmdldE5lYXJieVN0ZXBzID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHZhciBqID0gZ2V0Sih2YWx1ZSwgdGhpcy54UGN0KTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRzdGVwQmVmb3JlOiB7IHN0YXJ0VmFsdWU6IHRoaXMueFZhbFtqLTJdLCBzdGVwOiB0aGlzLnhOdW1TdGVwc1tqLTJdLCBoaWdoZXN0U3RlcDogdGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcFtqLTJdIH0sXG5cdFx0XHR0aGlzU3RlcDogeyBzdGFydFZhbHVlOiB0aGlzLnhWYWxbai0xXSwgc3RlcDogdGhpcy54TnVtU3RlcHNbai0xXSwgaGlnaGVzdFN0ZXA6IHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXBbai0xXSB9LFxuXHRcdFx0c3RlcEFmdGVyOiB7IHN0YXJ0VmFsdWU6IHRoaXMueFZhbFtqLTBdLCBzdGVwOiB0aGlzLnhOdW1TdGVwc1tqLTBdLCBoaWdoZXN0U3RlcDogdGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcFtqLTBdIH1cblx0XHR9O1xuXHR9O1xuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5jb3VudFN0ZXBEZWNpbWFscyA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgc3RlcERlY2ltYWxzID0gdGhpcy54TnVtU3RlcHMubWFwKGNvdW50RGVjaW1hbHMpO1xuXHRcdHJldHVybiBNYXRoLm1heC5hcHBseShudWxsLCBzdGVwRGVjaW1hbHMpO1xuIFx0fTtcblxuXHQvLyBPdXRzaWRlIHRlc3Rpbmdcblx0U3BlY3RydW0ucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoIHZhbHVlICkge1xuXHRcdHJldHVybiB0aGlzLmdldFN0ZXAodGhpcy50b1N0ZXBwaW5nKHZhbHVlKSk7XG5cdH07XG5cbi8qXHRFdmVyeSBpbnB1dCBvcHRpb24gaXMgdGVzdGVkIGFuZCBwYXJzZWQuIFRoaXMnbGwgcHJldmVudFxuXHRlbmRsZXNzIHZhbGlkYXRpb24gaW4gaW50ZXJuYWwgbWV0aG9kcy4gVGhlc2UgdGVzdHMgYXJlXG5cdHN0cnVjdHVyZWQgd2l0aCBhbiBpdGVtIGZvciBldmVyeSBvcHRpb24gYXZhaWxhYmxlLiBBblxuXHRvcHRpb24gY2FuIGJlIG1hcmtlZCBhcyByZXF1aXJlZCBieSBzZXR0aW5nIHRoZSAncicgZmxhZy5cblx0VGhlIHRlc3RpbmcgZnVuY3Rpb24gaXMgcHJvdmlkZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG5cdFx0LSBUaGUgcHJvdmlkZWQgdmFsdWUgZm9yIHRoZSBvcHRpb247XG5cdFx0LSBBIHJlZmVyZW5jZSB0byB0aGUgb3B0aW9ucyBvYmplY3Q7XG5cdFx0LSBUaGUgbmFtZSBmb3IgdGhlIG9wdGlvbjtcblxuXHRUaGUgdGVzdGluZyBmdW5jdGlvbiByZXR1cm5zIGZhbHNlIHdoZW4gYW4gZXJyb3IgaXMgZGV0ZWN0ZWQsXG5cdG9yIHRydWUgd2hlbiBldmVyeXRoaW5nIGlzIE9LLiBJdCBjYW4gYWxzbyBtb2RpZnkgdGhlIG9wdGlvblxuXHRvYmplY3QsIHRvIG1ha2Ugc3VyZSBhbGwgdmFsdWVzIGNhbiBiZSBjb3JyZWN0bHkgbG9vcGVkIGVsc2V3aGVyZS4gKi9cblxuXHR2YXIgZGVmYXVsdEZvcm1hdHRlciA9IHsgJ3RvJzogZnVuY3Rpb24oIHZhbHVlICl7XG5cdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUudG9GaXhlZCgyKTtcblx0fSwgJ2Zyb20nOiBOdW1iZXIgfTtcblxuXHRmdW5jdGlvbiB2YWxpZGF0ZUZvcm1hdCAoIGVudHJ5ICkge1xuXG5cdFx0Ly8gQW55IG9iamVjdCB3aXRoIGEgdG8gYW5kIGZyb20gbWV0aG9kIGlzIHN1cHBvcnRlZC5cblx0XHRpZiAoIGlzVmFsaWRGb3JtYXR0ZXIoZW50cnkpICkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnZm9ybWF0JyByZXF1aXJlcyAndG8nIGFuZCAnZnJvbScgbWV0aG9kcy5cIik7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0U3RlcCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoICFpc051bWVyaWMoIGVudHJ5ICkgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdzdGVwJyBpcyBub3QgbnVtZXJpYy5cIik7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHN0ZXAgb3B0aW9uIGNhbiBzdGlsbCBiZSB1c2VkIHRvIHNldCBzdGVwcGluZ1xuXHRcdC8vIGZvciBsaW5lYXIgc2xpZGVycy4gT3ZlcndyaXR0ZW4gaWYgc2V0IGluICdyYW5nZScuXG5cdFx0cGFyc2VkLnNpbmdsZVN0ZXAgPSBlbnRyeTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RSYW5nZSAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBGaWx0ZXIgaW5jb3JyZWN0IGlucHV0LlxuXHRcdGlmICggdHlwZW9mIGVudHJ5ICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KGVudHJ5KSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3JhbmdlJyBpcyBub3QgYW4gb2JqZWN0LlwiKTtcblx0XHR9XG5cblx0XHQvLyBDYXRjaCBtaXNzaW5nIHN0YXJ0IG9yIGVuZC5cblx0XHRpZiAoIGVudHJ5Lm1pbiA9PT0gdW5kZWZpbmVkIHx8IGVudHJ5Lm1heCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiBNaXNzaW5nICdtaW4nIG9yICdtYXgnIGluICdyYW5nZScuXCIpO1xuXHRcdH1cblxuXHRcdC8vIENhdGNoIGVxdWFsIHN0YXJ0IG9yIGVuZC5cblx0XHRpZiAoIGVudHJ5Lm1pbiA9PT0gZW50cnkubWF4ICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnICdtaW4nIGFuZCAnbWF4JyBjYW5ub3QgYmUgZXF1YWwuXCIpO1xuXHRcdH1cblxuXHRcdHBhcnNlZC5zcGVjdHJ1bSA9IG5ldyBTcGVjdHJ1bShlbnRyeSwgcGFyc2VkLnNuYXAsIHBhcnNlZC5zaW5nbGVTdGVwKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RTdGFydCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRlbnRyeSA9IGFzQXJyYXkoZW50cnkpO1xuXG5cdFx0Ly8gVmFsaWRhdGUgaW5wdXQuIFZhbHVlcyBhcmVuJ3QgdGVzdGVkLCBhcyB0aGUgcHVibGljIC52YWwgbWV0aG9kXG5cdFx0Ly8gd2lsbCBhbHdheXMgcHJvdmlkZSBhIHZhbGlkIGxvY2F0aW9uLlxuXHRcdGlmICggIUFycmF5LmlzQXJyYXkoIGVudHJ5ICkgfHwgIWVudHJ5Lmxlbmd0aCApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3N0YXJ0JyBvcHRpb24gaXMgaW5jb3JyZWN0LlwiKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSB0aGUgbnVtYmVyIG9mIGhhbmRsZXMuXG5cdFx0cGFyc2VkLmhhbmRsZXMgPSBlbnRyeS5sZW5ndGg7XG5cblx0XHQvLyBXaGVuIHRoZSBzbGlkZXIgaXMgaW5pdGlhbGl6ZWQsIHRoZSAudmFsIG1ldGhvZCB3aWxsXG5cdFx0Ly8gYmUgY2FsbGVkIHdpdGggdGhlIHN0YXJ0IG9wdGlvbnMuXG5cdFx0cGFyc2VkLnN0YXJ0ID0gZW50cnk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0U25hcCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBFbmZvcmNlIDEwMCUgc3RlcHBpbmcgd2l0aGluIHN1YnJhbmdlcy5cblx0XHRwYXJzZWQuc25hcCA9IGVudHJ5O1xuXG5cdFx0aWYgKCB0eXBlb2YgZW50cnkgIT09ICdib29sZWFuJyApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc25hcCcgb3B0aW9uIG11c3QgYmUgYSBib29sZWFuLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0QW5pbWF0ZSAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBFbmZvcmNlIDEwMCUgc3RlcHBpbmcgd2l0aGluIHN1YnJhbmdlcy5cblx0XHRwYXJzZWQuYW5pbWF0ZSA9IGVudHJ5O1xuXG5cdFx0aWYgKCB0eXBlb2YgZW50cnkgIT09ICdib29sZWFuJyApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnYW5pbWF0ZScgb3B0aW9uIG11c3QgYmUgYSBib29sZWFuLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0QW5pbWF0aW9uRHVyYXRpb24gKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0cGFyc2VkLmFuaW1hdGlvbkR1cmF0aW9uID0gZW50cnk7XG5cblx0XHRpZiAoIHR5cGVvZiBlbnRyeSAhPT0gJ251bWJlcicgKXtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2FuaW1hdGlvbkR1cmF0aW9uJyBvcHRpb24gbXVzdCBiZSBhIG51bWJlci5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdENvbm5lY3QgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0dmFyIGNvbm5lY3QgPSBbZmFsc2VdO1xuXHRcdHZhciBpO1xuXG5cdFx0Ly8gTWFwIGxlZ2FjeSBvcHRpb25zXG5cdFx0aWYgKCBlbnRyeSA9PT0gJ2xvd2VyJyApIHtcblx0XHRcdGVudHJ5ID0gW3RydWUsIGZhbHNlXTtcblx0XHR9XG5cblx0XHRlbHNlIGlmICggZW50cnkgPT09ICd1cHBlcicgKSB7XG5cdFx0XHRlbnRyeSA9IFtmYWxzZSwgdHJ1ZV07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIGJvb2xlYW4gb3B0aW9uc1xuXHRcdGlmICggZW50cnkgPT09IHRydWUgfHwgZW50cnkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRmb3IgKCBpID0gMTsgaSA8IHBhcnNlZC5oYW5kbGVzOyBpKysgKSB7XG5cdFx0XHRcdGNvbm5lY3QucHVzaChlbnRyeSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbm5lY3QucHVzaChmYWxzZSk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVqZWN0IGludmFsaWQgaW5wdXRcblx0XHRlbHNlIGlmICggIUFycmF5LmlzQXJyYXkoIGVudHJ5ICkgfHwgIWVudHJ5Lmxlbmd0aCB8fCBlbnRyeS5sZW5ndGggIT09IHBhcnNlZC5oYW5kbGVzICsgMSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Nvbm5lY3QnIG9wdGlvbiBkb2Vzbid0IG1hdGNoIGhhbmRsZSBjb3VudC5cIik7XG5cdFx0fVxuXG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25uZWN0ID0gZW50cnk7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLmNvbm5lY3QgPSBjb25uZWN0O1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdE9yaWVudGF0aW9uICggcGFyc2VkLCBlbnRyeSApIHtcblxuXHRcdC8vIFNldCBvcmllbnRhdGlvbiB0byBhbiBhIG51bWVyaWNhbCB2YWx1ZSBmb3IgZWFzeVxuXHRcdC8vIGFycmF5IHNlbGVjdGlvbi5cblx0XHRzd2l0Y2ggKCBlbnRyeSApe1xuXHRcdCAgY2FzZSAnaG9yaXpvbnRhbCc6XG5cdFx0XHRwYXJzZWQub3J0ID0gMDtcblx0XHRcdGJyZWFrO1xuXHRcdCAgY2FzZSAndmVydGljYWwnOlxuXHRcdFx0cGFyc2VkLm9ydCA9IDE7XG5cdFx0XHRicmVhaztcblx0XHQgIGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdvcmllbnRhdGlvbicgb3B0aW9uIGlzIGludmFsaWQuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RNYXJnaW4gKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0aWYgKCAhaXNOdW1lcmljKGVudHJ5KSApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbWFyZ2luJyBvcHRpb24gbXVzdCBiZSBudW1lcmljLlwiKTtcblx0XHR9XG5cblx0XHQvLyBJc3N1ZSAjNTgyXG5cdFx0aWYgKCBlbnRyeSA9PT0gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRwYXJzZWQubWFyZ2luID0gcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeSk7XG5cblx0XHRpZiAoICFwYXJzZWQubWFyZ2luICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbWFyZ2luJyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgb24gbGluZWFyIHNsaWRlcnMuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RMaW1pdCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoICFpc051bWVyaWMoZW50cnkpICl7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdsaW1pdCcgb3B0aW9uIG11c3QgYmUgbnVtZXJpYy5cIik7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLmxpbWl0ID0gcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeSk7XG5cblx0XHRpZiAoICFwYXJzZWQubGltaXQgfHwgcGFyc2VkLmhhbmRsZXMgPCAyICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbGltaXQnIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBvbiBsaW5lYXIgc2xpZGVycyB3aXRoIDIgb3IgbW9yZSBoYW5kbGVzLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0UGFkZGluZyAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoICFpc051bWVyaWMoZW50cnkpICYmICFBcnJheS5pc0FycmF5KGVudHJ5KSApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIG11c3QgYmUgbnVtZXJpYyBvciBhcnJheSBvZiBleGFjdGx5IDIgbnVtYmVycy5cIik7XG5cdFx0fVxuXG5cdFx0aWYgKCBBcnJheS5pc0FycmF5KGVudHJ5KSAmJiAhKGVudHJ5Lmxlbmd0aCA9PSAyIHx8IGlzTnVtZXJpYyhlbnRyeVswXSkgfHwgaXNOdW1lcmljKGVudHJ5WzFdKSkgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gbXVzdCBiZSBudW1lcmljIG9yIGFycmF5IG9mIGV4YWN0bHkgMiBudW1iZXJzLlwiKTtcblx0XHR9XG5cblx0XHRpZiAoIGVudHJ5ID09PSAwICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggIUFycmF5LmlzQXJyYXkoZW50cnkpICkge1xuXHRcdFx0ZW50cnkgPSBbZW50cnksIGVudHJ5XTtcblx0XHR9XG5cblx0XHQvLyAnZ2V0TWFyZ2luJyByZXR1cm5zIGZhbHNlIGZvciBpbnZhbGlkIHZhbHVlcy5cblx0XHRwYXJzZWQucGFkZGluZyA9IFtwYXJzZWQuc3BlY3RydW0uZ2V0TWFyZ2luKGVudHJ5WzBdKSwgcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeVsxXSldO1xuXG5cdFx0aWYgKCBwYXJzZWQucGFkZGluZ1swXSA9PT0gZmFsc2UgfHwgcGFyc2VkLnBhZGRpbmdbMV0gPT09IGZhbHNlICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIG9uIGxpbmVhciBzbGlkZXJzLlwiKTtcblx0XHR9XG5cblx0XHRpZiAoIHBhcnNlZC5wYWRkaW5nWzBdIDwgMCB8fCBwYXJzZWQucGFkZGluZ1sxXSA8IDAgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcihzKS5cIik7XG5cdFx0fVxuXG5cdFx0aWYgKCBwYXJzZWQucGFkZGluZ1swXSA+PSA1MCB8fCBwYXJzZWQucGFkZGluZ1sxXSA+PSA1MCApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3BhZGRpbmcnIG9wdGlvbiBtdXN0IGJlIGxlc3MgdGhhbiBoYWxmIHRoZSByYW5nZS5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdERpcmVjdGlvbiAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBTZXQgZGlyZWN0aW9uIGFzIGEgbnVtZXJpY2FsIHZhbHVlIGZvciBlYXN5IHBhcnNpbmcuXG5cdFx0Ly8gSW52ZXJ0IGNvbm5lY3Rpb24gZm9yIFJUTCBzbGlkZXJzLCBzbyB0aGF0IHRoZSBwcm9wZXJcblx0XHQvLyBoYW5kbGVzIGdldCB0aGUgY29ubmVjdC9iYWNrZ3JvdW5kIGNsYXNzZXMuXG5cdFx0c3dpdGNoICggZW50cnkgKSB7XG5cdFx0ICBjYXNlICdsdHInOlxuXHRcdFx0cGFyc2VkLmRpciA9IDA7XG5cdFx0XHRicmVhaztcblx0XHQgIGNhc2UgJ3J0bCc6XG5cdFx0XHRwYXJzZWQuZGlyID0gMTtcblx0XHRcdGJyZWFrO1xuXHRcdCAgZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2RpcmVjdGlvbicgb3B0aW9uIHdhcyBub3QgcmVjb2duaXplZC5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdEJlaGF2aW91ciAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhlIGlucHV0IGlzIGEgc3RyaW5nLlxuXHRcdGlmICggdHlwZW9mIGVudHJ5ICE9PSAnc3RyaW5nJyApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2JlaGF2aW91cicgbXVzdCBiZSBhIHN0cmluZyBjb250YWluaW5nIG9wdGlvbnMuXCIpO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIHRoZSBzdHJpbmcgY29udGFpbnMgYW55IGtleXdvcmRzLlxuXHRcdC8vIE5vbmUgYXJlIHJlcXVpcmVkLlxuXHRcdHZhciB0YXAgPSBlbnRyeS5pbmRleE9mKCd0YXAnKSA+PSAwO1xuXHRcdHZhciBkcmFnID0gZW50cnkuaW5kZXhPZignZHJhZycpID49IDA7XG5cdFx0dmFyIGZpeGVkID0gZW50cnkuaW5kZXhPZignZml4ZWQnKSA+PSAwO1xuXHRcdHZhciBzbmFwID0gZW50cnkuaW5kZXhPZignc25hcCcpID49IDA7XG5cdFx0dmFyIGhvdmVyID0gZW50cnkuaW5kZXhPZignaG92ZXInKSA+PSAwO1xuXG5cdFx0aWYgKCBmaXhlZCApIHtcblxuXHRcdFx0aWYgKCBwYXJzZWQuaGFuZGxlcyAhPT0gMiApIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnZml4ZWQnIGJlaGF2aW91ciBtdXN0IGJlIHVzZWQgd2l0aCAyIGhhbmRsZXNcIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVzZSBtYXJnaW4gdG8gZW5mb3JjZSBmaXhlZCBzdGF0ZVxuXHRcdFx0dGVzdE1hcmdpbihwYXJzZWQsIHBhcnNlZC5zdGFydFsxXSAtIHBhcnNlZC5zdGFydFswXSk7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLmV2ZW50cyA9IHtcblx0XHRcdHRhcDogdGFwIHx8IHNuYXAsXG5cdFx0XHRkcmFnOiBkcmFnLFxuXHRcdFx0Zml4ZWQ6IGZpeGVkLFxuXHRcdFx0c25hcDogc25hcCxcblx0XHRcdGhvdmVyOiBob3ZlclxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0VG9vbHRpcHMgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0aWYgKCBlbnRyeSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0ZWxzZSBpZiAoIGVudHJ5ID09PSB0cnVlICkge1xuXG5cdFx0XHRwYXJzZWQudG9vbHRpcHMgPSBbXTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgcGFyc2VkLmhhbmRsZXM7IGkrKyApIHtcblx0XHRcdFx0cGFyc2VkLnRvb2x0aXBzLnB1c2godHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZWxzZSB7XG5cblx0XHRcdHBhcnNlZC50b29sdGlwcyA9IGFzQXJyYXkoZW50cnkpO1xuXG5cdFx0XHRpZiAoIHBhcnNlZC50b29sdGlwcy5sZW5ndGggIT09IHBhcnNlZC5oYW5kbGVzICkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IG11c3QgcGFzcyBhIGZvcm1hdHRlciBmb3IgYWxsIGhhbmRsZXMuXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRwYXJzZWQudG9vbHRpcHMuZm9yRWFjaChmdW5jdGlvbihmb3JtYXR0ZXIpe1xuXHRcdFx0XHRpZiAoIHR5cGVvZiBmb3JtYXR0ZXIgIT09ICdib29sZWFuJyAmJiAodHlwZW9mIGZvcm1hdHRlciAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIGZvcm1hdHRlci50byAhPT0gJ2Z1bmN0aW9uJykgKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAndG9vbHRpcHMnIG11c3QgYmUgcGFzc2VkIGEgZm9ybWF0dGVyIG9yICdmYWxzZScuXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0QXJpYUZvcm1hdCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cdFx0cGFyc2VkLmFyaWFGb3JtYXQgPSBlbnRyeTtcblx0XHR2YWxpZGF0ZUZvcm1hdChlbnRyeSk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0Rm9ybWF0ICggcGFyc2VkLCBlbnRyeSApIHtcblx0XHRwYXJzZWQuZm9ybWF0ID0gZW50cnk7XG5cdFx0dmFsaWRhdGVGb3JtYXQoZW50cnkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdENzc1ByZWZpeCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoIGVudHJ5ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVudHJ5ICE9PSAnc3RyaW5nJyAmJiBlbnRyeSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdjc3NQcmVmaXgnIG11c3QgYmUgYSBzdHJpbmcgb3IgYGZhbHNlYC5cIik7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLmNzc1ByZWZpeCA9IGVudHJ5O1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdENzc0NsYXNzZXMgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0aWYgKCBlbnRyeSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbnRyeSAhPT0gJ29iamVjdCcgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdjc3NDbGFzc2VzJyBtdXN0IGJlIGFuIG9iamVjdC5cIik7XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlb2YgcGFyc2VkLmNzc1ByZWZpeCA9PT0gJ3N0cmluZycgKSB7XG5cdFx0XHRwYXJzZWQuY3NzQ2xhc3NlcyA9IHt9O1xuXG5cdFx0XHRmb3IgKCB2YXIga2V5IGluIGVudHJ5ICkge1xuXHRcdFx0XHRpZiAoICFlbnRyeS5oYXNPd25Qcm9wZXJ0eShrZXkpICkgeyBjb250aW51ZTsgfVxuXG5cdFx0XHRcdHBhcnNlZC5jc3NDbGFzc2VzW2tleV0gPSBwYXJzZWQuY3NzUHJlZml4ICsgZW50cnlba2V5XTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cGFyc2VkLmNzc0NsYXNzZXMgPSBlbnRyeTtcblx0XHR9XG5cdH1cblxuXHQvLyBUZXN0IGFsbCBkZXZlbG9wZXIgc2V0dGluZ3MgYW5kIHBhcnNlIHRvIGFzc3VtcHRpb24tc2FmZSB2YWx1ZXMuXG5cdGZ1bmN0aW9uIHRlc3RPcHRpb25zICggb3B0aW9ucyApIHtcblxuXHRcdC8vIFRvIHByb3ZlIGEgZml4IGZvciAjNTM3LCBmcmVlemUgb3B0aW9ucyBoZXJlLlxuXHRcdC8vIElmIHRoZSBvYmplY3QgaXMgbW9kaWZpZWQsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuXHRcdC8vIE9iamVjdC5mcmVlemUob3B0aW9ucyk7XG5cblx0XHR2YXIgcGFyc2VkID0ge1xuXHRcdFx0bWFyZ2luOiAwLFxuXHRcdFx0bGltaXQ6IDAsXG5cdFx0XHRwYWRkaW5nOiAwLFxuXHRcdFx0YW5pbWF0ZTogdHJ1ZSxcblx0XHRcdGFuaW1hdGlvbkR1cmF0aW9uOiAzMDAsXG5cdFx0XHRhcmlhRm9ybWF0OiBkZWZhdWx0Rm9ybWF0dGVyLFxuXHRcdFx0Zm9ybWF0OiBkZWZhdWx0Rm9ybWF0dGVyXG5cdFx0fTtcblxuXHRcdC8vIFRlc3RzIGFyZSBleGVjdXRlZCBpbiB0aGUgb3JkZXIgdGhleSBhcmUgcHJlc2VudGVkIGhlcmUuXG5cdFx0dmFyIHRlc3RzID0ge1xuXHRcdFx0J3N0ZXAnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0U3RlcCB9LFxuXHRcdFx0J3N0YXJ0JzogeyByOiB0cnVlLCB0OiB0ZXN0U3RhcnQgfSxcblx0XHRcdCdjb25uZWN0JzogeyByOiB0cnVlLCB0OiB0ZXN0Q29ubmVjdCB9LFxuXHRcdFx0J2RpcmVjdGlvbic6IHsgcjogdHJ1ZSwgdDogdGVzdERpcmVjdGlvbiB9LFxuXHRcdFx0J3NuYXAnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0U25hcCB9LFxuXHRcdFx0J2FuaW1hdGUnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0QW5pbWF0ZSB9LFxuXHRcdFx0J2FuaW1hdGlvbkR1cmF0aW9uJzogeyByOiBmYWxzZSwgdDogdGVzdEFuaW1hdGlvbkR1cmF0aW9uIH0sXG5cdFx0XHQncmFuZ2UnOiB7IHI6IHRydWUsIHQ6IHRlc3RSYW5nZSB9LFxuXHRcdFx0J29yaWVudGF0aW9uJzogeyByOiBmYWxzZSwgdDogdGVzdE9yaWVudGF0aW9uIH0sXG5cdFx0XHQnbWFyZ2luJzogeyByOiBmYWxzZSwgdDogdGVzdE1hcmdpbiB9LFxuXHRcdFx0J2xpbWl0JzogeyByOiBmYWxzZSwgdDogdGVzdExpbWl0IH0sXG5cdFx0XHQncGFkZGluZyc6IHsgcjogZmFsc2UsIHQ6IHRlc3RQYWRkaW5nIH0sXG5cdFx0XHQnYmVoYXZpb3VyJzogeyByOiB0cnVlLCB0OiB0ZXN0QmVoYXZpb3VyIH0sXG5cdFx0XHQnYXJpYUZvcm1hdCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RBcmlhRm9ybWF0IH0sXG5cdFx0XHQnZm9ybWF0JzogeyByOiBmYWxzZSwgdDogdGVzdEZvcm1hdCB9LFxuXHRcdFx0J3Rvb2x0aXBzJzogeyByOiBmYWxzZSwgdDogdGVzdFRvb2x0aXBzIH0sXG5cdFx0XHQnY3NzUHJlZml4JzogeyByOiBmYWxzZSwgdDogdGVzdENzc1ByZWZpeCB9LFxuXHRcdFx0J2Nzc0NsYXNzZXMnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0Q3NzQ2xhc3NlcyB9XG5cdFx0fTtcblxuXHRcdHZhciBkZWZhdWx0cyA9IHtcblx0XHRcdCdjb25uZWN0JzogZmFsc2UsXG5cdFx0XHQnZGlyZWN0aW9uJzogJ2x0cicsXG5cdFx0XHQnYmVoYXZpb3VyJzogJ3RhcCcsXG5cdFx0XHQnb3JpZW50YXRpb24nOiAnaG9yaXpvbnRhbCcsXG5cdFx0XHQnY3NzUHJlZml4JyA6ICdub1VpLScsXG5cdFx0XHQnY3NzQ2xhc3Nlcyc6IHtcblx0XHRcdFx0dGFyZ2V0OiAndGFyZ2V0Jyxcblx0XHRcdFx0YmFzZTogJ2Jhc2UnLFxuXHRcdFx0XHRvcmlnaW46ICdvcmlnaW4nLFxuXHRcdFx0XHRoYW5kbGU6ICdoYW5kbGUnLFxuXHRcdFx0XHRoYW5kbGVMb3dlcjogJ2hhbmRsZS1sb3dlcicsXG5cdFx0XHRcdGhhbmRsZVVwcGVyOiAnaGFuZGxlLXVwcGVyJyxcblx0XHRcdFx0aG9yaXpvbnRhbDogJ2hvcml6b250YWwnLFxuXHRcdFx0XHR2ZXJ0aWNhbDogJ3ZlcnRpY2FsJyxcblx0XHRcdFx0YmFja2dyb3VuZDogJ2JhY2tncm91bmQnLFxuXHRcdFx0XHRjb25uZWN0OiAnY29ubmVjdCcsXG5cdFx0XHRcdGNvbm5lY3RzOiAnY29ubmVjdHMnLFxuXHRcdFx0XHRsdHI6ICdsdHInLFxuXHRcdFx0XHRydGw6ICdydGwnLFxuXHRcdFx0XHRkcmFnZ2FibGU6ICdkcmFnZ2FibGUnLFxuXHRcdFx0XHRkcmFnOiAnc3RhdGUtZHJhZycsXG5cdFx0XHRcdHRhcDogJ3N0YXRlLXRhcCcsXG5cdFx0XHRcdGFjdGl2ZTogJ2FjdGl2ZScsXG5cdFx0XHRcdHRvb2x0aXA6ICd0b29sdGlwJyxcblx0XHRcdFx0cGlwczogJ3BpcHMnLFxuXHRcdFx0XHRwaXBzSG9yaXpvbnRhbDogJ3BpcHMtaG9yaXpvbnRhbCcsXG5cdFx0XHRcdHBpcHNWZXJ0aWNhbDogJ3BpcHMtdmVydGljYWwnLFxuXHRcdFx0XHRtYXJrZXI6ICdtYXJrZXInLFxuXHRcdFx0XHRtYXJrZXJIb3Jpem9udGFsOiAnbWFya2VyLWhvcml6b250YWwnLFxuXHRcdFx0XHRtYXJrZXJWZXJ0aWNhbDogJ21hcmtlci12ZXJ0aWNhbCcsXG5cdFx0XHRcdG1hcmtlck5vcm1hbDogJ21hcmtlci1ub3JtYWwnLFxuXHRcdFx0XHRtYXJrZXJMYXJnZTogJ21hcmtlci1sYXJnZScsXG5cdFx0XHRcdG1hcmtlclN1YjogJ21hcmtlci1zdWInLFxuXHRcdFx0XHR2YWx1ZTogJ3ZhbHVlJyxcblx0XHRcdFx0dmFsdWVIb3Jpem9udGFsOiAndmFsdWUtaG9yaXpvbnRhbCcsXG5cdFx0XHRcdHZhbHVlVmVydGljYWw6ICd2YWx1ZS12ZXJ0aWNhbCcsXG5cdFx0XHRcdHZhbHVlTm9ybWFsOiAndmFsdWUtbm9ybWFsJyxcblx0XHRcdFx0dmFsdWVMYXJnZTogJ3ZhbHVlLWxhcmdlJyxcblx0XHRcdFx0dmFsdWVTdWI6ICd2YWx1ZS1zdWInXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIEFyaWFGb3JtYXQgZGVmYXVsdHMgdG8gcmVndWxhciBmb3JtYXQsIGlmIGFueS5cblx0XHRpZiAoIG9wdGlvbnMuZm9ybWF0ICYmICFvcHRpb25zLmFyaWFGb3JtYXQgKSB7XG5cdFx0XHRvcHRpb25zLmFyaWFGb3JtYXQgPSBvcHRpb25zLmZvcm1hdDtcblx0XHR9XG5cblx0XHQvLyBSdW4gYWxsIG9wdGlvbnMgdGhyb3VnaCBhIHRlc3RpbmcgbWVjaGFuaXNtIHRvIGVuc3VyZSBjb3JyZWN0XG5cdFx0Ly8gaW5wdXQuIEl0IHNob3VsZCBiZSBub3RlZCB0aGF0IG9wdGlvbnMgbWlnaHQgZ2V0IG1vZGlmaWVkIHRvXG5cdFx0Ly8gYmUgaGFuZGxlZCBwcm9wZXJseS4gRS5nLiB3cmFwcGluZyBpbnRlZ2VycyBpbiBhcnJheXMuXG5cdFx0T2JqZWN0LmtleXModGVzdHMpLmZvckVhY2goZnVuY3Rpb24oIG5hbWUgKXtcblxuXHRcdFx0Ly8gSWYgdGhlIG9wdGlvbiBpc24ndCBzZXQsIGJ1dCBpdCBpcyByZXF1aXJlZCwgdGhyb3cgYW4gZXJyb3IuXG5cdFx0XHRpZiAoIG9wdGlvbnNbbmFtZV0gPT09IHVuZGVmaW5lZCAmJiBkZWZhdWx0c1tuYW1lXSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGlmICggdGVzdHNbbmFtZV0uciApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdcIiArIG5hbWUgKyBcIicgaXMgcmVxdWlyZWQuXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHRlc3RzW25hbWVdLnQoIHBhcnNlZCwgb3B0aW9uc1tuYW1lXSA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdHNbbmFtZV0gOiBvcHRpb25zW25hbWVdICk7XG5cdFx0fSk7XG5cblx0XHQvLyBGb3J3YXJkIHBpcHMgb3B0aW9uc1xuXHRcdHBhcnNlZC5waXBzID0gb3B0aW9ucy5waXBzO1xuXG5cdFx0Ly8gQWxsIHJlY2VudCBicm93c2VycyBhY2NlcHQgdW5wcmVmaXhlZCB0cmFuc2Zvcm0uXG5cdFx0Ly8gV2UgbmVlZCAtbXMtIGZvciBJRTkgYW5kIC13ZWJraXQtIGZvciBvbGRlciBBbmRyb2lkO1xuXHRcdC8vIEFzc3VtZSB1c2Ugb2YgLXdlYmtpdC0gaWYgdW5wcmVmaXhlZCBhbmQgLW1zLSBhcmUgbm90IHN1cHBvcnRlZC5cblx0XHQvLyBodHRwczovL2Nhbml1c2UuY29tLyNmZWF0PXRyYW5zZm9ybXMyZFxuXHRcdHZhciBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR2YXIgbXNQcmVmaXggPSBkLnN0eWxlLm1zVHJhbnNmb3JtICE9PSB1bmRlZmluZWQ7XG5cdFx0dmFyIG5vUHJlZml4ID0gZC5zdHlsZS50cmFuc2Zvcm0gIT09IHVuZGVmaW5lZDtcblxuXHRcdHBhcnNlZC50cmFuc2Zvcm1SdWxlID0gbm9QcmVmaXggPyAndHJhbnNmb3JtJyA6IChtc1ByZWZpeCA/ICdtc1RyYW5zZm9ybScgOiAnd2Via2l0VHJhbnNmb3JtJyk7XG5cblx0XHQvLyBQaXBzIGRvbid0IG1vdmUsIHNvIHdlIGNhbiBwbGFjZSB0aGVtIHVzaW5nIGxlZnQvdG9wLlxuXHRcdHZhciBzdHlsZXMgPSBbWydsZWZ0JywgJ3RvcCddLCBbJ3JpZ2h0JywgJ2JvdHRvbSddXTtcblxuXHRcdHBhcnNlZC5zdHlsZSA9IHN0eWxlc1twYXJzZWQuZGlyXVtwYXJzZWQub3J0XTtcblxuXHRcdHJldHVybiBwYXJzZWQ7XG5cdH1cblxuXG5mdW5jdGlvbiBjbG9zdXJlICggdGFyZ2V0LCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMgKXtcblxuXHR2YXIgYWN0aW9ucyA9IGdldEFjdGlvbnMoKTtcblx0dmFyIHN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lID0gZ2V0U3VwcG9ydHNUb3VjaEFjdGlvbk5vbmUoKTtcblx0dmFyIHN1cHBvcnRzUGFzc2l2ZSA9IHN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lICYmIGdldFN1cHBvcnRzUGFzc2l2ZSgpO1xuXG5cdC8vIEFsbCB2YXJpYWJsZXMgbG9jYWwgdG8gJ2Nsb3N1cmUnIGFyZSBwcmVmaXhlZCB3aXRoICdzY29wZV8nXG5cdHZhciBzY29wZV9UYXJnZXQgPSB0YXJnZXQ7XG5cdHZhciBzY29wZV9Mb2NhdGlvbnMgPSBbXTtcblx0dmFyIHNjb3BlX0Jhc2U7XG5cdHZhciBzY29wZV9IYW5kbGVzO1xuXHR2YXIgc2NvcGVfSGFuZGxlTnVtYmVycyA9IFtdO1xuXHR2YXIgc2NvcGVfQWN0aXZlSGFuZGxlc0NvdW50ID0gMDtcblx0dmFyIHNjb3BlX0Nvbm5lY3RzO1xuXHR2YXIgc2NvcGVfU3BlY3RydW0gPSBvcHRpb25zLnNwZWN0cnVtO1xuXHR2YXIgc2NvcGVfVmFsdWVzID0gW107XG5cdHZhciBzY29wZV9FdmVudHMgPSB7fTtcblx0dmFyIHNjb3BlX1NlbGY7XG5cdHZhciBzY29wZV9QaXBzO1xuXHR2YXIgc2NvcGVfRG9jdW1lbnQgPSB0YXJnZXQub3duZXJEb2N1bWVudDtcblx0dmFyIHNjb3BlX0RvY3VtZW50RWxlbWVudCA9IHNjb3BlX0RvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0dmFyIHNjb3BlX0JvZHkgPSBzY29wZV9Eb2N1bWVudC5ib2R5O1xuXG5cblx0Ly8gQ3JlYXRlcyBhIG5vZGUsIGFkZHMgaXQgdG8gdGFyZ2V0LCByZXR1cm5zIHRoZSBuZXcgbm9kZS5cblx0ZnVuY3Rpb24gYWRkTm9kZVRvICggdGFyZ2V0LCBjbGFzc05hbWUgKSB7XG5cblx0XHR2YXIgZGl2ID0gc2NvcGVfRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cblx0XHRpZiAoIGNsYXNzTmFtZSApIHtcblx0XHRcdGFkZENsYXNzKGRpdiwgY2xhc3NOYW1lKTtcblx0XHR9XG5cblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoZGl2KTtcblxuXHRcdHJldHVybiBkaXY7XG5cdH1cblxuXHQvLyBBcHBlbmQgYSBvcmlnaW4gdG8gdGhlIGJhc2Vcblx0ZnVuY3Rpb24gYWRkT3JpZ2luICggYmFzZSwgaGFuZGxlTnVtYmVyICkge1xuXG5cdFx0dmFyIG9yaWdpbiA9IGFkZE5vZGVUbyhiYXNlLCBvcHRpb25zLmNzc0NsYXNzZXMub3JpZ2luKTtcblx0XHR2YXIgaGFuZGxlID0gYWRkTm9kZVRvKG9yaWdpbiwgb3B0aW9ucy5jc3NDbGFzc2VzLmhhbmRsZSk7XG5cblx0XHRoYW5kbGUuc2V0QXR0cmlidXRlKCdkYXRhLWhhbmRsZScsIGhhbmRsZU51bWJlcik7XG5cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0dsb2JhbF9hdHRyaWJ1dGVzL3RhYmluZGV4XG5cdFx0Ly8gMCA9IGZvY3VzYWJsZSBhbmQgcmVhY2hhYmxlXG5cdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuXHRcdGhhbmRsZS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnc2xpZGVyJyk7XG5cdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgnYXJpYS1vcmllbnRhdGlvbicsIG9wdGlvbnMub3J0ID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJyk7XG5cblx0XHRpZiAoIGhhbmRsZU51bWJlciA9PT0gMCApIHtcblx0XHRcdGFkZENsYXNzKGhhbmRsZSwgb3B0aW9ucy5jc3NDbGFzc2VzLmhhbmRsZUxvd2VyKTtcblx0XHR9XG5cblx0XHRlbHNlIGlmICggaGFuZGxlTnVtYmVyID09PSBvcHRpb25zLmhhbmRsZXMgLSAxICkge1xuXHRcdFx0YWRkQ2xhc3MoaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuaGFuZGxlVXBwZXIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBvcmlnaW47XG5cdH1cblxuXHQvLyBJbnNlcnQgbm9kZXMgZm9yIGNvbm5lY3QgZWxlbWVudHNcblx0ZnVuY3Rpb24gYWRkQ29ubmVjdCAoIGJhc2UsIGFkZCApIHtcblxuXHRcdGlmICggIWFkZCApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYWRkTm9kZVRvKGJhc2UsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5jb25uZWN0KTtcblx0fVxuXG5cdC8vIEFkZCBoYW5kbGVzIHRvIHRoZSBzbGlkZXIgYmFzZS5cblx0ZnVuY3Rpb24gYWRkRWxlbWVudHMgKCBjb25uZWN0T3B0aW9ucywgYmFzZSApIHtcblxuXHRcdHZhciBjb25uZWN0QmFzZSA9IGFkZE5vZGVUbyhiYXNlLCBvcHRpb25zLmNzc0NsYXNzZXMuY29ubmVjdHMpO1xuXG5cdFx0c2NvcGVfSGFuZGxlcyA9IFtdO1xuXHRcdHNjb3BlX0Nvbm5lY3RzID0gW107XG5cblx0XHRzY29wZV9Db25uZWN0cy5wdXNoKGFkZENvbm5lY3QoY29ubmVjdEJhc2UsIGNvbm5lY3RPcHRpb25zWzBdKSk7XG5cblx0XHQvLyBbOjo6Ok89PT09Tz09PT1PPT09PV1cblx0XHQvLyBjb25uZWN0T3B0aW9ucyA9IFswLCAxLCAxLCAxXVxuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5oYW5kbGVzOyBpKysgKSB7XG5cdFx0XHQvLyBLZWVwIGEgbGlzdCBvZiBhbGwgYWRkZWQgaGFuZGxlcy5cblx0XHRcdHNjb3BlX0hhbmRsZXMucHVzaChhZGRPcmlnaW4oYmFzZSwgaSkpO1xuXHRcdFx0c2NvcGVfSGFuZGxlTnVtYmVyc1tpXSA9IGk7XG5cdFx0XHRzY29wZV9Db25uZWN0cy5wdXNoKGFkZENvbm5lY3QoY29ubmVjdEJhc2UsIGNvbm5lY3RPcHRpb25zW2kgKyAxXSkpO1xuXHRcdH1cblx0fVxuXG5cdC8vIEluaXRpYWxpemUgYSBzaW5nbGUgc2xpZGVyLlxuXHRmdW5jdGlvbiBhZGRTbGlkZXIgKCB0YXJnZXQgKSB7XG5cblx0XHQvLyBBcHBseSBjbGFzc2VzIGFuZCBkYXRhIHRvIHRoZSB0YXJnZXQuXG5cdFx0YWRkQ2xhc3ModGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudGFyZ2V0KTtcblxuXHRcdGlmICggb3B0aW9ucy5kaXIgPT09IDAgKSB7XG5cdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5sdHIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5ydGwpO1xuXHRcdH1cblxuXHRcdGlmICggb3B0aW9ucy5vcnQgPT09IDAgKSB7XG5cdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5ob3Jpem9udGFsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YWRkQ2xhc3ModGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudmVydGljYWwpO1xuXHRcdH1cblxuXHRcdHNjb3BlX0Jhc2UgPSBhZGROb2RlVG8odGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMuYmFzZSk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGFkZFRvb2x0aXAgKCBoYW5kbGUsIGhhbmRsZU51bWJlciApIHtcblxuXHRcdGlmICggIW9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYWRkTm9kZVRvKGhhbmRsZS5maXJzdENoaWxkLCBvcHRpb25zLmNzc0NsYXNzZXMudG9vbHRpcCk7XG5cdH1cblxuXHQvLyBUaGUgdG9vbHRpcHMgb3B0aW9uIGlzIGEgc2hvcnRoYW5kIGZvciB1c2luZyB0aGUgJ3VwZGF0ZScgZXZlbnQuXG5cdGZ1bmN0aW9uIHRvb2x0aXBzICggKSB7XG5cblx0XHQvLyBUb29sdGlwcyBhcmUgYWRkZWQgd2l0aCBvcHRpb25zLnRvb2x0aXBzIGluIG9yaWdpbmFsIG9yZGVyLlxuXHRcdHZhciB0aXBzID0gc2NvcGVfSGFuZGxlcy5tYXAoYWRkVG9vbHRpcCk7XG5cblx0XHRiaW5kRXZlbnQoJ3VwZGF0ZScsIGZ1bmN0aW9uKHZhbHVlcywgaGFuZGxlTnVtYmVyLCB1bmVuY29kZWQpIHtcblxuXHRcdFx0aWYgKCAhdGlwc1toYW5kbGVOdW1iZXJdICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciBmb3JtYXR0ZWRWYWx1ZSA9IHZhbHVlc1toYW5kbGVOdW1iZXJdO1xuXG5cdFx0XHRpZiAoIG9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXSAhPT0gdHJ1ZSApIHtcblx0XHRcdFx0Zm9ybWF0dGVkVmFsdWUgPSBvcHRpb25zLnRvb2x0aXBzW2hhbmRsZU51bWJlcl0udG8odW5lbmNvZGVkW2hhbmRsZU51bWJlcl0pO1xuXHRcdFx0fVxuXG5cdFx0XHR0aXBzW2hhbmRsZU51bWJlcl0uaW5uZXJIVE1MID0gZm9ybWF0dGVkVmFsdWU7XG5cdFx0fSk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGFyaWEgKCApIHtcblxuXHRcdGJpbmRFdmVudCgndXBkYXRlJywgZnVuY3Rpb24gKCB2YWx1ZXMsIGhhbmRsZU51bWJlciwgdW5lbmNvZGVkLCB0YXAsIHBvc2l0aW9ucyApIHtcblxuXHRcdFx0Ly8gVXBkYXRlIEFyaWEgVmFsdWVzIGZvciBhbGwgaGFuZGxlcywgYXMgYSBjaGFuZ2UgaW4gb25lIGNoYW5nZXMgbWluIGFuZCBtYXggdmFsdWVzIGZvciB0aGUgbmV4dC5cblx0XHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbiggaGFuZGxlTnVtYmVyICl7XG5cblx0XHRcdFx0dmFyIGhhbmRsZSA9IHNjb3BlX0hhbmRsZXNbaGFuZGxlTnVtYmVyXTtcblxuXHRcdFx0XHR2YXIgbWluID0gY2hlY2tIYW5kbGVQb3NpdGlvbihzY29wZV9Mb2NhdGlvbnMsIGhhbmRsZU51bWJlciwgMCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cdFx0XHRcdHZhciBtYXggPSBjaGVja0hhbmRsZVBvc2l0aW9uKHNjb3BlX0xvY2F0aW9ucywgaGFuZGxlTnVtYmVyLCAxMDAsIHRydWUsIHRydWUsIHRydWUpO1xuXG5cdFx0XHRcdHZhciBub3cgPSBwb3NpdGlvbnNbaGFuZGxlTnVtYmVyXTtcblx0XHRcdFx0dmFyIHRleHQgPSBvcHRpb25zLmFyaWFGb3JtYXQudG8odW5lbmNvZGVkW2hhbmRsZU51bWJlcl0pO1xuXG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtaW4nLCBtaW4udG9GaXhlZCgxKSk7XG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtYXgnLCBtYXgudG9GaXhlZCgxKSk7XG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCBub3cudG9GaXhlZCgxKSk7XG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWV0ZXh0JywgdGV4dCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gZ2V0R3JvdXAgKCBtb2RlLCB2YWx1ZXMsIHN0ZXBwZWQgKSB7XG5cblx0XHQvLyBVc2UgdGhlIHJhbmdlLlxuXHRcdGlmICggbW9kZSA9PT0gJ3JhbmdlJyB8fCBtb2RlID09PSAnc3RlcHMnICkge1xuXHRcdFx0cmV0dXJuIHNjb3BlX1NwZWN0cnVtLnhWYWw7XG5cdFx0fVxuXG5cdFx0aWYgKCBtb2RlID09PSAnY291bnQnICkge1xuXG5cdFx0XHRpZiAoIHZhbHVlcyA8IDIgKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3ZhbHVlcycgKD49IDIpIHJlcXVpcmVkIGZvciBtb2RlICdjb3VudCcuXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBEaXZpZGUgMCAtIDEwMCBpbiAnY291bnQnIHBhcnRzLlxuXHRcdFx0dmFyIGludGVydmFsID0gdmFsdWVzIC0gMTtcblx0XHRcdHZhciBzcHJlYWQgPSAoIDEwMCAvIGludGVydmFsICk7XG5cblx0XHRcdHZhbHVlcyA9IFtdO1xuXG5cdFx0XHQvLyBMaXN0IHRoZXNlIHBhcnRzIGFuZCBoYXZlIHRoZW0gaGFuZGxlZCBhcyAncG9zaXRpb25zJy5cblx0XHRcdHdoaWxlICggaW50ZXJ2YWwtLSApIHtcblx0XHRcdFx0dmFsdWVzWyBpbnRlcnZhbCBdID0gKCBpbnRlcnZhbCAqIHNwcmVhZCApO1xuXHRcdFx0fVxuXG5cdFx0XHR2YWx1ZXMucHVzaCgxMDApO1xuXG5cdFx0XHRtb2RlID0gJ3Bvc2l0aW9ucyc7XG5cdFx0fVxuXG5cdFx0aWYgKCBtb2RlID09PSAncG9zaXRpb25zJyApIHtcblxuXHRcdFx0Ly8gTWFwIGFsbCBwZXJjZW50YWdlcyB0byBvbi1yYW5nZSB2YWx1ZXMuXG5cdFx0XHRyZXR1cm4gdmFsdWVzLm1hcChmdW5jdGlvbiggdmFsdWUgKXtcblx0XHRcdFx0cmV0dXJuIHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyggc3RlcHBlZCA/IHNjb3BlX1NwZWN0cnVtLmdldFN0ZXAoIHZhbHVlICkgOiB2YWx1ZSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKCBtb2RlID09PSAndmFsdWVzJyApIHtcblxuXHRcdFx0Ly8gSWYgdGhlIHZhbHVlIG11c3QgYmUgc3RlcHBlZCwgaXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgcGVyY2VudGFnZSBmaXJzdC5cblx0XHRcdGlmICggc3RlcHBlZCApIHtcblxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzLm1hcChmdW5jdGlvbiggdmFsdWUgKXtcblxuXHRcdFx0XHRcdC8vIENvbnZlcnQgdG8gcGVyY2VudGFnZSwgYXBwbHkgc3RlcCwgcmV0dXJuIHRvIHZhbHVlLlxuXHRcdFx0XHRcdHJldHVybiBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcoIHNjb3BlX1NwZWN0cnVtLmdldFN0ZXAoIHNjb3BlX1NwZWN0cnVtLnRvU3RlcHBpbmcoIHZhbHVlICkgKSApO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UsIHdlIGNhbiBzaW1wbHkgdXNlIHRoZSB2YWx1ZXMuXG5cdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlU3ByZWFkICggZGVuc2l0eSwgbW9kZSwgZ3JvdXAgKSB7XG5cblx0XHRmdW5jdGlvbiBzYWZlSW5jcmVtZW50KHZhbHVlLCBpbmNyZW1lbnQpIHtcblx0XHRcdC8vIEF2b2lkIGZsb2F0aW5nIHBvaW50IHZhcmlhbmNlIGJ5IGRyb3BwaW5nIHRoZSBzbWFsbGVzdCBkZWNpbWFsIHBsYWNlcy5cblx0XHRcdHJldHVybiAodmFsdWUgKyBpbmNyZW1lbnQpLnRvRml4ZWQoNykgLyAxO1xuXHRcdH1cblxuXHRcdHZhciBpbmRleGVzID0ge307XG5cdFx0dmFyIGZpcnN0SW5SYW5nZSA9IHNjb3BlX1NwZWN0cnVtLnhWYWxbMF07XG5cdFx0dmFyIGxhc3RJblJhbmdlID0gc2NvcGVfU3BlY3RydW0ueFZhbFtzY29wZV9TcGVjdHJ1bS54VmFsLmxlbmd0aC0xXTtcblx0XHR2YXIgaWdub3JlRmlyc3QgPSBmYWxzZTtcblx0XHR2YXIgaWdub3JlTGFzdCA9IGZhbHNlO1xuXHRcdHZhciBwcmV2UGN0ID0gMDtcblxuXHRcdC8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGdyb3VwLCBzb3J0IGl0IGFuZCBmaWx0ZXIgYXdheSBhbGwgZHVwbGljYXRlcy5cblx0XHRncm91cCA9IHVuaXF1ZShncm91cC5zbGljZSgpLnNvcnQoZnVuY3Rpb24oYSwgYil7IHJldHVybiBhIC0gYjsgfSkpO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoZSByYW5nZSBzdGFydHMgd2l0aCB0aGUgZmlyc3QgZWxlbWVudC5cblx0XHRpZiAoIGdyb3VwWzBdICE9PSBmaXJzdEluUmFuZ2UgKSB7XG5cdFx0XHRncm91cC51bnNoaWZ0KGZpcnN0SW5SYW5nZSk7XG5cdFx0XHRpZ25vcmVGaXJzdCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gTGlrZXdpc2UgZm9yIHRoZSBsYXN0IG9uZS5cblx0XHRpZiAoIGdyb3VwW2dyb3VwLmxlbmd0aCAtIDFdICE9PSBsYXN0SW5SYW5nZSApIHtcblx0XHRcdGdyb3VwLnB1c2gobGFzdEluUmFuZ2UpO1xuXHRcdFx0aWdub3JlTGFzdCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Z3JvdXAuZm9yRWFjaChmdW5jdGlvbiAoIGN1cnJlbnQsIGluZGV4ICkge1xuXG5cdFx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgc3RlcCBhbmQgdGhlIGxvd2VyICsgdXBwZXIgcG9zaXRpb25zLlxuXHRcdFx0dmFyIHN0ZXA7XG5cdFx0XHR2YXIgaTtcblx0XHRcdHZhciBxO1xuXHRcdFx0dmFyIGxvdyA9IGN1cnJlbnQ7XG5cdFx0XHR2YXIgaGlnaCA9IGdyb3VwW2luZGV4KzFdO1xuXHRcdFx0dmFyIG5ld1BjdDtcblx0XHRcdHZhciBwY3REaWZmZXJlbmNlO1xuXHRcdFx0dmFyIHBjdFBvcztcblx0XHRcdHZhciB0eXBlO1xuXHRcdFx0dmFyIHN0ZXBzO1xuXHRcdFx0dmFyIHJlYWxTdGVwcztcblx0XHRcdHZhciBzdGVwc2l6ZTtcblxuXHRcdFx0Ly8gV2hlbiB1c2luZyAnc3RlcHMnIG1vZGUsIHVzZSB0aGUgcHJvdmlkZWQgc3RlcHMuXG5cdFx0XHQvLyBPdGhlcndpc2UsIHdlJ2xsIHN0ZXAgb24gdG8gdGhlIG5leHQgc3VicmFuZ2UuXG5cdFx0XHRpZiAoIG1vZGUgPT09ICdzdGVwcycgKSB7XG5cdFx0XHRcdHN0ZXAgPSBzY29wZV9TcGVjdHJ1bS54TnVtU3RlcHNbIGluZGV4IF07XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlZmF1bHQgdG8gYSAnZnVsbCcgc3RlcC5cblx0XHRcdGlmICggIXN0ZXAgKSB7XG5cdFx0XHRcdHN0ZXAgPSBoaWdoLWxvdztcblx0XHRcdH1cblxuXHRcdFx0Ly8gTG93IGNhbiBiZSAwLCBzbyB0ZXN0IGZvciBmYWxzZS4gSWYgaGlnaCBpcyB1bmRlZmluZWQsXG5cdFx0XHQvLyB3ZSBhcmUgYXQgdGhlIGxhc3Qgc3VicmFuZ2UuIEluZGV4IDAgaXMgYWxyZWFkeSBoYW5kbGVkLlxuXHRcdFx0aWYgKCBsb3cgPT09IGZhbHNlIHx8IGhpZ2ggPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgc3RlcCBpc24ndCAwLCB3aGljaCB3b3VsZCBjYXVzZSBhbiBpbmZpbml0ZSBsb29wICgjNjU0KVxuXHRcdFx0c3RlcCA9IE1hdGgubWF4KHN0ZXAsIDAuMDAwMDAwMSk7XG5cblx0XHRcdC8vIEZpbmQgYWxsIHN0ZXBzIGluIHRoZSBzdWJyYW5nZS5cblx0XHRcdGZvciAoIGkgPSBsb3c7IGkgPD0gaGlnaDsgaSA9IHNhZmVJbmNyZW1lbnQoaSwgc3RlcCkgKSB7XG5cblx0XHRcdFx0Ly8gR2V0IHRoZSBwZXJjZW50YWdlIHZhbHVlIGZvciB0aGUgY3VycmVudCBzdGVwLFxuXHRcdFx0XHQvLyBjYWxjdWxhdGUgdGhlIHNpemUgZm9yIHRoZSBzdWJyYW5nZS5cblx0XHRcdFx0bmV3UGN0ID0gc2NvcGVfU3BlY3RydW0udG9TdGVwcGluZyggaSApO1xuXHRcdFx0XHRwY3REaWZmZXJlbmNlID0gbmV3UGN0IC0gcHJldlBjdDtcblxuXHRcdFx0XHRzdGVwcyA9IHBjdERpZmZlcmVuY2UgLyBkZW5zaXR5O1xuXHRcdFx0XHRyZWFsU3RlcHMgPSBNYXRoLnJvdW5kKHN0ZXBzKTtcblxuXHRcdFx0XHQvLyBUaGlzIHJhdGlvIHJlcHJlc2VudHMgdGhlIGFtb3VudCBvZiBwZXJjZW50YWdlLXNwYWNlIGEgcG9pbnQgaW5kaWNhdGVzLlxuXHRcdFx0XHQvLyBGb3IgYSBkZW5zaXR5IDEgdGhlIHBvaW50cy9wZXJjZW50YWdlID0gMS4gRm9yIGRlbnNpdHkgMiwgdGhhdCBwZXJjZW50YWdlIG5lZWRzIHRvIGJlIHJlLWRldmlkZWQuXG5cdFx0XHRcdC8vIFJvdW5kIHRoZSBwZXJjZW50YWdlIG9mZnNldCB0byBhbiBldmVuIG51bWJlciwgdGhlbiBkaXZpZGUgYnkgdHdvXG5cdFx0XHRcdC8vIHRvIHNwcmVhZCB0aGUgb2Zmc2V0IG9uIGJvdGggc2lkZXMgb2YgdGhlIHJhbmdlLlxuXHRcdFx0XHRzdGVwc2l6ZSA9IHBjdERpZmZlcmVuY2UvcmVhbFN0ZXBzO1xuXG5cdFx0XHRcdC8vIERpdmlkZSBhbGwgcG9pbnRzIGV2ZW5seSwgYWRkaW5nIHRoZSBjb3JyZWN0IG51bWJlciB0byB0aGlzIHN1YnJhbmdlLlxuXHRcdFx0XHQvLyBSdW4gdXAgdG8gPD0gc28gdGhhdCAxMDAlIGdldHMgYSBwb2ludCwgZXZlbnQgaWYgaWdub3JlTGFzdCBpcyBzZXQuXG5cdFx0XHRcdGZvciAoIHEgPSAxOyBxIDw9IHJlYWxTdGVwczsgcSArPSAxICkge1xuXG5cdFx0XHRcdFx0Ly8gVGhlIHJhdGlvIGJldHdlZW4gdGhlIHJvdW5kZWQgdmFsdWUgYW5kIHRoZSBhY3R1YWwgc2l6ZSBtaWdodCBiZSB+MSUgb2ZmLlxuXHRcdFx0XHRcdC8vIENvcnJlY3QgdGhlIHBlcmNlbnRhZ2Ugb2Zmc2V0IGJ5IHRoZSBudW1iZXIgb2YgcG9pbnRzXG5cdFx0XHRcdFx0Ly8gcGVyIHN1YnJhbmdlLiBkZW5zaXR5ID0gMSB3aWxsIHJlc3VsdCBpbiAxMDAgcG9pbnRzIG9uIHRoZVxuXHRcdFx0XHRcdC8vIGZ1bGwgcmFuZ2UsIDIgZm9yIDUwLCA0IGZvciAyNSwgZXRjLlxuXHRcdFx0XHRcdHBjdFBvcyA9IHByZXZQY3QgKyAoIHEgKiBzdGVwc2l6ZSApO1xuXHRcdFx0XHRcdGluZGV4ZXNbcGN0UG9zLnRvRml4ZWQoNSldID0gWyd4JywgMF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBEZXRlcm1pbmUgdGhlIHBvaW50IHR5cGUuXG5cdFx0XHRcdHR5cGUgPSAoZ3JvdXAuaW5kZXhPZihpKSA+IC0xKSA/IDEgOiAoIG1vZGUgPT09ICdzdGVwcycgPyAyIDogMCApO1xuXG5cdFx0XHRcdC8vIEVuZm9yY2UgdGhlICdpZ25vcmVGaXJzdCcgb3B0aW9uIGJ5IG92ZXJ3cml0aW5nIHRoZSB0eXBlIGZvciAwLlxuXHRcdFx0XHRpZiAoICFpbmRleCAmJiBpZ25vcmVGaXJzdCApIHtcblx0XHRcdFx0XHR0eXBlID0gMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggIShpID09PSBoaWdoICYmIGlnbm9yZUxhc3QpKSB7XG5cdFx0XHRcdFx0Ly8gTWFyayB0aGUgJ3R5cGUnIG9mIHRoaXMgcG9pbnQuIDAgPSBwbGFpbiwgMSA9IHJlYWwgdmFsdWUsIDIgPSBzdGVwIHZhbHVlLlxuXHRcdFx0XHRcdGluZGV4ZXNbbmV3UGN0LnRvRml4ZWQoNSldID0gW2ksIHR5cGVdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBwZXJjZW50YWdlIGNvdW50LlxuXHRcdFx0XHRwcmV2UGN0ID0gbmV3UGN0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGluZGV4ZXM7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRNYXJraW5nICggc3ByZWFkLCBmaWx0ZXJGdW5jLCBmb3JtYXR0ZXIgKSB7XG5cblx0XHR2YXIgZWxlbWVudCA9IHNjb3BlX0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdFx0dmFyIHZhbHVlU2l6ZUNsYXNzZXMgPSBbXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVOb3JtYWwsXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVMYXJnZSxcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZVN1YlxuXHRcdF07XG5cdFx0dmFyIG1hcmtlclNpemVDbGFzc2VzID0gW1xuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlck5vcm1hbCxcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJMYXJnZSxcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJTdWJcblx0XHRdO1xuXHRcdHZhciB2YWx1ZU9yaWVudGF0aW9uQ2xhc3NlcyA9IFtcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZUhvcml6b250YWwsXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVWZXJ0aWNhbFxuXHRcdF07XG5cdFx0dmFyIG1hcmtlck9yaWVudGF0aW9uQ2xhc3NlcyA9IFtcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJIb3Jpem9udGFsLFxuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlclZlcnRpY2FsXG5cdFx0XTtcblxuXHRcdGFkZENsYXNzKGVsZW1lbnQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5waXBzKTtcblx0XHRhZGRDbGFzcyhlbGVtZW50LCBvcHRpb25zLm9ydCA9PT0gMCA/IG9wdGlvbnMuY3NzQ2xhc3Nlcy5waXBzSG9yaXpvbnRhbCA6IG9wdGlvbnMuY3NzQ2xhc3Nlcy5waXBzVmVydGljYWwpO1xuXG5cdFx0ZnVuY3Rpb24gZ2V0Q2xhc3NlcyggdHlwZSwgc291cmNlICl7XG5cdFx0XHR2YXIgYSA9IHNvdXJjZSA9PT0gb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlO1xuXHRcdFx0dmFyIG9yaWVudGF0aW9uQ2xhc3NlcyA9IGEgPyB2YWx1ZU9yaWVudGF0aW9uQ2xhc3NlcyA6IG1hcmtlck9yaWVudGF0aW9uQ2xhc3Nlcztcblx0XHRcdHZhciBzaXplQ2xhc3NlcyA9IGEgPyB2YWx1ZVNpemVDbGFzc2VzIDogbWFya2VyU2l6ZUNsYXNzZXM7XG5cblx0XHRcdHJldHVybiBzb3VyY2UgKyAnICcgKyBvcmllbnRhdGlvbkNsYXNzZXNbb3B0aW9ucy5vcnRdICsgJyAnICsgc2l6ZUNsYXNzZXNbdHlwZV07XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYWRkU3ByZWFkICggb2Zmc2V0LCB2YWx1ZXMgKXtcblxuXHRcdFx0Ly8gQXBwbHkgdGhlIGZpbHRlciBmdW5jdGlvbiwgaWYgaXQgaXMgc2V0LlxuXHRcdFx0dmFsdWVzWzFdID0gKHZhbHVlc1sxXSAmJiBmaWx0ZXJGdW5jKSA/IGZpbHRlckZ1bmModmFsdWVzWzBdLCB2YWx1ZXNbMV0pIDogdmFsdWVzWzFdO1xuXG5cdFx0XHQvLyBBZGQgYSBtYXJrZXIgZm9yIGV2ZXJ5IHBvaW50XG5cdFx0XHR2YXIgbm9kZSA9IGFkZE5vZGVUbyhlbGVtZW50LCBmYWxzZSk7XG5cdFx0XHRcdG5vZGUuY2xhc3NOYW1lID0gZ2V0Q2xhc3Nlcyh2YWx1ZXNbMV0sIG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXIpO1xuXHRcdFx0XHRub2RlLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gb2Zmc2V0ICsgJyUnO1xuXG5cdFx0XHQvLyBWYWx1ZXMgYXJlIG9ubHkgYXBwZW5kZWQgZm9yIHBvaW50cyBtYXJrZWQgJzEnIG9yICcyJy5cblx0XHRcdGlmICggdmFsdWVzWzFdICkge1xuXHRcdFx0XHRub2RlID0gYWRkTm9kZVRvKGVsZW1lbnQsIGZhbHNlKTtcblx0XHRcdFx0bm9kZS5jbGFzc05hbWUgPSBnZXRDbGFzc2VzKHZhbHVlc1sxXSwgb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlKTtcblx0XHRcdFx0bm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCB2YWx1ZXNbMF0pO1xuXHRcdFx0XHRub2RlLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gb2Zmc2V0ICsgJyUnO1xuXHRcdFx0XHRub2RlLmlubmVyVGV4dCA9IGZvcm1hdHRlci50byh2YWx1ZXNbMF0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFwcGVuZCBhbGwgcG9pbnRzLlxuXHRcdE9iamVjdC5rZXlzKHNwcmVhZCkuZm9yRWFjaChmdW5jdGlvbihhKXtcblx0XHRcdGFkZFNwcmVhZChhLCBzcHJlYWRbYV0pO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiByZW1vdmVQaXBzICggKSB7XG5cdFx0aWYgKCBzY29wZV9QaXBzICkge1xuXHRcdFx0cmVtb3ZlRWxlbWVudChzY29wZV9QaXBzKTtcblx0XHRcdHNjb3BlX1BpcHMgPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHBpcHMgKCBncmlkICkge1xuXG5cdFx0Ly8gRml4ICM2Njlcblx0XHRyZW1vdmVQaXBzKCk7XG5cblx0XHR2YXIgbW9kZSA9IGdyaWQubW9kZTtcblx0XHR2YXIgZGVuc2l0eSA9IGdyaWQuZGVuc2l0eSB8fCAxO1xuXHRcdHZhciBmaWx0ZXIgPSBncmlkLmZpbHRlciB8fCBmYWxzZTtcblx0XHR2YXIgdmFsdWVzID0gZ3JpZC52YWx1ZXMgfHwgZmFsc2U7XG5cdFx0dmFyIHN0ZXBwZWQgPSBncmlkLnN0ZXBwZWQgfHwgZmFsc2U7XG5cdFx0dmFyIGdyb3VwID0gZ2V0R3JvdXAoIG1vZGUsIHZhbHVlcywgc3RlcHBlZCApO1xuXHRcdHZhciBzcHJlYWQgPSBnZW5lcmF0ZVNwcmVhZCggZGVuc2l0eSwgbW9kZSwgZ3JvdXAgKTtcblx0XHR2YXIgZm9ybWF0ID0gZ3JpZC5mb3JtYXQgfHwge1xuXHRcdFx0dG86IE1hdGgucm91bmRcblx0XHR9O1xuXG5cdFx0c2NvcGVfUGlwcyA9IHNjb3BlX1RhcmdldC5hcHBlbmRDaGlsZChhZGRNYXJraW5nKFxuXHRcdFx0c3ByZWFkLFxuXHRcdFx0ZmlsdGVyLFxuXHRcdFx0Zm9ybWF0XG5cdFx0KSk7XG5cblx0XHRyZXR1cm4gc2NvcGVfUGlwcztcblx0fVxuXG5cblx0Ly8gU2hvcnRoYW5kIGZvciBiYXNlIGRpbWVuc2lvbnMuXG5cdGZ1bmN0aW9uIGJhc2VTaXplICggKSB7XG5cdFx0dmFyIHJlY3QgPSBzY29wZV9CYXNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBhbHQgPSAnb2Zmc2V0JyArIFsnV2lkdGgnLCAnSGVpZ2h0J11bb3B0aW9ucy5vcnRdO1xuXHRcdHJldHVybiBvcHRpb25zLm9ydCA9PT0gMCA/IChyZWN0LndpZHRofHxzY29wZV9CYXNlW2FsdF0pIDogKHJlY3QuaGVpZ2h0fHxzY29wZV9CYXNlW2FsdF0pO1xuXHR9XG5cblx0Ly8gSGFuZGxlciBmb3IgYXR0YWNoaW5nIGV2ZW50cyB0cm91Z2ggYSBwcm94eS5cblx0ZnVuY3Rpb24gYXR0YWNoRXZlbnQgKCBldmVudHMsIGVsZW1lbnQsIGNhbGxiYWNrLCBkYXRhICkge1xuXG5cdFx0Ly8gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byAnZmlsdGVyJyBldmVudHMgdG8gdGhlIHNsaWRlci5cblx0XHQvLyBlbGVtZW50IGlzIGEgbm9kZSwgbm90IGEgbm9kZUxpc3RcblxuXHRcdHZhciBtZXRob2QgPSBmdW5jdGlvbiAoIGUgKXtcblxuXHRcdFx0ZSA9IGZpeEV2ZW50KGUsIGRhdGEucGFnZU9mZnNldCwgZGF0YS50YXJnZXQgfHwgZWxlbWVudCk7XG5cblx0XHRcdC8vIGZpeEV2ZW50IHJldHVybnMgZmFsc2UgaWYgdGhpcyBldmVudCBoYXMgYSBkaWZmZXJlbnQgdGFyZ2V0XG5cdFx0XHQvLyB3aGVuIGhhbmRsaW5nIChtdWx0aS0pIHRvdWNoIGV2ZW50cztcblx0XHRcdGlmICggIWUgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gZG9Ob3RSZWplY3QgaXMgcGFzc2VkIGJ5IGFsbCBlbmQgZXZlbnRzIHRvIG1ha2Ugc3VyZSByZWxlYXNlZCB0b3VjaGVzXG5cdFx0XHQvLyBhcmUgbm90IHJlamVjdGVkLCBsZWF2aW5nIHRoZSBzbGlkZXIgXCJzdHVja1wiIHRvIHRoZSBjdXJzb3I7XG5cdFx0XHRpZiAoIHNjb3BlX1RhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgJiYgIWRhdGEuZG9Ob3RSZWplY3QgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RvcCBpZiBhbiBhY3RpdmUgJ3RhcCcgdHJhbnNpdGlvbiBpcyB0YWtpbmcgcGxhY2UuXG5cdFx0XHRpZiAoIGhhc0NsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcCkgJiYgIWRhdGEuZG9Ob3RSZWplY3QgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWdub3JlIHJpZ2h0IG9yIG1pZGRsZSBjbGlja3Mgb24gc3RhcnQgIzQ1NFxuXHRcdFx0aWYgKCBldmVudHMgPT09IGFjdGlvbnMuc3RhcnQgJiYgZS5idXR0b25zICE9PSB1bmRlZmluZWQgJiYgZS5idXR0b25zID4gMSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZ25vcmUgcmlnaHQgb3IgbWlkZGxlIGNsaWNrcyBvbiBzdGFydCAjNDU0XG5cdFx0XHRpZiAoIGRhdGEuaG92ZXIgJiYgZS5idXR0b25zICkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vICdzdXBwb3J0c1Bhc3NpdmUnIGlzIG9ubHkgdHJ1ZSBpZiBhIGJyb3dzZXIgYWxzbyBzdXBwb3J0cyB0b3VjaC1hY3Rpb246IG5vbmUgaW4gQ1NTLlxuXHRcdFx0Ly8gaU9TIHNhZmFyaSBkb2VzIG5vdCwgc28gaXQgZG9lc24ndCBnZXQgdG8gYmVuZWZpdCBmcm9tIHBhc3NpdmUgc2Nyb2xsaW5nLiBpT1MgZG9lcyBzdXBwb3J0XG5cdFx0XHQvLyB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbiwgYnV0IHRoYXQgYWxsb3dzIHBhbm5pbmcsIHdoaWNoIGJyZWFrc1xuXHRcdFx0Ly8gc2xpZGVycyBhZnRlciB6b29taW5nL29uIG5vbi1yZXNwb25zaXZlIHBhZ2VzLlxuXHRcdFx0Ly8gU2VlOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTMzMTEyXG5cdFx0XHRpZiAoICFzdXBwb3J0c1Bhc3NpdmUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblxuXHRcdFx0ZS5jYWxjUG9pbnQgPSBlLnBvaW50c1sgb3B0aW9ucy5vcnQgXTtcblxuXHRcdFx0Ly8gQ2FsbCB0aGUgZXZlbnQgaGFuZGxlciB3aXRoIHRoZSBldmVudCBbIGFuZCBhZGRpdGlvbmFsIGRhdGEgXS5cblx0XHRcdGNhbGxiYWNrICggZSwgZGF0YSApO1xuXHRcdH07XG5cblx0XHR2YXIgbWV0aG9kcyA9IFtdO1xuXG5cdFx0Ly8gQmluZCBhIGNsb3N1cmUgb24gdGhlIHRhcmdldCBmb3IgZXZlcnkgZXZlbnQgdHlwZS5cblx0XHRldmVudHMuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uKCBldmVudE5hbWUgKXtcblx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIG1ldGhvZCwgc3VwcG9ydHNQYXNzaXZlID8geyBwYXNzaXZlOiB0cnVlIH0gOiBmYWxzZSk7XG5cdFx0XHRtZXRob2RzLnB1c2goW2V2ZW50TmFtZSwgbWV0aG9kXSk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gbWV0aG9kcztcblx0fVxuXG5cdC8vIFByb3ZpZGUgYSBjbGVhbiBldmVudCB3aXRoIHN0YW5kYXJkaXplZCBvZmZzZXQgdmFsdWVzLlxuXHRmdW5jdGlvbiBmaXhFdmVudCAoIGUsIHBhZ2VPZmZzZXQsIHRhcmdldCApIHtcblxuXHRcdC8vIEZpbHRlciB0aGUgZXZlbnQgdG8gcmVnaXN0ZXIgdGhlIHR5cGUsIHdoaWNoIGNhbiBiZVxuXHRcdC8vIHRvdWNoLCBtb3VzZSBvciBwb2ludGVyLiBPZmZzZXQgY2hhbmdlcyBuZWVkIHRvIGJlXG5cdFx0Ly8gbWFkZSBvbiBhbiBldmVudCBzcGVjaWZpYyBiYXNpcy5cblx0XHR2YXIgdG91Y2ggPSBlLnR5cGUuaW5kZXhPZigndG91Y2gnKSA9PT0gMDtcblx0XHR2YXIgbW91c2UgPSBlLnR5cGUuaW5kZXhPZignbW91c2UnKSA9PT0gMDtcblx0XHR2YXIgcG9pbnRlciA9IGUudHlwZS5pbmRleE9mKCdwb2ludGVyJykgPT09IDA7XG5cblx0XHR2YXIgeDtcblx0XHR2YXIgeTtcblxuXHRcdC8vIElFMTAgaW1wbGVtZW50ZWQgcG9pbnRlciBldmVudHMgd2l0aCBhIHByZWZpeDtcblx0XHRpZiAoIGUudHlwZS5pbmRleE9mKCdNU1BvaW50ZXInKSA9PT0gMCApIHtcblx0XHRcdHBvaW50ZXIgPSB0cnVlO1xuXHRcdH1cblxuXG5cdFx0Ly8gSW4gdGhlIGV2ZW50IHRoYXQgbXVsdGl0b3VjaCBpcyBhY3RpdmF0ZWQsIHRoZSBvbmx5IHRoaW5nIG9uZSBoYW5kbGUgc2hvdWxkIGJlIGNvbmNlcm5lZFxuXHRcdC8vIGFib3V0IGlzIHRoZSB0b3VjaGVzIHRoYXQgb3JpZ2luYXRlZCBvbiB0b3Agb2YgaXQuXG5cdFx0aWYgKCB0b3VjaCApIHtcblxuXHRcdFx0Ly8gUmV0dXJucyB0cnVlIGlmIGEgdG91Y2ggb3JpZ2luYXRlZCBvbiB0aGUgdGFyZ2V0LlxuXHRcdFx0dmFyIGlzVG91Y2hPblRhcmdldCA9IGZ1bmN0aW9uICh0b3VjaCkge1xuXHRcdFx0XHRyZXR1cm4gdG91Y2gudGFyZ2V0ID09PSB0YXJnZXQgfHwgdGFyZ2V0LmNvbnRhaW5zKHRvdWNoLnRhcmdldCk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBJbiB0aGUgY2FzZSBvZiB0b3VjaHN0YXJ0IGV2ZW50cywgd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhlcmUgaXMgc3RpbGwgbm8gbW9yZSB0aGFuIG9uZVxuXHRcdFx0Ly8gdG91Y2ggb24gdGhlIHRhcmdldCBzbyB3ZSBsb29rIGFtb25nc3QgYWxsIHRvdWNoZXMuXG5cdFx0XHRpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHtcblxuXHRcdFx0XHR2YXIgdGFyZ2V0VG91Y2hlcyA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChlLnRvdWNoZXMsIGlzVG91Y2hPblRhcmdldCk7XG5cblx0XHRcdFx0Ly8gRG8gbm90IHN1cHBvcnQgbW9yZSB0aGFuIG9uZSB0b3VjaCBwZXIgaGFuZGxlLlxuXHRcdFx0XHRpZiAoIHRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR4ID0gdGFyZ2V0VG91Y2hlc1swXS5wYWdlWDtcblx0XHRcdFx0eSA9IHRhcmdldFRvdWNoZXNbMF0ucGFnZVk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gSW4gdGhlIG90aGVyIGNhc2VzLCBmaW5kIG9uIGNoYW5nZWRUb3VjaGVzIGlzIGVub3VnaC5cblx0XHRcdFx0dmFyIHRhcmdldFRvdWNoID0gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChlLmNoYW5nZWRUb3VjaGVzLCBpc1RvdWNoT25UYXJnZXQpO1xuXG5cdFx0XHRcdC8vIENhbmNlbCBpZiB0aGUgdGFyZ2V0IHRvdWNoIGhhcyBub3QgbW92ZWQuXG5cdFx0XHRcdGlmICggIXRhcmdldFRvdWNoICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHggPSB0YXJnZXRUb3VjaC5wYWdlWDtcblx0XHRcdFx0eSA9IHRhcmdldFRvdWNoLnBhZ2VZO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0IHx8IGdldFBhZ2VPZmZzZXQoc2NvcGVfRG9jdW1lbnQpO1xuXG5cdFx0aWYgKCBtb3VzZSB8fCBwb2ludGVyICkge1xuXHRcdFx0eCA9IGUuY2xpZW50WCArIHBhZ2VPZmZzZXQueDtcblx0XHRcdHkgPSBlLmNsaWVudFkgKyBwYWdlT2Zmc2V0Lnk7XG5cdFx0fVxuXG5cdFx0ZS5wYWdlT2Zmc2V0ID0gcGFnZU9mZnNldDtcblx0XHRlLnBvaW50cyA9IFt4LCB5XTtcblx0XHRlLmN1cnNvciA9IG1vdXNlIHx8IHBvaW50ZXI7IC8vIEZpeCAjNDM1XG5cblx0XHRyZXR1cm4gZTtcblx0fVxuXG5cdC8vIFRyYW5zbGF0ZSBhIGNvb3JkaW5hdGUgaW4gdGhlIGRvY3VtZW50IHRvIGEgcGVyY2VudGFnZSBvbiB0aGUgc2xpZGVyXG5cdGZ1bmN0aW9uIGNhbGNQb2ludFRvUGVyY2VudGFnZSAoIGNhbGNQb2ludCApIHtcblx0XHR2YXIgbG9jYXRpb24gPSBjYWxjUG9pbnQgLSBvZmZzZXQoc2NvcGVfQmFzZSwgb3B0aW9ucy5vcnQpO1xuXHRcdHZhciBwcm9wb3NhbCA9ICggbG9jYXRpb24gKiAxMDAgKSAvIGJhc2VTaXplKCk7XG5cdFx0cmV0dXJuIG9wdGlvbnMuZGlyID8gMTAwIC0gcHJvcG9zYWwgOiBwcm9wb3NhbDtcblx0fVxuXG5cdC8vIEZpbmQgaGFuZGxlIGNsb3Nlc3QgdG8gYSBjZXJ0YWluIHBlcmNlbnRhZ2Ugb24gdGhlIHNsaWRlclxuXHRmdW5jdGlvbiBnZXRDbG9zZXN0SGFuZGxlICggcHJvcG9zYWwgKSB7XG5cblx0XHR2YXIgY2xvc2VzdCA9IDEwMDtcblx0XHR2YXIgaGFuZGxlTnVtYmVyID0gZmFsc2U7XG5cblx0XHRzY29wZV9IYW5kbGVzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlLCBpbmRleCl7XG5cblx0XHRcdC8vIERpc2FibGVkIGhhbmRsZXMgYXJlIGlnbm9yZWRcblx0XHRcdGlmICggaGFuZGxlLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcG9zID0gTWF0aC5hYnMoc2NvcGVfTG9jYXRpb25zW2luZGV4XSAtIHByb3Bvc2FsKTtcblxuXHRcdFx0aWYgKCBwb3MgPCBjbG9zZXN0ICkge1xuXHRcdFx0XHRoYW5kbGVOdW1iZXIgPSBpbmRleDtcblx0XHRcdFx0Y2xvc2VzdCA9IHBvcztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBoYW5kbGVOdW1iZXI7XG5cdH1cblxuXHQvLyBNb3ZlcyBoYW5kbGUocykgYnkgYSBwZXJjZW50YWdlXG5cdC8vIChib29sLCAlIHRvIG1vdmUsIFslIHdoZXJlIGhhbmRsZSBzdGFydGVkLCAuLi5dLCBbaW5kZXggaW4gc2NvcGVfSGFuZGxlcywgLi4uXSlcblx0ZnVuY3Rpb24gbW92ZUhhbmRsZXMgKCB1cHdhcmQsIHByb3Bvc2FsLCBsb2NhdGlvbnMsIGhhbmRsZU51bWJlcnMgKSB7XG5cblx0XHR2YXIgcHJvcG9zYWxzID0gbG9jYXRpb25zLnNsaWNlKCk7XG5cblx0XHR2YXIgYiA9IFshdXB3YXJkLCB1cHdhcmRdO1xuXHRcdHZhciBmID0gW3Vwd2FyZCwgIXVwd2FyZF07XG5cblx0XHQvLyBDb3B5IGhhbmRsZU51bWJlcnMgc28gd2UgZG9uJ3QgY2hhbmdlIHRoZSBkYXRhc2V0XG5cdFx0aGFuZGxlTnVtYmVycyA9IGhhbmRsZU51bWJlcnMuc2xpY2UoKTtcblxuXHRcdC8vIENoZWNrIHRvIHNlZSB3aGljaCBoYW5kbGUgaXMgJ2xlYWRpbmcnLlxuXHRcdC8vIElmIHRoYXQgb25lIGNhbid0IG1vdmUgdGhlIHNlY29uZCBjYW4ndCBlaXRoZXIuXG5cdFx0aWYgKCB1cHdhcmQgKSB7XG5cdFx0XHRoYW5kbGVOdW1iZXJzLnJldmVyc2UoKTtcblx0XHR9XG5cblx0XHQvLyBTdGVwIDE6IGdldCB0aGUgbWF4aW11bSBwZXJjZW50YWdlIHRoYXQgYW55IG9mIHRoZSBoYW5kbGVzIGNhbiBtb3ZlXG5cdFx0aWYgKCBoYW5kbGVOdW1iZXJzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIsIG8pIHtcblxuXHRcdFx0XHR2YXIgdG8gPSBjaGVja0hhbmRsZVBvc2l0aW9uKHByb3Bvc2FscywgaGFuZGxlTnVtYmVyLCBwcm9wb3NhbHNbaGFuZGxlTnVtYmVyXSArIHByb3Bvc2FsLCBiW29dLCBmW29dLCBmYWxzZSk7XG5cblx0XHRcdFx0Ly8gU3RvcCBpZiBvbmUgb2YgdGhlIGhhbmRsZXMgY2FuJ3QgbW92ZS5cblx0XHRcdFx0aWYgKCB0byA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0cHJvcG9zYWwgPSAwO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHByb3Bvc2FsID0gdG8gLSBwcm9wb3NhbHNbaGFuZGxlTnVtYmVyXTtcblx0XHRcdFx0XHRwcm9wb3NhbHNbaGFuZGxlTnVtYmVyXSA9IHRvO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBJZiB1c2luZyBvbmUgaGFuZGxlLCBjaGVjayBiYWNrd2FyZCBBTkQgZm9yd2FyZFxuXHRcdGVsc2Uge1xuXHRcdFx0YiA9IGYgPSBbdHJ1ZV07XG5cdFx0fVxuXG5cdFx0dmFyIHN0YXRlID0gZmFsc2U7XG5cblx0XHQvLyBTdGVwIDI6IFRyeSB0byBzZXQgdGhlIGhhbmRsZXMgd2l0aCB0aGUgZm91bmQgcGVyY2VudGFnZVxuXHRcdGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIsIG8pIHtcblx0XHRcdHN0YXRlID0gc2V0SGFuZGxlKGhhbmRsZU51bWJlciwgbG9jYXRpb25zW2hhbmRsZU51bWJlcl0gKyBwcm9wb3NhbCwgYltvXSwgZltvXSkgfHwgc3RhdGU7XG5cdFx0fSk7XG5cblx0XHQvLyBTdGVwIDM6IElmIGEgaGFuZGxlIG1vdmVkLCBmaXJlIGV2ZW50c1xuXHRcdGlmICggc3RhdGUgKSB7XG5cdFx0XHRoYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKXtcblx0XHRcdFx0ZmlyZUV2ZW50KCd1cGRhdGUnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0XHRmaXJlRXZlbnQoJ3NsaWRlJywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8vIEV4dGVybmFsIGV2ZW50IGhhbmRsaW5nXG5cdGZ1bmN0aW9uIGZpcmVFdmVudCAoIGV2ZW50TmFtZSwgaGFuZGxlTnVtYmVyLCB0YXAgKSB7XG5cblx0XHRPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24oIHRhcmdldEV2ZW50ICkge1xuXG5cdFx0XHR2YXIgZXZlbnRUeXBlID0gdGFyZ2V0RXZlbnQuc3BsaXQoJy4nKVswXTtcblxuXHRcdFx0aWYgKCBldmVudE5hbWUgPT09IGV2ZW50VHlwZSApIHtcblx0XHRcdFx0c2NvcGVfRXZlbnRzW3RhcmdldEV2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblxuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoXG5cdFx0XHRcdFx0XHQvLyBVc2UgdGhlIHNsaWRlciBwdWJsaWMgQVBJIGFzIHRoZSBzY29wZSAoJ3RoaXMnKVxuXHRcdFx0XHRcdFx0c2NvcGVfU2VsZixcblx0XHRcdFx0XHRcdC8vIFJldHVybiB2YWx1ZXMgYXMgYXJyYXksIHNvIGFyZ18xW2FyZ18yXSBpcyBhbHdheXMgdmFsaWQuXG5cdFx0XHRcdFx0XHRzY29wZV9WYWx1ZXMubWFwKG9wdGlvbnMuZm9ybWF0LnRvKSxcblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBpbmRleCwgMCBvciAxXG5cdFx0XHRcdFx0XHRoYW5kbGVOdW1iZXIsXG5cdFx0XHRcdFx0XHQvLyBVbmZvcm1hdHRlZCBzbGlkZXIgdmFsdWVzXG5cdFx0XHRcdFx0XHRzY29wZV9WYWx1ZXMuc2xpY2UoKSxcblx0XHRcdFx0XHRcdC8vIEV2ZW50IGlzIGZpcmVkIGJ5IHRhcCwgdHJ1ZSBvciBmYWxzZVxuXHRcdFx0XHRcdFx0dGFwIHx8IGZhbHNlLFxuXHRcdFx0XHRcdFx0Ly8gTGVmdCBvZmZzZXQgb2YgdGhlIGhhbmRsZSwgaW4gcmVsYXRpb24gdG8gdGhlIHNsaWRlclxuXHRcdFx0XHRcdFx0c2NvcGVfTG9jYXRpb25zLnNsaWNlKClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cblx0Ly8gRmlyZSAnZW5kJyB3aGVuIGEgbW91c2Ugb3IgcGVuIGxlYXZlcyB0aGUgZG9jdW1lbnQuXG5cdGZ1bmN0aW9uIGRvY3VtZW50TGVhdmUgKCBldmVudCwgZGF0YSApIHtcblx0XHRpZiAoIGV2ZW50LnR5cGUgPT09IFwibW91c2VvdXRcIiAmJiBldmVudC50YXJnZXQubm9kZU5hbWUgPT09IFwiSFRNTFwiICYmIGV2ZW50LnJlbGF0ZWRUYXJnZXQgPT09IG51bGwgKXtcblx0XHRcdGV2ZW50RW5kIChldmVudCwgZGF0YSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gSGFuZGxlIG1vdmVtZW50IG9uIGRvY3VtZW50IGZvciBoYW5kbGUgYW5kIHJhbmdlIGRyYWcuXG5cdGZ1bmN0aW9uIGV2ZW50TW92ZSAoIGV2ZW50LCBkYXRhICkge1xuXG5cdFx0Ly8gRml4ICM0OThcblx0XHQvLyBDaGVjayB2YWx1ZSBvZiAuYnV0dG9ucyBpbiAnc3RhcnQnIHRvIHdvcmsgYXJvdW5kIGEgYnVnIGluIElFMTAgbW9iaWxlIChkYXRhLmJ1dHRvbnNQcm9wZXJ0eSkuXG5cdFx0Ly8gaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy85MjcwMDUvbW9iaWxlLWllMTAtd2luZG93cy1waG9uZS1idXR0b25zLXByb3BlcnR5LW9mLXBvaW50ZXJtb3ZlLWV2ZW50LWFsd2F5cy16ZXJvXG5cdFx0Ly8gSUU5IGhhcyAuYnV0dG9ucyBhbmQgLndoaWNoIHplcm8gb24gbW91c2Vtb3ZlLlxuXHRcdC8vIEZpcmVmb3ggYnJlYWtzIHRoZSBzcGVjIE1ETiBkZWZpbmVzLlxuXHRcdGlmICggbmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIk1TSUUgOVwiKSA9PT0gLTEgJiYgZXZlbnQuYnV0dG9ucyA9PT0gMCAmJiBkYXRhLmJ1dHRvbnNQcm9wZXJ0eSAhPT0gMCApIHtcblx0XHRcdHJldHVybiBldmVudEVuZChldmVudCwgZGF0YSk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgYXJlIG1vdmluZyB1cCBvciBkb3duXG5cdFx0dmFyIG1vdmVtZW50ID0gKG9wdGlvbnMuZGlyID8gLTEgOiAxKSAqIChldmVudC5jYWxjUG9pbnQgLSBkYXRhLnN0YXJ0Q2FsY1BvaW50KTtcblxuXHRcdC8vIENvbnZlcnQgdGhlIG1vdmVtZW50IGludG8gYSBwZXJjZW50YWdlIG9mIHRoZSBzbGlkZXIgd2lkdGgvaGVpZ2h0XG5cdFx0dmFyIHByb3Bvc2FsID0gKG1vdmVtZW50ICogMTAwKSAvIGRhdGEuYmFzZVNpemU7XG5cblx0XHRtb3ZlSGFuZGxlcyhtb3ZlbWVudCA+IDAsIHByb3Bvc2FsLCBkYXRhLmxvY2F0aW9ucywgZGF0YS5oYW5kbGVOdW1iZXJzKTtcblx0fVxuXG5cdC8vIFVuYmluZCBtb3ZlIGV2ZW50cyBvbiBkb2N1bWVudCwgY2FsbCBjYWxsYmFja3MuXG5cdGZ1bmN0aW9uIGV2ZW50RW5kICggZXZlbnQsIGRhdGEgKSB7XG5cblx0XHQvLyBUaGUgaGFuZGxlIGlzIG5vIGxvbmdlciBhY3RpdmUsIHNvIHJlbW92ZSB0aGUgY2xhc3MuXG5cdFx0aWYgKCBkYXRhLmhhbmRsZSApIHtcblx0XHRcdHJlbW92ZUNsYXNzKGRhdGEuaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuYWN0aXZlKTtcblx0XHRcdHNjb3BlX0FjdGl2ZUhhbmRsZXNDb3VudCAtPSAxO1xuXHRcdH1cblxuXHRcdC8vIFVuYmluZCB0aGUgbW92ZSBhbmQgZW5kIGV2ZW50cywgd2hpY2ggYXJlIGFkZGVkIG9uICdzdGFydCcuXG5cdFx0ZGF0YS5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiggYyApIHtcblx0XHRcdHNjb3BlX0RvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGNbMF0sIGNbMV0pO1xuXHRcdH0pO1xuXG5cdFx0aWYgKCBzY29wZV9BY3RpdmVIYW5kbGVzQ291bnQgPT09IDAgKSB7XG5cdFx0XHQvLyBSZW1vdmUgZHJhZ2dpbmcgY2xhc3MuXG5cdFx0XHRyZW1vdmVDbGFzcyhzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5kcmFnKTtcblx0XHRcdHNldFppbmRleCgpO1xuXG5cdFx0XHQvLyBSZW1vdmUgY3Vyc29yIHN0eWxlcyBhbmQgdGV4dC1zZWxlY3Rpb24gZXZlbnRzIGJvdW5kIHRvIHRoZSBib2R5LlxuXHRcdFx0aWYgKCBldmVudC5jdXJzb3IgKSB7XG5cdFx0XHRcdHNjb3BlX0JvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG5cdFx0XHRcdHNjb3BlX0JvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBwcmV2ZW50RGVmYXVsdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZGF0YS5oYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKXtcblx0XHRcdGZpcmVFdmVudCgnY2hhbmdlJywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdGZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdGZpcmVFdmVudCgnZW5kJywgaGFuZGxlTnVtYmVyKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIEJpbmQgbW92ZSBldmVudHMgb24gZG9jdW1lbnQuXG5cdGZ1bmN0aW9uIGV2ZW50U3RhcnQgKCBldmVudCwgZGF0YSApIHtcblxuXHRcdHZhciBoYW5kbGU7XG5cdFx0aWYgKCBkYXRhLmhhbmRsZU51bWJlcnMubGVuZ3RoID09PSAxICkge1xuXG5cdFx0XHR2YXIgaGFuZGxlT3JpZ2luID0gc2NvcGVfSGFuZGxlc1tkYXRhLmhhbmRsZU51bWJlcnNbMF1dO1xuXG5cdFx0XHQvLyBJZ25vcmUgJ2Rpc2FibGVkJyBoYW5kbGVzXG5cdFx0XHRpZiAoIGhhbmRsZU9yaWdpbi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aGFuZGxlID0gaGFuZGxlT3JpZ2luLmNoaWxkcmVuWzBdO1xuXHRcdFx0c2NvcGVfQWN0aXZlSGFuZGxlc0NvdW50ICs9IDE7XG5cblx0XHRcdC8vIE1hcmsgdGhlIGhhbmRsZSBhcyAnYWN0aXZlJyBzbyBpdCBjYW4gYmUgc3R5bGVkLlxuXHRcdFx0YWRkQ2xhc3MoaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuYWN0aXZlKTtcblx0XHR9XG5cblx0XHQvLyBBIGRyYWcgc2hvdWxkIG5ldmVyIHByb3BhZ2F0ZSB1cCB0byB0aGUgJ3RhcCcgZXZlbnQuXG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHQvLyBSZWNvcmQgdGhlIGV2ZW50IGxpc3RlbmVycy5cblx0XHR2YXIgbGlzdGVuZXJzID0gW107XG5cblx0XHQvLyBBdHRhY2ggdGhlIG1vdmUgYW5kIGVuZCBldmVudHMuXG5cdFx0dmFyIG1vdmVFdmVudCA9IGF0dGFjaEV2ZW50KGFjdGlvbnMubW92ZSwgc2NvcGVfRG9jdW1lbnRFbGVtZW50LCBldmVudE1vdmUsIHtcblx0XHRcdC8vIFRoZSBldmVudCB0YXJnZXQgaGFzIGNoYW5nZWQgc28gd2UgbmVlZCB0byBwcm9wYWdhdGUgdGhlIG9yaWdpbmFsIG9uZSBzbyB0aGF0IHdlIGtlZXBcblx0XHRcdC8vIHJlbHlpbmcgb24gaXQgdG8gZXh0cmFjdCB0YXJnZXQgdG91Y2hlcy5cblx0XHRcdHRhcmdldDogZXZlbnQudGFyZ2V0LFxuXHRcdFx0aGFuZGxlOiBoYW5kbGUsXG5cdFx0XHRsaXN0ZW5lcnM6IGxpc3RlbmVycyxcblx0XHRcdHN0YXJ0Q2FsY1BvaW50OiBldmVudC5jYWxjUG9pbnQsXG5cdFx0XHRiYXNlU2l6ZTogYmFzZVNpemUoKSxcblx0XHRcdHBhZ2VPZmZzZXQ6IGV2ZW50LnBhZ2VPZmZzZXQsXG5cdFx0XHRoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnMsXG5cdFx0XHRidXR0b25zUHJvcGVydHk6IGV2ZW50LmJ1dHRvbnMsXG5cdFx0XHRsb2NhdGlvbnM6IHNjb3BlX0xvY2F0aW9ucy5zbGljZSgpXG5cdFx0fSk7XG5cblx0XHR2YXIgZW5kRXZlbnQgPSBhdHRhY2hFdmVudChhY3Rpb25zLmVuZCwgc2NvcGVfRG9jdW1lbnRFbGVtZW50LCBldmVudEVuZCwge1xuXHRcdFx0dGFyZ2V0OiBldmVudC50YXJnZXQsXG5cdFx0XHRoYW5kbGU6IGhhbmRsZSxcblx0XHRcdGxpc3RlbmVyczogbGlzdGVuZXJzLFxuXHRcdFx0ZG9Ob3RSZWplY3Q6IHRydWUsXG5cdFx0XHRoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnNcblx0XHR9KTtcblxuXHRcdHZhciBvdXRFdmVudCA9IGF0dGFjaEV2ZW50KFwibW91c2VvdXRcIiwgc2NvcGVfRG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudExlYXZlLCB7XG5cdFx0XHR0YXJnZXQ6IGV2ZW50LnRhcmdldCxcblx0XHRcdGhhbmRsZTogaGFuZGxlLFxuXHRcdFx0bGlzdGVuZXJzOiBsaXN0ZW5lcnMsXG5cdFx0XHRkb05vdFJlamVjdDogdHJ1ZSxcblx0XHRcdGhhbmRsZU51bWJlcnM6IGRhdGEuaGFuZGxlTnVtYmVyc1xuXHRcdH0pO1xuXG5cdFx0Ly8gV2Ugd2FudCB0byBtYWtlIHN1cmUgd2UgcHVzaGVkIHRoZSBsaXN0ZW5lcnMgaW4gdGhlIGxpc3RlbmVyIGxpc3QgcmF0aGVyIHRoYW4gY3JlYXRpbmdcblx0XHQvLyBhIG5ldyBvbmUgYXMgaXQgaGFzIGFscmVhZHkgYmVlbiBwYXNzZWQgdG8gdGhlIGV2ZW50IGhhbmRsZXJzLlxuXHRcdGxpc3RlbmVycy5wdXNoLmFwcGx5KGxpc3RlbmVycywgbW92ZUV2ZW50LmNvbmNhdChlbmRFdmVudCwgb3V0RXZlbnQpKTtcblxuXHRcdC8vIFRleHQgc2VsZWN0aW9uIGlzbid0IGFuIGlzc3VlIG9uIHRvdWNoIGRldmljZXMsXG5cdFx0Ly8gc28gYWRkaW5nIGN1cnNvciBzdHlsZXMgY2FuIGJlIHNraXBwZWQuXG5cdFx0aWYgKCBldmVudC5jdXJzb3IgKSB7XG5cblx0XHRcdC8vIFByZXZlbnQgdGhlICdJJyBjdXJzb3IgYW5kIGV4dGVuZCB0aGUgcmFuZ2UtZHJhZyBjdXJzb3IuXG5cdFx0XHRzY29wZV9Cb2R5LnN0eWxlLmN1cnNvciA9IGdldENvbXB1dGVkU3R5bGUoZXZlbnQudGFyZ2V0KS5jdXJzb3I7XG5cblx0XHRcdC8vIE1hcmsgdGhlIHRhcmdldCB3aXRoIGEgZHJhZ2dpbmcgc3RhdGUuXG5cdFx0XHRpZiAoIHNjb3BlX0hhbmRsZXMubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0YWRkQ2xhc3Moc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMuZHJhZyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByZXZlbnQgdGV4dCBzZWxlY3Rpb24gd2hlbiBkcmFnZ2luZyB0aGUgaGFuZGxlcy5cblx0XHRcdC8vIEluIG5vVWlTbGlkZXIgPD0gOS4yLjAsIHRoaXMgd2FzIGhhbmRsZWQgYnkgY2FsbGluZyBwcmV2ZW50RGVmYXVsdCBvbiBtb3VzZS90b3VjaCBzdGFydC9tb3ZlLFxuXHRcdFx0Ly8gd2hpY2ggaXMgc2Nyb2xsIGJsb2NraW5nLiBUaGUgc2VsZWN0c3RhcnQgZXZlbnQgaXMgc3VwcG9ydGVkIGJ5IEZpcmVGb3ggc3RhcnRpbmcgZnJvbSB2ZXJzaW9uIDUyLFxuXHRcdFx0Ly8gbWVhbmluZyB0aGUgb25seSBob2xkb3V0IGlzIGlPUyBTYWZhcmkuIFRoaXMgZG9lc24ndCBtYXR0ZXI6IHRleHQgc2VsZWN0aW9uIGlzbid0IHRyaWdnZXJlZCB0aGVyZS5cblx0XHRcdC8vIFRoZSAnY3Vyc29yJyBmbGFnIGlzIGZhbHNlLlxuXHRcdFx0Ly8gU2VlOiBodHRwOi8vY2FuaXVzZS5jb20vI3NlYXJjaD1zZWxlY3RzdGFydFxuXHRcdFx0c2NvcGVfQm9keS5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RzdGFydCcsIHByZXZlbnREZWZhdWx0LCBmYWxzZSk7XG5cdFx0fVxuXG5cdFx0ZGF0YS5oYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKXtcblx0XHRcdGZpcmVFdmVudCgnc3RhcnQnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gTW92ZSBjbG9zZXN0IGhhbmRsZSB0byB0YXBwZWQgbG9jYXRpb24uXG5cdGZ1bmN0aW9uIGV2ZW50VGFwICggZXZlbnQgKSB7XG5cblx0XHQvLyBUaGUgdGFwIGV2ZW50IHNob3VsZG4ndCBwcm9wYWdhdGUgdXBcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdHZhciBwcm9wb3NhbCA9IGNhbGNQb2ludFRvUGVyY2VudGFnZShldmVudC5jYWxjUG9pbnQpO1xuXHRcdHZhciBoYW5kbGVOdW1iZXIgPSBnZXRDbG9zZXN0SGFuZGxlKHByb3Bvc2FsKTtcblxuXHRcdC8vIFRhY2tsZSB0aGUgY2FzZSB0aGF0IGFsbCBoYW5kbGVzIGFyZSAnZGlzYWJsZWQnLlxuXHRcdGlmICggaGFuZGxlTnVtYmVyID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBGbGFnIHRoZSBzbGlkZXIgYXMgaXQgaXMgbm93IGluIGEgdHJhbnNpdGlvbmFsIHN0YXRlLlxuXHRcdC8vIFRyYW5zaXRpb24gdGFrZXMgYSBjb25maWd1cmFibGUgYW1vdW50IG9mIG1zIChkZWZhdWx0IDMwMCkuIFJlLWVuYWJsZSB0aGUgc2xpZGVyIGFmdGVyIHRoYXQuXG5cdFx0aWYgKCAhb3B0aW9ucy5ldmVudHMuc25hcCApIHtcblx0XHRcdGFkZENsYXNzRm9yKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcCwgb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbik7XG5cdFx0fVxuXG5cdFx0c2V0SGFuZGxlKGhhbmRsZU51bWJlciwgcHJvcG9zYWwsIHRydWUsIHRydWUpO1xuXG5cdFx0c2V0WmluZGV4KCk7XG5cblx0XHRmaXJlRXZlbnQoJ3NsaWRlJywgaGFuZGxlTnVtYmVyLCB0cnVlKTtcblx0XHRmaXJlRXZlbnQoJ3VwZGF0ZScsIGhhbmRsZU51bWJlciwgdHJ1ZSk7XG5cdFx0ZmlyZUV2ZW50KCdjaGFuZ2UnLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xuXHRcdGZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyLCB0cnVlKTtcblxuXHRcdGlmICggb3B0aW9ucy5ldmVudHMuc25hcCApIHtcblx0XHRcdGV2ZW50U3RhcnQoZXZlbnQsIHsgaGFuZGxlTnVtYmVyczogW2hhbmRsZU51bWJlcl0gfSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gRmlyZXMgYSAnaG92ZXInIGV2ZW50IGZvciBhIGhvdmVyZWQgbW91c2UvcGVuIHBvc2l0aW9uLlxuXHRmdW5jdGlvbiBldmVudEhvdmVyICggZXZlbnQgKSB7XG5cblx0XHR2YXIgcHJvcG9zYWwgPSBjYWxjUG9pbnRUb1BlcmNlbnRhZ2UoZXZlbnQuY2FsY1BvaW50KTtcblxuXHRcdHZhciB0byA9IHNjb3BlX1NwZWN0cnVtLmdldFN0ZXAocHJvcG9zYWwpO1xuXHRcdHZhciB2YWx1ZSA9IHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyh0byk7XG5cblx0XHRPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24oIHRhcmdldEV2ZW50ICkge1xuXHRcdFx0aWYgKCAnaG92ZXInID09PSB0YXJnZXRFdmVudC5zcGxpdCgnLicpWzBdICkge1xuXHRcdFx0XHRzY29wZV9FdmVudHNbdGFyZ2V0RXZlbnRdLmZvckVhY2goZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoIHNjb3BlX1NlbGYsIHZhbHVlICk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gQXR0YWNoIGV2ZW50cyB0byBzZXZlcmFsIHNsaWRlciBwYXJ0cy5cblx0ZnVuY3Rpb24gYmluZFNsaWRlckV2ZW50cyAoIGJlaGF2aW91ciApIHtcblxuXHRcdC8vIEF0dGFjaCB0aGUgc3RhbmRhcmQgZHJhZyBldmVudCB0byB0aGUgaGFuZGxlcy5cblx0XHRpZiAoICFiZWhhdmlvdXIuZml4ZWQgKSB7XG5cblx0XHRcdHNjb3BlX0hhbmRsZXMuZm9yRWFjaChmdW5jdGlvbiggaGFuZGxlLCBpbmRleCApe1xuXG5cdFx0XHRcdC8vIFRoZXNlIGV2ZW50cyBhcmUgb25seSBib3VuZCB0byB0aGUgdmlzdWFsIGhhbmRsZVxuXHRcdFx0XHQvLyBlbGVtZW50LCBub3QgdGhlICdyZWFsJyBvcmlnaW4gZWxlbWVudC5cblx0XHRcdFx0YXR0YWNoRXZlbnQgKCBhY3Rpb25zLnN0YXJ0LCBoYW5kbGUuY2hpbGRyZW5bMF0sIGV2ZW50U3RhcnQsIHtcblx0XHRcdFx0XHRoYW5kbGVOdW1iZXJzOiBbaW5kZXhdXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gQXR0YWNoIHRoZSB0YXAgZXZlbnQgdG8gdGhlIHNsaWRlciBiYXNlLlxuXHRcdGlmICggYmVoYXZpb3VyLnRhcCApIHtcblx0XHRcdGF0dGFjaEV2ZW50IChhY3Rpb25zLnN0YXJ0LCBzY29wZV9CYXNlLCBldmVudFRhcCwge30pO1xuXHRcdH1cblxuXHRcdC8vIEZpcmUgaG92ZXIgZXZlbnRzXG5cdFx0aWYgKCBiZWhhdmlvdXIuaG92ZXIgKSB7XG5cdFx0XHRhdHRhY2hFdmVudCAoYWN0aW9ucy5tb3ZlLCBzY29wZV9CYXNlLCBldmVudEhvdmVyLCB7IGhvdmVyOiB0cnVlIH0pO1xuXHRcdH1cblxuXHRcdC8vIE1ha2UgdGhlIHJhbmdlIGRyYWdnYWJsZS5cblx0XHRpZiAoIGJlaGF2aW91ci5kcmFnICl7XG5cblx0XHRcdHNjb3BlX0Nvbm5lY3RzLmZvckVhY2goZnVuY3Rpb24oIGNvbm5lY3QsIGluZGV4ICl7XG5cblx0XHRcdFx0aWYgKCBjb25uZWN0ID09PSBmYWxzZSB8fCBpbmRleCA9PT0gMCB8fCBpbmRleCA9PT0gc2NvcGVfQ29ubmVjdHMubGVuZ3RoIC0gMSApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgaGFuZGxlQmVmb3JlID0gc2NvcGVfSGFuZGxlc1tpbmRleCAtIDFdO1xuXHRcdFx0XHR2YXIgaGFuZGxlQWZ0ZXIgPSBzY29wZV9IYW5kbGVzW2luZGV4XTtcblx0XHRcdFx0dmFyIGV2ZW50SG9sZGVycyA9IFtjb25uZWN0XTtcblxuXHRcdFx0XHRhZGRDbGFzcyhjb25uZWN0LCBvcHRpb25zLmNzc0NsYXNzZXMuZHJhZ2dhYmxlKTtcblxuXHRcdFx0XHQvLyBXaGVuIHRoZSByYW5nZSBpcyBmaXhlZCwgdGhlIGVudGlyZSByYW5nZSBjYW5cblx0XHRcdFx0Ly8gYmUgZHJhZ2dlZCBieSB0aGUgaGFuZGxlcy4gVGhlIGhhbmRsZSBpbiB0aGUgZmlyc3Rcblx0XHRcdFx0Ly8gb3JpZ2luIHdpbGwgcHJvcGFnYXRlIHRoZSBzdGFydCBldmVudCB1cHdhcmQsXG5cdFx0XHRcdC8vIGJ1dCBpdCBuZWVkcyB0byBiZSBib3VuZCBtYW51YWxseSBvbiB0aGUgb3RoZXIuXG5cdFx0XHRcdGlmICggYmVoYXZpb3VyLmZpeGVkICkge1xuXHRcdFx0XHRcdGV2ZW50SG9sZGVycy5wdXNoKGhhbmRsZUJlZm9yZS5jaGlsZHJlblswXSk7XG5cdFx0XHRcdFx0ZXZlbnRIb2xkZXJzLnB1c2goaGFuZGxlQWZ0ZXIuY2hpbGRyZW5bMF0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZXZlbnRIb2xkZXJzLmZvckVhY2goZnVuY3Rpb24oIGV2ZW50SG9sZGVyICkge1xuXHRcdFx0XHRcdGF0dGFjaEV2ZW50ICggYWN0aW9ucy5zdGFydCwgZXZlbnRIb2xkZXIsIGV2ZW50U3RhcnQsIHtcblx0XHRcdFx0XHRcdGhhbmRsZXM6IFtoYW5kbGVCZWZvcmUsIGhhbmRsZUFmdGVyXSxcblx0XHRcdFx0XHRcdGhhbmRsZU51bWJlcnM6IFtpbmRleCAtIDEsIGluZGV4XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cblx0Ly8gU3BsaXQgb3V0IHRoZSBoYW5kbGUgcG9zaXRpb25pbmcgbG9naWMgc28gdGhlIE1vdmUgZXZlbnQgY2FuIHVzZSBpdCwgdG9vXG5cdGZ1bmN0aW9uIGNoZWNrSGFuZGxlUG9zaXRpb24gKCByZWZlcmVuY2UsIGhhbmRsZU51bWJlciwgdG8sIGxvb2tCYWNrd2FyZCwgbG9va0ZvcndhcmQsIGdldFZhbHVlICkge1xuXG5cdFx0Ly8gRm9yIHNsaWRlcnMgd2l0aCBtdWx0aXBsZSBoYW5kbGVzLCBsaW1pdCBtb3ZlbWVudCB0byB0aGUgb3RoZXIgaGFuZGxlLlxuXHRcdC8vIEFwcGx5IHRoZSBtYXJnaW4gb3B0aW9uIGJ5IGFkZGluZyBpdCB0byB0aGUgaGFuZGxlIHBvc2l0aW9ucy5cblx0XHRpZiAoIHNjb3BlX0hhbmRsZXMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0aWYgKCBsb29rQmFja3dhcmQgJiYgaGFuZGxlTnVtYmVyID4gMCApIHtcblx0XHRcdFx0dG8gPSBNYXRoLm1heCh0bywgcmVmZXJlbmNlW2hhbmRsZU51bWJlciAtIDFdICsgb3B0aW9ucy5tYXJnaW4pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGxvb2tGb3J3YXJkICYmIGhhbmRsZU51bWJlciA8IHNjb3BlX0hhbmRsZXMubGVuZ3RoIC0gMSApIHtcblx0XHRcdFx0dG8gPSBNYXRoLm1pbih0bywgcmVmZXJlbmNlW2hhbmRsZU51bWJlciArIDFdIC0gb3B0aW9ucy5tYXJnaW4pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFRoZSBsaW1pdCBvcHRpb24gaGFzIHRoZSBvcHBvc2l0ZSBlZmZlY3QsIGxpbWl0aW5nIGhhbmRsZXMgdG8gYVxuXHRcdC8vIG1heGltdW0gZGlzdGFuY2UgZnJvbSBhbm90aGVyLiBMaW1pdCBtdXN0IGJlID4gMCwgYXMgb3RoZXJ3aXNlXG5cdFx0Ly8gaGFuZGxlcyB3b3VsZCBiZSB1bm1vdmVhYmxlLlxuXHRcdGlmICggc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxICYmIG9wdGlvbnMubGltaXQgKSB7XG5cblx0XHRcdGlmICggbG9va0JhY2t3YXJkICYmIGhhbmRsZU51bWJlciA+IDAgKSB7XG5cdFx0XHRcdHRvID0gTWF0aC5taW4odG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgLSAxXSArIG9wdGlvbnMubGltaXQpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGxvb2tGb3J3YXJkICYmIGhhbmRsZU51bWJlciA8IHNjb3BlX0hhbmRsZXMubGVuZ3RoIC0gMSApIHtcblx0XHRcdFx0dG8gPSBNYXRoLm1heCh0bywgcmVmZXJlbmNlW2hhbmRsZU51bWJlciArIDFdIC0gb3B0aW9ucy5saW1pdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHBhZGRpbmcgb3B0aW9uIGtlZXBzIHRoZSBoYW5kbGVzIGEgY2VydGFpbiBkaXN0YW5jZSBmcm9tIHRoZVxuXHRcdC8vIGVkZ2VzIG9mIHRoZSBzbGlkZXIuIFBhZGRpbmcgbXVzdCBiZSA+IDAuXG5cdFx0aWYgKCBvcHRpb25zLnBhZGRpbmcgKSB7XG5cblx0XHRcdGlmICggaGFuZGxlTnVtYmVyID09PSAwICkge1xuXHRcdFx0XHR0byA9IE1hdGgubWF4KHRvLCBvcHRpb25zLnBhZGRpbmdbMF0pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGhhbmRsZU51bWJlciA9PT0gc2NvcGVfSGFuZGxlcy5sZW5ndGggLSAxICkge1xuXHRcdFx0XHR0byA9IE1hdGgubWluKHRvLCAxMDAgLSBvcHRpb25zLnBhZGRpbmdbMV0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRvID0gc2NvcGVfU3BlY3RydW0uZ2V0U3RlcCh0byk7XG5cblx0XHQvLyBMaW1pdCBwZXJjZW50YWdlIHRvIHRoZSAwIC0gMTAwIHJhbmdlXG5cdFx0dG8gPSBsaW1pdCh0byk7XG5cblx0XHQvLyBSZXR1cm4gZmFsc2UgaWYgaGFuZGxlIGNhbid0IG1vdmVcblx0XHRpZiAoIHRvID09PSByZWZlcmVuY2VbaGFuZGxlTnVtYmVyXSAmJiAhZ2V0VmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRvO1xuXHR9XG5cblx0Ly8gVXNlcyBzbGlkZXIgb3JpZW50YXRpb24gdG8gY3JlYXRlIENTUyBydWxlcy4gYSA9IGJhc2UgdmFsdWU7XG5cdGZ1bmN0aW9uIGluUnVsZU9yZGVyICggdiwgYSApIHtcblx0XHR2YXIgbyA9IG9wdGlvbnMub3J0O1xuXHRcdHJldHVybiAobz9hOnYpICsgJywgJyArIChvP3Y6YSk7XG5cdH1cblxuXHRmdW5jdGlvbiB0b1BjdCAoIHBjdCApIHtcblx0XHRyZXR1cm4gcGN0ICsgJyUnO1xuXHR9XG5cblx0Ly8gVGFrZXMgYSBiYXNlIHZhbHVlIGFuZCBhbiBvZmZzZXQuIFRoaXMgb2Zmc2V0IGlzIHVzZWQgZm9yIHRoZSBjb25uZWN0IGJhciBzaXplLlxuXHQvLyBJbiB0aGUgaW5pdGlhbCBkZXNpZ24gZm9yIHRoaXMgZmVhdHVyZSwgdGhlIG9yaWdpbiBlbGVtZW50IHdhcyAxJSB3aWRlLlxuXHQvLyBVbmZvcnR1bmF0ZWx5LCBhIHJvdW5kaW5nIGJ1ZyBpbiBDaHJvbWUgbWFrZXMgaXQgaW1wb3NzaWJsZSB0byBpbXBsZW1lbnQgdGhpcyBmZWF0dXJlXG5cdC8vIGluIHRoaXMgbWFubmVyOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03OTgyMjNcblx0ZnVuY3Rpb24gdHJhbnNmb3JtRGlyZWN0aW9uICggYSwgYiApIHtcblx0XHRyZXR1cm4gb3B0aW9ucy5kaXIgPyAxMDAgLSBhIC0gYiA6IGE7XG5cdH1cblxuXHQvLyBVcGRhdGVzIHNjb3BlX0xvY2F0aW9ucyBhbmQgc2NvcGVfVmFsdWVzLCB1cGRhdGVzIHZpc3VhbCBzdGF0ZVxuXHRmdW5jdGlvbiB1cGRhdGVIYW5kbGVQb3NpdGlvbiAoIGhhbmRsZU51bWJlciwgdG8gKSB7XG5cblx0XHQvLyBVcGRhdGUgbG9jYXRpb25zLlxuXHRcdHNjb3BlX0xvY2F0aW9uc1toYW5kbGVOdW1iZXJdID0gdG87XG5cblx0XHQvLyBDb252ZXJ0IHRoZSB2YWx1ZSB0byB0aGUgc2xpZGVyIHN0ZXBwaW5nL3JhbmdlLlxuXHRcdHNjb3BlX1ZhbHVlc1toYW5kbGVOdW1iZXJdID0gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKHRvKTtcblxuXHRcdHZhciBydWxlID0gJ3RyYW5zbGF0ZSgnICsgaW5SdWxlT3JkZXIodG9QY3QodHJhbnNmb3JtRGlyZWN0aW9uKHRvLCAwKSksICcwJykgKyAnKSc7XG5cdFx0c2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdLnN0eWxlW29wdGlvbnMudHJhbnNmb3JtUnVsZV0gPSBydWxlO1xuXG5cdFx0dXBkYXRlQ29ubmVjdChoYW5kbGVOdW1iZXIpO1xuXHRcdHVwZGF0ZUNvbm5lY3QoaGFuZGxlTnVtYmVyICsgMSk7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRaaW5kZXggKCApIHtcblxuXHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xuXHRcdFx0Ly8gSGFuZGxlcyBiZWZvcmUgdGhlIHNsaWRlciBtaWRkbGUgYXJlIHN0YWNrZWQgbGF0ZXIgPSBoaWdoZXIsXG5cdFx0XHQvLyBIYW5kbGVzIGFmdGVyIHRoZSBtaWRkbGUgbGF0ZXIgaXMgbG93ZXJcblx0XHRcdC8vIFtbN10gWzhdIC4uLi4uLi4uLi4gfCAuLi4uLi4uLi4uIFs1XSBbNF1cblx0XHRcdHZhciBkaXIgPSAoc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl0gPiA1MCA/IC0xIDogMSk7XG5cdFx0XHR2YXIgekluZGV4ID0gMyArIChzY29wZV9IYW5kbGVzLmxlbmd0aCArIChkaXIgKiBoYW5kbGVOdW1iZXIpKTtcblx0XHRcdHNjb3BlX0hhbmRsZXNbaGFuZGxlTnVtYmVyXS5zdHlsZS56SW5kZXggPSB6SW5kZXg7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBUZXN0IHN1Z2dlc3RlZCB2YWx1ZXMgYW5kIGFwcGx5IG1hcmdpbiwgc3RlcC5cblx0ZnVuY3Rpb24gc2V0SGFuZGxlICggaGFuZGxlTnVtYmVyLCB0bywgbG9va0JhY2t3YXJkLCBsb29rRm9yd2FyZCApIHtcblxuXHRcdHRvID0gY2hlY2tIYW5kbGVQb3NpdGlvbihzY29wZV9Mb2NhdGlvbnMsIGhhbmRsZU51bWJlciwgdG8sIGxvb2tCYWNrd2FyZCwgbG9va0ZvcndhcmQsIGZhbHNlKTtcblxuXHRcdGlmICggdG8gPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHVwZGF0ZUhhbmRsZVBvc2l0aW9uKGhhbmRsZU51bWJlciwgdG8pO1xuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBVcGRhdGVzIHN0eWxlIGF0dHJpYnV0ZSBmb3IgY29ubmVjdCBub2Rlc1xuXHRmdW5jdGlvbiB1cGRhdGVDb25uZWN0ICggaW5kZXggKSB7XG5cblx0XHQvLyBTa2lwIGNvbm5lY3RzIHNldCB0byBmYWxzZVxuXHRcdGlmICggIXNjb3BlX0Nvbm5lY3RzW2luZGV4XSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgbCA9IDA7XG5cdFx0dmFyIGggPSAxMDA7XG5cblx0XHRpZiAoIGluZGV4ICE9PSAwICkge1xuXHRcdFx0bCA9IHNjb3BlX0xvY2F0aW9uc1tpbmRleCAtIDFdO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggIT09IHNjb3BlX0Nvbm5lY3RzLmxlbmd0aCAtIDEgKSB7XG5cdFx0XHRoID0gc2NvcGVfTG9jYXRpb25zW2luZGV4XTtcblx0XHR9XG5cblx0XHQvLyBXZSB1c2UgdHdvIHJ1bGVzOlxuXHRcdC8vICd0cmFuc2xhdGUnIHRvIGNoYW5nZSB0aGUgbGVmdC90b3Agb2Zmc2V0O1xuXHRcdC8vICdzY2FsZScgdG8gY2hhbmdlIHRoZSB3aWR0aCBvZiB0aGUgZWxlbWVudDtcblx0XHQvLyBBcyB0aGUgZWxlbWVudCBoYXMgYSB3aWR0aCBvZiAxMDAlLCBhIHRyYW5zbGF0aW9uIG9mIDEwMCUgaXMgZXF1YWwgdG8gMTAwJSBvZiB0aGUgcGFyZW50ICgubm9VaS1iYXNlKVxuXHRcdHZhciBjb25uZWN0V2lkdGggPSBoIC0gbDtcblx0XHR2YXIgdHJhbnNsYXRlUnVsZSA9ICd0cmFuc2xhdGUoJyArIGluUnVsZU9yZGVyKHRvUGN0KHRyYW5zZm9ybURpcmVjdGlvbihsLCBjb25uZWN0V2lkdGgpKSwgJzAnKSArICcpJztcblx0XHR2YXIgc2NhbGVSdWxlID0gJ3NjYWxlKCcgKyBpblJ1bGVPcmRlcihjb25uZWN0V2lkdGggLyAxMDAsICcxJykgKyAnKSc7XG5cblx0XHRzY29wZV9Db25uZWN0c1tpbmRleF0uc3R5bGVbb3B0aW9ucy50cmFuc2Zvcm1SdWxlXSA9IHRyYW5zbGF0ZVJ1bGUgKyAnICcgKyBzY2FsZVJ1bGU7XG5cdH1cblxuXHQvLyBQYXJzZXMgdmFsdWUgcGFzc2VkIHRvIC5zZXQgbWV0aG9kLiBSZXR1cm5zIGN1cnJlbnQgdmFsdWUgaWYgbm90IHBhcnNlYWJsZS5cblx0ZnVuY3Rpb24gcmVzb2x2ZVRvVmFsdWUgKCB0bywgaGFuZGxlTnVtYmVyICkge1xuXG5cdFx0Ly8gU2V0dGluZyB3aXRoIG51bGwgaW5kaWNhdGVzIGFuICdpZ25vcmUnLlxuXHRcdC8vIElucHV0dGluZyAnZmFsc2UnIGlzIGludmFsaWQuXG5cdFx0aWYgKCB0byA9PT0gbnVsbCB8fCB0byA9PT0gZmFsc2UgfHwgdG8gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiBzY29wZV9Mb2NhdGlvbnNbaGFuZGxlTnVtYmVyXTtcblx0XHR9XG5cblx0XHQvLyBJZiBhIGZvcm1hdHRlZCBudW1iZXIgd2FzIHBhc3NlZCwgYXR0ZW1wdCB0byBkZWNvZGUgaXQuXG5cdFx0aWYgKCB0eXBlb2YgdG8gPT09ICdudW1iZXInICkge1xuXHRcdFx0dG8gPSBTdHJpbmcodG8pO1xuXHRcdH1cblxuXHRcdHRvID0gb3B0aW9ucy5mb3JtYXQuZnJvbSh0byk7XG5cdFx0dG8gPSBzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKHRvKTtcblxuXHRcdC8vIElmIHBhcnNpbmcgdGhlIG51bWJlciBmYWlsZWQsIHVzZSB0aGUgY3VycmVudCB2YWx1ZS5cblx0XHRpZiAoIHRvID09PSBmYWxzZSB8fCBpc05hTih0bykgKSB7XG5cdFx0XHRyZXR1cm4gc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRvO1xuXHR9XG5cblx0Ly8gU2V0IHRoZSBzbGlkZXIgdmFsdWUuXG5cdGZ1bmN0aW9uIHZhbHVlU2V0ICggaW5wdXQsIGZpcmVTZXRFdmVudCApIHtcblxuXHRcdHZhciB2YWx1ZXMgPSBhc0FycmF5KGlucHV0KTtcblx0XHR2YXIgaXNJbml0ID0gc2NvcGVfTG9jYXRpb25zWzBdID09PSB1bmRlZmluZWQ7XG5cblx0XHQvLyBFdmVudCBmaXJlcyBieSBkZWZhdWx0XG5cdFx0ZmlyZVNldEV2ZW50ID0gKGZpcmVTZXRFdmVudCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6ICEhZmlyZVNldEV2ZW50KTtcblxuXHRcdC8vIEFuaW1hdGlvbiBpcyBvcHRpb25hbC5cblx0XHQvLyBNYWtlIHN1cmUgdGhlIGluaXRpYWwgdmFsdWVzIHdlcmUgc2V0IGJlZm9yZSB1c2luZyBhbmltYXRlZCBwbGFjZW1lbnQuXG5cdFx0aWYgKCBvcHRpb25zLmFuaW1hdGUgJiYgIWlzSW5pdCApIHtcblx0XHRcdGFkZENsYXNzRm9yKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcCwgb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbik7XG5cdFx0fVxuXG5cdFx0Ly8gRmlyc3QgcGFzcywgd2l0aG91dCBsb29rQWhlYWQgYnV0IHdpdGggbG9va0JhY2t3YXJkLiBWYWx1ZXMgYXJlIHNldCBmcm9tIGxlZnQgdG8gcmlnaHQuXG5cdFx0c2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcil7XG5cdFx0XHRzZXRIYW5kbGUoaGFuZGxlTnVtYmVyLCByZXNvbHZlVG9WYWx1ZSh2YWx1ZXNbaGFuZGxlTnVtYmVyXSwgaGFuZGxlTnVtYmVyKSwgdHJ1ZSwgZmFsc2UpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gU2Vjb25kIHBhc3MuIE5vdyB0aGF0IGFsbCBiYXNlIHZhbHVlcyBhcmUgc2V0LCBhcHBseSBjb25zdHJhaW50c1xuXHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xuXHRcdFx0c2V0SGFuZGxlKGhhbmRsZU51bWJlciwgc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl0sIHRydWUsIHRydWUpO1xuXHRcdH0pO1xuXG5cdFx0c2V0WmluZGV4KCk7XG5cblx0XHRzY29wZV9IYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKXtcblxuXHRcdFx0ZmlyZUV2ZW50KCd1cGRhdGUnLCBoYW5kbGVOdW1iZXIpO1xuXG5cdFx0XHQvLyBGaXJlIHRoZSBldmVudCBvbmx5IGZvciBoYW5kbGVzIHRoYXQgcmVjZWl2ZWQgYSBuZXcgdmFsdWUsIGFzIHBlciAjNTc5XG5cdFx0XHRpZiAoIHZhbHVlc1toYW5kbGVOdW1iZXJdICE9PSBudWxsICYmIGZpcmVTZXRFdmVudCApIHtcblx0XHRcdFx0ZmlyZUV2ZW50KCdzZXQnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUmVzZXQgc2xpZGVyIHRvIGluaXRpYWwgdmFsdWVzXG5cdGZ1bmN0aW9uIHZhbHVlUmVzZXQgKCBmaXJlU2V0RXZlbnQgKSB7XG5cdFx0dmFsdWVTZXQob3B0aW9ucy5zdGFydCwgZmlyZVNldEV2ZW50KTtcblx0fVxuXG5cdC8vIEdldCB0aGUgc2xpZGVyIHZhbHVlLlxuXHRmdW5jdGlvbiB2YWx1ZUdldCAoICkge1xuXG5cdFx0dmFyIHZhbHVlcyA9IHNjb3BlX1ZhbHVlcy5tYXAob3B0aW9ucy5mb3JtYXQudG8pO1xuXG5cdFx0Ly8gSWYgb25seSBvbmUgaGFuZGxlIGlzIHVzZWQsIHJldHVybiBhIHNpbmdsZSB2YWx1ZS5cblx0XHRpZiAoIHZhbHVlcy5sZW5ndGggPT09IDEgKXtcblx0XHRcdHJldHVybiB2YWx1ZXNbMF07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlcztcblx0fVxuXG5cdC8vIFJlbW92ZXMgY2xhc3NlcyBmcm9tIHRoZSByb290IGFuZCBlbXB0aWVzIGl0LlxuXHRmdW5jdGlvbiBkZXN0cm95ICggKSB7XG5cblx0XHRmb3IgKCB2YXIga2V5IGluIG9wdGlvbnMuY3NzQ2xhc3NlcyApIHtcblx0XHRcdGlmICggIW9wdGlvbnMuY3NzQ2xhc3Nlcy5oYXNPd25Qcm9wZXJ0eShrZXkpICkgeyBjb250aW51ZTsgfVxuXHRcdFx0cmVtb3ZlQ2xhc3Moc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXNba2V5XSk7XG5cdFx0fVxuXG5cdFx0d2hpbGUgKHNjb3BlX1RhcmdldC5maXJzdENoaWxkKSB7XG5cdFx0XHRzY29wZV9UYXJnZXQucmVtb3ZlQ2hpbGQoc2NvcGVfVGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdGRlbGV0ZSBzY29wZV9UYXJnZXQubm9VaVNsaWRlcjtcblx0fVxuXG5cdC8vIEdldCB0aGUgY3VycmVudCBzdGVwIHNpemUgZm9yIHRoZSBzbGlkZXIuXG5cdGZ1bmN0aW9uIGdldEN1cnJlbnRTdGVwICggKSB7XG5cblx0XHQvLyBDaGVjayBhbGwgbG9jYXRpb25zLCBtYXAgdGhlbSB0byB0aGVpciBzdGVwcGluZyBwb2ludC5cblx0XHQvLyBHZXQgdGhlIHN0ZXAgcG9pbnQsIHRoZW4gZmluZCBpdCBpbiB0aGUgaW5wdXQgbGlzdC5cblx0XHRyZXR1cm4gc2NvcGVfTG9jYXRpb25zLm1hcChmdW5jdGlvbiggbG9jYXRpb24sIGluZGV4ICl7XG5cblx0XHRcdHZhciBuZWFyYnlTdGVwcyA9IHNjb3BlX1NwZWN0cnVtLmdldE5lYXJieVN0ZXBzKCBsb2NhdGlvbiApO1xuXHRcdFx0dmFyIHZhbHVlID0gc2NvcGVfVmFsdWVzW2luZGV4XTtcblx0XHRcdHZhciBpbmNyZW1lbnQgPSBuZWFyYnlTdGVwcy50aGlzU3RlcC5zdGVwO1xuXHRcdFx0dmFyIGRlY3JlbWVudCA9IG51bGw7XG5cblx0XHRcdC8vIElmIHRoZSBuZXh0IHZhbHVlIGluIHRoaXMgc3RlcCBtb3ZlcyBpbnRvIHRoZSBuZXh0IHN0ZXAsXG5cdFx0XHQvLyB0aGUgaW5jcmVtZW50IGlzIHRoZSBzdGFydCBvZiB0aGUgbmV4dCBzdGVwIC0gdGhlIGN1cnJlbnQgdmFsdWVcblx0XHRcdGlmICggaW5jcmVtZW50ICE9PSBmYWxzZSApIHtcblx0XHRcdFx0aWYgKCB2YWx1ZSArIGluY3JlbWVudCA+IG5lYXJieVN0ZXBzLnN0ZXBBZnRlci5zdGFydFZhbHVlICkge1xuXHRcdFx0XHRcdGluY3JlbWVudCA9IG5lYXJieVN0ZXBzLnN0ZXBBZnRlci5zdGFydFZhbHVlIC0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXG5cdFx0XHQvLyBJZiB0aGUgdmFsdWUgaXMgYmV5b25kIHRoZSBzdGFydGluZyBwb2ludFxuXHRcdFx0aWYgKCB2YWx1ZSA+IG5lYXJieVN0ZXBzLnRoaXNTdGVwLnN0YXJ0VmFsdWUgKSB7XG5cdFx0XHRcdGRlY3JlbWVudCA9IG5lYXJieVN0ZXBzLnRoaXNTdGVwLnN0ZXA7XG5cdFx0XHR9XG5cblx0XHRcdGVsc2UgaWYgKCBuZWFyYnlTdGVwcy5zdGVwQmVmb3JlLnN0ZXAgPT09IGZhbHNlICkge1xuXHRcdFx0XHRkZWNyZW1lbnQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBoYW5kbGUgaXMgYXQgdGhlIHN0YXJ0IG9mIGEgc3RlcCwgaXQgYWx3YXlzIHN0ZXBzIGJhY2sgaW50byB0aGUgcHJldmlvdXMgc3RlcCBmaXJzdFxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGRlY3JlbWVudCA9IHZhbHVlIC0gbmVhcmJ5U3RlcHMuc3RlcEJlZm9yZS5oaWdoZXN0U3RlcDtcblx0XHRcdH1cblxuXG5cdFx0XHQvLyBOb3csIGlmIGF0IHRoZSBzbGlkZXIgZWRnZXMsIHRoZXJlIGlzIG5vdCBpbi9kZWNyZW1lbnRcblx0XHRcdGlmICggbG9jYXRpb24gPT09IDEwMCApIHtcblx0XHRcdFx0aW5jcmVtZW50ID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0ZWxzZSBpZiAoIGxvY2F0aW9uID09PSAwICkge1xuXHRcdFx0XHRkZWNyZW1lbnQgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcyBwZXIgIzM5MSwgdGhlIGNvbXBhcmlzb24gZm9yIHRoZSBkZWNyZW1lbnQgc3RlcCBjYW4gaGF2ZSBzb21lIHJvdW5kaW5nIGlzc3Vlcy5cblx0XHRcdHZhciBzdGVwRGVjaW1hbHMgPSBzY29wZV9TcGVjdHJ1bS5jb3VudFN0ZXBEZWNpbWFscygpO1xuXG5cdFx0XHQvLyBSb3VuZCBwZXIgIzM5MVxuXHRcdFx0aWYgKCBpbmNyZW1lbnQgIT09IG51bGwgJiYgaW5jcmVtZW50ICE9PSBmYWxzZSApIHtcblx0XHRcdFx0aW5jcmVtZW50ID0gTnVtYmVyKGluY3JlbWVudC50b0ZpeGVkKHN0ZXBEZWNpbWFscykpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGRlY3JlbWVudCAhPT0gbnVsbCAmJiBkZWNyZW1lbnQgIT09IGZhbHNlICkge1xuXHRcdFx0XHRkZWNyZW1lbnQgPSBOdW1iZXIoZGVjcmVtZW50LnRvRml4ZWQoc3RlcERlY2ltYWxzKSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBbZGVjcmVtZW50LCBpbmNyZW1lbnRdO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gQXR0YWNoIGFuIGV2ZW50IHRvIHRoaXMgc2xpZGVyLCBwb3NzaWJseSBpbmNsdWRpbmcgYSBuYW1lc3BhY2Vcblx0ZnVuY3Rpb24gYmluZEV2ZW50ICggbmFtZXNwYWNlZEV2ZW50LCBjYWxsYmFjayApIHtcblx0XHRzY29wZV9FdmVudHNbbmFtZXNwYWNlZEV2ZW50XSA9IHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdIHx8IFtdO1xuXHRcdHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdLnB1c2goY2FsbGJhY2spO1xuXG5cdFx0Ly8gSWYgdGhlIGV2ZW50IGJvdW5kIGlzICd1cGRhdGUsJyBmaXJlIGl0IGltbWVkaWF0ZWx5IGZvciBhbGwgaGFuZGxlcy5cblx0XHRpZiAoIG5hbWVzcGFjZWRFdmVudC5zcGxpdCgnLicpWzBdID09PSAndXBkYXRlJyApIHtcblx0XHRcdHNjb3BlX0hhbmRsZXMuZm9yRWFjaChmdW5jdGlvbihhLCBpbmRleCl7XG5cdFx0XHRcdGZpcmVFdmVudCgndXBkYXRlJywgaW5kZXgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gVW5kbyBhdHRhY2htZW50IG9mIGV2ZW50XG5cdGZ1bmN0aW9uIHJlbW92ZUV2ZW50ICggbmFtZXNwYWNlZEV2ZW50ICkge1xuXG5cdFx0dmFyIGV2ZW50ID0gbmFtZXNwYWNlZEV2ZW50ICYmIG5hbWVzcGFjZWRFdmVudC5zcGxpdCgnLicpWzBdO1xuXHRcdHZhciBuYW1lc3BhY2UgPSBldmVudCAmJiBuYW1lc3BhY2VkRXZlbnQuc3Vic3RyaW5nKGV2ZW50Lmxlbmd0aCk7XG5cblx0XHRPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24oIGJpbmQgKXtcblxuXHRcdFx0dmFyIHRFdmVudCA9IGJpbmQuc3BsaXQoJy4nKVswXSxcblx0XHRcdFx0dE5hbWVzcGFjZSA9IGJpbmQuc3Vic3RyaW5nKHRFdmVudC5sZW5ndGgpO1xuXG5cdFx0XHRpZiAoICghZXZlbnQgfHwgZXZlbnQgPT09IHRFdmVudCkgJiYgKCFuYW1lc3BhY2UgfHwgbmFtZXNwYWNlID09PSB0TmFtZXNwYWNlKSApIHtcblx0XHRcdFx0ZGVsZXRlIHNjb3BlX0V2ZW50c1tiaW5kXTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIFVwZGF0ZWFibGU6IG1hcmdpbiwgbGltaXQsIHBhZGRpbmcsIHN0ZXAsIHJhbmdlLCBhbmltYXRlLCBzbmFwXG5cdGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMgKCBvcHRpb25zVG9VcGRhdGUsIGZpcmVTZXRFdmVudCApIHtcblxuXHRcdC8vIFNwZWN0cnVtIGlzIGNyZWF0ZWQgdXNpbmcgdGhlIHJhbmdlLCBzbmFwLCBkaXJlY3Rpb24gYW5kIHN0ZXAgb3B0aW9ucy5cblx0XHQvLyAnc25hcCcgYW5kICdzdGVwJyBjYW4gYmUgdXBkYXRlZC5cblx0XHQvLyBJZiAnc25hcCcgYW5kICdzdGVwJyBhcmUgbm90IHBhc3NlZCwgdGhleSBzaG91bGQgcmVtYWluIHVuY2hhbmdlZC5cblx0XHR2YXIgdiA9IHZhbHVlR2V0KCk7XG5cblx0XHR2YXIgdXBkYXRlQWJsZSA9IFsnbWFyZ2luJywgJ2xpbWl0JywgJ3BhZGRpbmcnLCAncmFuZ2UnLCAnYW5pbWF0ZScsICdzbmFwJywgJ3N0ZXAnLCAnZm9ybWF0J107XG5cblx0XHQvLyBPbmx5IGNoYW5nZSBvcHRpb25zIHRoYXQgd2UncmUgYWN0dWFsbHkgcGFzc2VkIHRvIHVwZGF0ZS5cblx0XHR1cGRhdGVBYmxlLmZvckVhY2goZnVuY3Rpb24obmFtZSl7XG5cdFx0XHRpZiAoIG9wdGlvbnNUb1VwZGF0ZVtuYW1lXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRvcmlnaW5hbE9wdGlvbnNbbmFtZV0gPSBvcHRpb25zVG9VcGRhdGVbbmFtZV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR2YXIgbmV3T3B0aW9ucyA9IHRlc3RPcHRpb25zKG9yaWdpbmFsT3B0aW9ucyk7XG5cblx0XHQvLyBMb2FkIG5ldyBvcHRpb25zIGludG8gdGhlIHNsaWRlciBzdGF0ZVxuXHRcdHVwZGF0ZUFibGUuZm9yRWFjaChmdW5jdGlvbihuYW1lKXtcblx0XHRcdGlmICggb3B0aW9uc1RvVXBkYXRlW25hbWVdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdG9wdGlvbnNbbmFtZV0gPSBuZXdPcHRpb25zW25hbWVdO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0c2NvcGVfU3BlY3RydW0gPSBuZXdPcHRpb25zLnNwZWN0cnVtO1xuXG5cdFx0Ly8gTGltaXQsIG1hcmdpbiBhbmQgcGFkZGluZyBkZXBlbmQgb24gdGhlIHNwZWN0cnVtIGJ1dCBhcmUgc3RvcmVkIG91dHNpZGUgb2YgaXQuICgjNjc3KVxuXHRcdG9wdGlvbnMubWFyZ2luID0gbmV3T3B0aW9ucy5tYXJnaW47XG5cdFx0b3B0aW9ucy5saW1pdCA9IG5ld09wdGlvbnMubGltaXQ7XG5cdFx0b3B0aW9ucy5wYWRkaW5nID0gbmV3T3B0aW9ucy5wYWRkaW5nO1xuXG5cdFx0Ly8gVXBkYXRlIHBpcHMsIHJlbW92ZXMgZXhpc3RpbmcuXG5cdFx0aWYgKCBvcHRpb25zLnBpcHMgKSB7XG5cdFx0XHRwaXBzKG9wdGlvbnMucGlwcyk7XG5cdFx0fVxuXG5cdFx0Ly8gSW52YWxpZGF0ZSB0aGUgY3VycmVudCBwb3NpdGlvbmluZyBzbyB2YWx1ZVNldCBmb3JjZXMgYW4gdXBkYXRlLlxuXHRcdHNjb3BlX0xvY2F0aW9ucyA9IFtdO1xuXHRcdHZhbHVlU2V0KG9wdGlvbnNUb1VwZGF0ZS5zdGFydCB8fCB2LCBmaXJlU2V0RXZlbnQpO1xuXHR9XG5cblx0Ly8gVGhyb3cgYW4gZXJyb3IgaWYgdGhlIHNsaWRlciB3YXMgYWxyZWFkeSBpbml0aWFsaXplZC5cblx0aWYgKCBzY29wZV9UYXJnZXQubm9VaVNsaWRlciApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IFNsaWRlciB3YXMgYWxyZWFkeSBpbml0aWFsaXplZC5cIik7XG5cdH1cblxuXHQvLyBDcmVhdGUgdGhlIGJhc2UgZWxlbWVudCwgaW5pdGlhbGlzZSBIVE1MIGFuZCBzZXQgY2xhc3Nlcy5cblx0Ly8gQWRkIGhhbmRsZXMgYW5kIGNvbm5lY3QgZWxlbWVudHMuXG5cdGFkZFNsaWRlcihzY29wZV9UYXJnZXQpO1xuXHRhZGRFbGVtZW50cyhvcHRpb25zLmNvbm5lY3QsIHNjb3BlX0Jhc2UpO1xuXG5cdHNjb3BlX1NlbGYgPSB7XG5cdFx0ZGVzdHJveTogZGVzdHJveSxcblx0XHRzdGVwczogZ2V0Q3VycmVudFN0ZXAsXG5cdFx0b246IGJpbmRFdmVudCxcblx0XHRvZmY6IHJlbW92ZUV2ZW50LFxuXHRcdGdldDogdmFsdWVHZXQsXG5cdFx0c2V0OiB2YWx1ZVNldCxcblx0XHRyZXNldDogdmFsdWVSZXNldCxcblx0XHQvLyBFeHBvc2VkIGZvciB1bml0IHRlc3RpbmcsIGRvbid0IHVzZSB0aGlzIGluIHlvdXIgYXBwbGljYXRpb24uXG5cdFx0X19tb3ZlSGFuZGxlczogZnVuY3Rpb24oYSwgYiwgYykgeyBtb3ZlSGFuZGxlcyhhLCBiLCBzY29wZV9Mb2NhdGlvbnMsIGMpOyB9LFxuXHRcdG9wdGlvbnM6IG9yaWdpbmFsT3B0aW9ucywgLy8gSXNzdWUgIzYwMCwgIzY3OFxuXHRcdHVwZGF0ZU9wdGlvbnM6IHVwZGF0ZU9wdGlvbnMsXG5cdFx0dGFyZ2V0OiBzY29wZV9UYXJnZXQsIC8vIElzc3VlICM1OTdcblx0XHRyZW1vdmVQaXBzOiByZW1vdmVQaXBzLFxuXHRcdHBpcHM6IHBpcHMgLy8gSXNzdWUgIzU5NFxuXHR9O1xuXG5cdC8vIEF0dGFjaCB1c2VyIGV2ZW50cy5cblx0YmluZFNsaWRlckV2ZW50cyhvcHRpb25zLmV2ZW50cyk7XG5cblx0Ly8gVXNlIHRoZSBwdWJsaWMgdmFsdWUgbWV0aG9kIHRvIHNldCB0aGUgc3RhcnQgdmFsdWVzLlxuXHR2YWx1ZVNldChvcHRpb25zLnN0YXJ0KTtcblxuXHRpZiAoIG9wdGlvbnMucGlwcyApIHtcblx0XHRwaXBzKG9wdGlvbnMucGlwcyk7XG5cdH1cblxuXHRpZiAoIG9wdGlvbnMudG9vbHRpcHMgKSB7XG5cdFx0dG9vbHRpcHMoKTtcblx0fVxuXG5cdGFyaWEoKTtcblxuXHRyZXR1cm4gc2NvcGVfU2VsZjtcblxufVxuXG5cblx0Ly8gUnVuIHRoZSBzdGFuZGFyZCBpbml0aWFsaXplclxuXHRmdW5jdGlvbiBpbml0aWFsaXplICggdGFyZ2V0LCBvcmlnaW5hbE9wdGlvbnMgKSB7XG5cblx0XHRpZiAoICF0YXJnZXQgfHwgIXRhcmdldC5ub2RlTmFtZSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogY3JlYXRlIHJlcXVpcmVzIGEgc2luZ2xlIGVsZW1lbnQsIGdvdDogXCIgKyB0YXJnZXQpO1xuXHRcdH1cblxuXHRcdC8vIFRlc3QgdGhlIG9wdGlvbnMgYW5kIGNyZWF0ZSB0aGUgc2xpZGVyIGVudmlyb25tZW50O1xuXHRcdHZhciBvcHRpb25zID0gdGVzdE9wdGlvbnMoIG9yaWdpbmFsT3B0aW9ucywgdGFyZ2V0ICk7XG5cdFx0dmFyIGFwaSA9IGNsb3N1cmUoIHRhcmdldCwgb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zICk7XG5cblx0XHR0YXJnZXQubm9VaVNsaWRlciA9IGFwaTtcblxuXHRcdHJldHVybiBhcGk7XG5cdH1cblxuXHQvLyBVc2UgYW4gb2JqZWN0IGluc3RlYWQgb2YgYSBmdW5jdGlvbiBmb3IgZnV0dXJlIGV4cGFuc2liaWxpdHk7XG5cdHJldHVybiB7XG5cdFx0dmVyc2lvbjogVkVSU0lPTixcblx0XHRjcmVhdGU6IGluaXRpYWxpemVcblx0fTtcblxufSkpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL25vVWlTbGlkZXIvZGlzdHJpYnV0ZS9ub3Vpc2xpZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///45\n");

/***/ }),
/* 46 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvc2VsZWN0aW9uLXBhbmVsLnNjc3M/NzJlZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI0Ni5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc3R5bGUvc2VsZWN0aW9uLXBhbmVsLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///46\n");

/***/ }),
/* 47 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvbm91aXNsaWRlci5zY3NzP2RkOTUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3N0eWxlL25vdWlzbGlkZXIuc2Nzc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///47\n");

/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dom = __webpack_require__(1);\r\nvar on = __webpack_require__(3);\r\nvar domConstruct = __webpack_require__(2);\r\n__webpack_require__(49);\r\nvar BasemapPanel = /** @class */ (function () {\r\n    function BasemapPanel(state) {\r\n        var _this = this;\r\n        this.container = dom.byId('basemapPanel');\r\n        this.basemapContainer = document.querySelector('.basemaps');\r\n        var basemapGroup = state.view.map.layers.filter(function (layer) {\r\n            return (layer.title === 'Basemap');\r\n        }).getItemAt(0);\r\n        basemapGroup.layers.forEach(function (layer) {\r\n            // crazy hack to get access to portalItem property\r\n            var portalLayer = layer;\r\n            var basemapItem = domConstruct.create('div', {\r\n                class: 'basemapItem',\r\n                style: \"background: url(\" + portalLayer.portalItem.thumbnailUrl + \") no-repeat center\",\r\n                'data-id': layer.id,\r\n                innerHTML: \"<div>\" + layer.title + \"</div>\"\r\n            }, _this.basemapContainer);\r\n            on(basemapItem, 'click', function (evt) {\r\n                state.currentBasemapId = evt.target.dataset.id;\r\n            });\r\n        });\r\n    }\r\n    return BasemapPanel;\r\n}());\r\nexports.default = BasemapPanel;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvdWkvQmFzZW1hcFBhbmVsLnRzPzVjZDAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpQ0FBZ0M7QUFDaEMsZ0NBQThCO0FBQzlCLDBDQUFtRDtBQUluRCx3QkFBd0M7QUFFeEM7SUFLRSxzQkFBWSxLQUFZO1FBQXhCLGlCQXdCQztRQXZCQyxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDMUMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFNUQsSUFBSSxZQUFZLEdBQWUsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFDLEtBQUs7WUFDaEUsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQztRQUNyQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFaEIsWUFBWSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBQyxLQUFLO1lBRWhDLGtEQUFrRDtZQUNsRCxJQUFJLFdBQVcsR0FBZSxLQUFLLENBQUM7WUFDcEMsSUFBSSxXQUFXLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7Z0JBQzNDLEtBQUssRUFBRSxhQUFhO2dCQUNwQixLQUFLLEVBQUUscUJBQW1CLFdBQVcsQ0FBQyxVQUFVLENBQUMsWUFBWSx1QkFBb0I7Z0JBQ2pGLFNBQVMsRUFBRSxLQUFLLENBQUMsRUFBRTtnQkFDbkIsU0FBUyxFQUFFLFVBQVEsS0FBSyxDQUFDLEtBQUssV0FBUTthQUN2QyxFQUFFLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBRTFCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsT0FBTyxFQUFFLFVBQUMsR0FBRztnQkFDM0IsS0FBSyxDQUFDLGdCQUFnQixHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUNqRCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUwsQ0FBQztJQUNILG1CQUFDO0FBQUQsQ0FBQyIsImZpbGUiOiI0OC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvbSBmcm9tICdkb2pvL2RvbSc7XHJcbmltcG9ydCAqIGFzIG9uIGZyb20gJ2Rvam8vb24nO1xyXG5pbXBvcnQgKiBhcyBkb21Db25zdHJ1Y3QgZnJvbSAnZG9qby9kb20tY29uc3RydWN0JztcclxuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCAqIGFzIEdyb3VwTGF5ZXIgZnJvbSAnZXNyaS9sYXllcnMvR3JvdXBMYXllcic7XHJcblxyXG5pbXBvcnQgJy4uLy4uL3N0eWxlL2Jhc2VtYXAtcGFuZWwuc2Nzcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlbWFwUGFuZWwge1xyXG5cclxuICBjb250YWluZXI6IGFueTtcclxuICBiYXNlbWFwQ29udGFpbmVyOiBhbnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBkb20uYnlJZCgnYmFzZW1hcFBhbmVsJyk7XHJcbiAgICB0aGlzLmJhc2VtYXBDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFzZW1hcHMnKTtcclxuXHJcbiAgICBsZXQgYmFzZW1hcEdyb3VwID0gPEdyb3VwTGF5ZXI+c3RhdGUudmlldy5tYXAubGF5ZXJzLmZpbHRlcigobGF5ZXIpID0+IHtcclxuICAgICAgcmV0dXJuIChsYXllci50aXRsZSA9PT0gJ0Jhc2VtYXAnKTtcclxuICAgIH0pLmdldEl0ZW1BdCgwKTtcclxuXHJcbiAgICBiYXNlbWFwR3JvdXAubGF5ZXJzLmZvckVhY2goKGxheWVyKSA9PiB7XHJcblxyXG4gICAgICAvLyBjcmF6eSBoYWNrIHRvIGdldCBhY2Nlc3MgdG8gcG9ydGFsSXRlbSBwcm9wZXJ0eVxyXG4gICAgICBsZXQgcG9ydGFsTGF5ZXIgPSA8R3JvdXBMYXllcj5sYXllcjtcclxuICAgICAgbGV0IGJhc2VtYXBJdGVtID0gZG9tQ29uc3RydWN0LmNyZWF0ZSgnZGl2Jywge1xyXG4gICAgICAgIGNsYXNzOiAnYmFzZW1hcEl0ZW0nLFxyXG4gICAgICAgIHN0eWxlOiBgYmFja2dyb3VuZDogdXJsKCR7cG9ydGFsTGF5ZXIucG9ydGFsSXRlbS50aHVtYm5haWxVcmx9KSBuby1yZXBlYXQgY2VudGVyYCxcclxuICAgICAgICAnZGF0YS1pZCc6IGxheWVyLmlkLFxyXG4gICAgICAgIGlubmVySFRNTDogYDxkaXY+JHtsYXllci50aXRsZX08L2Rpdj5gXHJcbiAgICAgIH0sIHRoaXMuYmFzZW1hcENvbnRhaW5lcik7XHJcblxyXG4gICAgICBvbihiYXNlbWFwSXRlbSwgJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIHN0YXRlLmN1cnJlbnRCYXNlbWFwSWQgPSBldnQudGFyZ2V0LmRhdGFzZXQuaWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHMvdWkvQmFzZW1hcFBhbmVsLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///48\n");

/***/ }),
/* 49 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvYmFzZW1hcC1wYW5lbC5zY3NzP2E1ZWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3N0eWxlL2Jhc2VtYXAtcGFuZWwuc2Nzc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///49\n");

/***/ }),
/* 50 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvbWVudS1wYW5lbC5zY3NzP2UwMDkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3N0eWxlL21lbnUtcGFuZWwuc2Nzc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///50\n");

/***/ })
/******/ ])});;